---
layout: post
status: publish
published: false
title: 《Unity3D高级编程之进阶主程》第二章，架构(一)
description: "unity3d 高级编程 unity3d架构 客户端架构 架构 主程"
excerpt_separator: ===
categories:
- 原创著作
- Unity3D
- 前端技术
tags:
- unity3d
- 架构
- 客户端架构
---

#第二章，架构(一)

1.	什么是架构
架构就好比是个架子，架子有大有小，大的需要花费点力气，小的轻便快捷。
有时我们杀鸡用牛刀时会在大的架子上放小的东西，看起来不是那么协调对么。放小东西时，我们却搭了一个大的架子，费时费力，不划算。所以架子的大小和结实程度，最好由项目本身决定。

2.	思考为何需要架构
为什么需要架构。肯定有人说大规模开发，没个架构，规范就没了，大家各做各的，肯定会乱啊。我想说，这种说法只是其一，即使一个人开发时，也需要架构。架构既承载了你思想，也帮助你整理程序。

3.	如何鉴定架构的好坏
架构的好与坏，有很多误区，比如有人认为通用最好，有人认为功能越多越好，有人觉得耦合性越强越好。见解有很多，我自己也有自己的见解。我首先认为服务器架构和客户端架构不同，服务器注重承载，客户端注重模块。客户端架构，根据项目轻重决定模块尽量齐全，模块可以不独立但尽量独立，对每个模块进行深耕和规划是对架构改善的最好做法。

4.	Unity3D架构怎么构建
先确定架构需要的模块：数据表层，网络层，UI层，外部资源管理，AI层，地形地图，寻路与网格，常用库，工具，角色行为控制，2D动画控制等。你需要哪些？
常用的一般数据表，网络层，UI层，常用库，这几个。
比如你是策略类游戏，可能就没有很多角色上的东西，而多了很多2D动画行为控制上的需求。比如你是3D人物角色为主的游戏，就有地形地图，角色行为控制，甚至需要一套角色技能特效动画编辑器。
而后再对这些模块进行细致化的构建。
数据表--从XLS导为2进制文件还是CSV或其他格式。
网络层--是短链接还是长链接。
UI层--使用NGUI还是UGUI，界面基类怎么定义，界面管理如何做，输入事件如何管理。
外部资源管理—是否使用AssetBundle，AB如何分类打包，有没有共享AB，什么时候该释放AB资源。
AI层—使用状态机还是行为树或者其他，状态机如何实现，行为树工具要怎么做。
地形地图—地图是2D还是3D，是使用自带地形还是自己做网格地形，是否需要Mesh合并，地形上小东西怎么处理，如果地形过大，在游戏里该怎么逐步显示。
寻路与网格—使用A星算法还是其他，自己写寻路还是借助插件，网格怎么生成，方格还是三角形，地图过大时A星寻路会超时，如何处理。
常用库—时间转换，数学函数，数字变量加密封装类，坐标转换函数，Debug信息开关等等
角色行为控制—前进，后退，左右移动，跳跃怎么处理，技能中特效怎么跟人物挂钩，技能移动怎么修改和编辑，是否需要技能特效编辑器，换装编辑器。
2D动画控制—帧动画需要封装吗，2D骨骼动画需要封装吗，2D人物动画行为如何控制，技能制作是否需要写编辑器，2D动画特效是否有制作流程。


