---
layout: post
status: publish
published: false
title: 《Unity3D高级编程之进阶主程》第五章，3D模型与动画(三) - 3D模型的变与换
description: "unity3d 高级编程 主程 "
excerpt_separator: ===
tags:
- 书籍著作
- Unity3D
- 前端技术
---

3D模型很常见，但除了在游戏中那些静止的一动不动的3D模型外，还有许许多多动来动去的，这些3D模型除了骨骼动画，顶点动画外，很多时候为了画面效果的表现，我们还需要：切割，变形，捏脸，飘动等等。那么它们是怎么实现的呢？我们今天就来讲讲这蕴含其中的技术与原理。

蒙皮网格(SkinnedMesh) 和 普通网格(Mesh) 的不同。

蒙皮网格渲染的是模型，由3D模型数据组成，普通网格渲染的也是模型，也有3D模型数据。

但是蒙皮网格主要是为了动画服务的，所以蒙皮网格除了3D模型数据外还有骨骼数据。

如果蒙皮网格没有动画，和普通网格的作用没有任何区别，只是用了不同组件去渲染罢了。

说到动画，这里也简单阐述一下动画的原理，后面章节会详细阐述。

动画分骨骼动画 和 顶点动画两种。

这两种都是通过改变模型上的各个顶点位置，从而让模型变形，进而形成动画的效果。

那么模型上这么多成千上万的顶点每个都要手动来调整，每一帧手动调整一次，这种量级的劳动力，人类无法承受，所以有了骨骼这个概念。

骨骼就是为了，节省劳动力来生的，一个骨骼可以影响周围一定范围内的所有顶点，一个顶点，也可以受到多个骨骼的影响。

技术原理是最重要的核心点，人只要理解了技术原理，就能将技术表象解释清楚，并在实际项目中将这种技术运用自如。

这样的话理论上说，我们每个人把所有精力先放在理解原理上，然后再去做技术实现不就轻松了吗。理论上是这样的，但人类头脑的进化毕竟还没到那么高级的程度，虽然能处理一些看上去相对复杂的事物，但从学习知识的角度看，人类的大脑还是不够高级，说实话应该是有点低级的。我们无法想象抽象的事物，

，理解技术原理比较困难，为什么困难，因为

我们来说说模型的切割表象和技术实现。

###	如何对3D模型表面进行实时变更。(https://zhuanlan.zhihu.com/p/28471808 捏脸，骨骼点移动，旋转，缩放，Mesh大小差值实时生成)

对3D模型Mesh实时改变在很多场景中也是很有用的。比如Mesh地形挖坑，捏脸，物体切割，还有像《白猫计划》中的泡泡摇杆等。


Unity中模型发生闪烁原因通常情况下是因为其中两个面距离太近了。 

这里有两个解决方法 

1，增加导致闪烁的两个面的距离

2，增加摄像机最近裁切面的值

3，修改Shader中ZTest 中的 LEqual 修改为 Less

4，改变着色器的渲染次序，RenderQueue + 1


为什么两个面靠的近，有时候会闪烁，有时候又不会乃？ 

模型闪烁根本原因是Unity中模型的点信息是双精度的，GPU处理模型过程中需要将三维点坐标转化为屏幕坐标，进而投射到屏幕上（所以说你被视觉欺骗啦）。当摄像机显示范围过大，最近裁切面太小（Unity默认值是0.3）或者模型偏移过大时，模型点的定位会不准，导致相邻很近的两个面发生相互交错的情况（试想那些点就像跳蚤，你不动它也不动，你若动，它就跳来跳去），进而导致闪烁。解决方法就是对应导致这问题的三种原因进行改进。 



7.	如何对3D人物进行换装。 https://www.cnblogs.com/oldman/articles/2453990.html
9.	人物动作与技能编辑器
10.	骨骼蒙皮和网格动画的区别。
11.	模型和贴图设置优化。
12.	动画优化。(https://blog.uwa4d.com/archives/Sparkle_GPUSkinning.html，http://www.cnblogs.com/murongxiaopifu/p/7250772.html)

