---
layout: post
status: publish
published: false
title: 读书笔记(十八) 《C++性能优化指南》三
description: "读书 书 看书 读后感"
excerpt_separator: ===
tags:
- 读书笔记
---

## 热点代码

细节优化

语句级别的优化可以被模式化为从执行流中移除指令的过程

执行指令的多少

跳转次数的多少

保存额外临时寄存器的次数多少

内存分配次数的多少

函数开销的原理，以及继承中的函数调用，以及多重继承的函数调用

表达式运算优化

switch 和 if

异常try catch的开销和运行机制

## IO

文件IO底层机制的几种方式，磁盘运行原理

同步读取和异步读取

减少读取次数

预先知道文件有多大，先分配同样大小的内存，减少读取次数

写入文件，减少flash调用次数

分帧读取，增强画面体验

## 并发

由于设备资源并不总是运行，是因为某些程序并没有使用到某些资源，这使得资源的闲置造成了浪费，如果能在当某个程序在执行指令时，另一个设备在满负荷运作，这样就相当于提高了运行效率。我们希望计算机资源包括IO资源运行的饱和度能达到100%，这样我们在执行各种程序时就能让计算机满负荷奔跑，而不只是某个CPU和内存。

资源有，多个cpu，硬盘，网卡，显卡，声卡

并发的挑战是找到足够多的独立任务来充分地使用所有可用的计算机资源，让资源都能满负荷的执行，提高整体运行效率。

线程、进程在Linux中的运行机制，时间片概念

操作系统会维护一份当前正在执行的程序和系统任务的列表，并为每个程序都分配时间。

进程并发的优点是隔离了两个进程之间的关系，缺点是启动、停止和切换都比线程慢的多。

线程的开关虽然比进程消耗小，但它的消耗还是太大，线程池对优化起的作用。

线程交叉执行的可能结果

为什么线程交叉执行内存写入时，会得到不一样的结果？

线程同步的方案，互斥量、锁、

原子性，什么是原子性，为什么要用原子性。

内存对齐时与不对齐时同步问题

内存栅栏是什么？为什么要用内存栅栏？它是怎么工作的？

加入更多SIMD指令

线程数量的多少取决于什么？

线程间的合作，消息传递机制，管道和循环管道

无锁容器的原理

如何让在做互斥时，让线程之间的配合更搞笑，

	减少锁区间的执行指令

什么是线程惊群？如何避免？


减少竞争线程的方法

	复制多分资源，减少争夺

	分割资源，分块读取

	锁的范围更小，局限在容器的某个节点上，而不是整个容器

	散列容器，无锁处理















