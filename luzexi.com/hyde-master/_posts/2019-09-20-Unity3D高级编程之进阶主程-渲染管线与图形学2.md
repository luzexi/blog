---
layout: post
status: publish
published: false
title: 《Unity3D高级编程之进阶主程》第七章，渲染管线与图形学(一) - 图形学基础2
description: "unity3d 高级编程 主程 shader 漫反射 镜面反射 自发光 球面反射"
excerpt_separator: ===
tags:
- 书籍著作
- Unity3D
- 前端技术
---

### 理解矩阵表达缩放的几何意义

缩放矩阵和旋转矩阵在几何意义上有着异曲同工之妙，我们同样用二维坐标系来表达缩放矩阵的两个 a,b 向量。

举例来说，二维标准轴的旋转矩阵：

		[1.5,  0]  等  [a]
		[0, 0.75]  于  [b]

我们把 a和b 表现在二维坐标系中，即如图：

		脑补图片

图中a，b两个向量可以形成了一个矩形，我们就假设这个矩形图像表达了a，b向量的缩放关系。当a，b被拉长时，这个矩形图像被也同样被拉长。

其原理为向量与矩阵的乘法，我们知道

		二维向量与二维矩阵相乘 = (x*m11 + y*m21, x*m12 + y*m22)

对于我们这个标准坐标系上的缩放矩阵来说的到的结果是 (1.5*x, 0.75*y)，也就是说

		(x*m11 + y*m21, x*m12 + y*m22) = (x*1.5 + y*0, x*0 + y*0.75) = (1.5*x, 0.75*y)

这个结果表达了，对标准坐标系上的缩放矩阵，在对向量缩放时非常直观易懂，因为除了对角线上的数字，其他位置的数字都是0。

不过这种简单易懂的旋转矩阵，也仅限于标准坐标系中对标准轴的缩放。只有标准坐标系上的缩放计算，是远远满足不了我们的需求的。

那么怎么计算对任意轴方向上的缩放呢？我们来看如下图所示：

		脑补图片

沿 N 方向缩放 v 向量，其实和前一节中绕 N 轴旋转 v 向量也有异曲同工之妙。

我们需要根据我们所知道的推导这个公式，即我们已知v，已知 N，已知缩放因子k (k是一个单纯的数字) ，要求得v’。

可以通过 N 和 v 求得投影 v1，通过 v 和 v1 求得他们的垂直向量 v2，再通过缩放因子 k 求得v1和v2缩放后的向量 v1‘ 和 v2’，最后通过 v1‘ 和 v2’ 求得缩放后的结果向量 v‘，即如下图公式。

		脑补图片

同样的，三维空间中，如果是标准坐标系上缩放，则缩放矩阵可以是很简单的对角线矩阵，即。

		[scale-x, 0, 0]
		[0, scale-y, 0]
		[0, 0, scale-z]

也同样的，这种标准坐标系上的缩放完全满足不了我们的需求，我们需要沿任意向量上的缩放矩阵。

同样的向量，同样的变化，同样的推导，最终结果为：

		脑补图片

最终我们获得了，沿任意方向缩放的矩阵。

结果并不重要，我们用到的时候可以直接复制粘贴抄过来，推导的过程才是真正理解矩阵缩放原理的必要过程，我们得知道这个结果是怎么来原理是怎么样的，怎样理解才能最终通向结果，这才是我们学习的重要目标，其实理解了后没去用它很多年后又忘记了也没什么关系，只要在我们需要时它能很快恢复过来就行，毕竟需要我们记忆的东西太多，而且人生的每个时段都不一样，所以我们只要知道原理就行，其他时候就在用到时慢慢恢复过来也来得及。

### 四元组的意义

### 空间计算

平面的表达方式，球体的表达方式，AABB包围盒的表达方式

点到平面的距离，点到平面的向量

2D线上最近的点

平面上最近的点

圆或球体上最近的点

AABB上最近的点

### 图形相交检测

线段相交检测

射线与平面相交检测

AABB与平面相交检测

射线与圆球的相交检测

两个圆球的相交检测

球与AABB的相交检测

射线与三角形的相交检测

射线与AABB的相交检测

两个AABB的相交检测

### 网格的表达与渲染方式



参考资料：

《3D数学基础:图形与游戏开发》






