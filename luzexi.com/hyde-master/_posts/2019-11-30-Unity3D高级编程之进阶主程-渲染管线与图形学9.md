---
layout: post
status: publish
published: false
title: 《Unity3D高级编程之进阶主程》第七章，渲染管线与图形学(三) - 渲染原理与知识4
description: "unity3d 高级编程 主程 shader 漫反射 镜面反射 自发光 球面反射"
excerpt_separator: ===
tags:
- 书籍著作
- Unity3D
- 前端技术
---


### 多重采样(Multisampling)与反走样(Antialiasing)

多重采样(Multisampling)是一种对几何图元的边缘进行平滑处理的技术，也称为反走样技术之一。

OpenGL支持几种不同的反走样技术，比如线段反走样，多边形反走样，纹理图像压缩的质量与导数精度有在反走样范围内。实时上这几个反走样技术都是以开关的形式在OpenGL中存在，算法大致是将原本单一的线条或像素块周围填充更多的像素块，具体的填充算法细节比我们想象的要复杂的多，而且不同OpenGL是现在的算法中也有细微的差异，我们在这里不进行深入讨论。

多重采样的工作方式是对每个像素的几何图元进行多次采样。在多次采样后，每个像素点不仅仅只是单个颜色(以及除了颜色外的深度值、模板值等信息)，还记录了许多样本值。

这些样本值类似于将一个像素分拆成了更小型的像素，每个像素都存储着颜色、深度值、模板值等信息，当我们需要呈现最终图像的内容时，这个像素的所有样本值会被解析为最终像素的颜色。

在Unity3D中反走样的设置，可以通过Quality Settings中的AntiAliasing来设置，它将启用图形接口(OpenGL或DirectX)中的多边形的反走样算法，并且开启多重采样，根据多重采样信息对多边形边缘进行像素填充。
		
		AntiAliasing 可以设置3档采样质量分别是 2倍, 4倍 and 8倍的多重采样。

GPU上的反走样代价是消耗更多的GPU算力和显存，庆幸的是与CPU毫无关系。

### 着色器编译过程

我们在知道GPU渲染管线如何运作后，对着色器编译过程仍然需要知晓，我们还是以使用OpenGL为例来学习着色器在Unity3D中从编译到执行的全过程。

着色程序的编译过程与C语言等编译语言的编译过程非常类似，只是C语言的编译是以离线的方式进行，而着色器程序的编译则是当引擎需要时，通过引擎调用图形接口(OpenGL或DirectX)的方式来进行编译，而且整个应用程序只需要编译一次，和我们通常所说的JIT(Just in time 即时编译)有点相似。这些都是引擎自己控制的，也就是说Unity3D引擎通过判断是否存在已经编译好的着色器程序，来决定是否编译着色器代码或是重用已经编译好的着色器程序。

那么着色程序从编译到执行过程到底是怎样的呢？让我们来讲一讲。


### 什么是PBR，现在为什么对PBR如此重视

PBR管线不是仅仅是为了画面上的效果，更为了大量重复工作规定了规范可流水线操作。

### Projector 投影的原理与应用

### 什么是渲染管线的升级，为什么要升级渲染管线

SPR(Scriptable Render Pipeline)可编程管线，什么是高自定义管线HDRP(High-Definition Rendering Pipeline)，Unity3D中的轻量渲染管线LWRP与传统管线有什么差别，以及最近升级的通用管线

### Light probe 原理与应用

### Entity 数据栈的原理与应用

### Lua 原理

### IL 原理与注入，以及Mono VM，IL2CPP，Burst的区别于介绍

### 什么是Shader Varant(变体)，以及如何处理



### Texture Array

多个数组被传入Shader，其实和 GPU Instancing 是同一个道理。

### Graphics Command Buffers

### High Dynamic Range 是什么？

### 闪烁的根源：坐标系变化后的z精度问题

### 什么是Overdraw，怎么解决Overdraw问题

### 什么是卷积，卷积对后渲染的作用

### 2幂次纹理的读取与纹理压缩

<!-- ### 为什么要用CG来写Shader而不是其他的 -->
