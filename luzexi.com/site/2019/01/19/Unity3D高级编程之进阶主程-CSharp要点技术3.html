<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta content="unity3d 高级编程 c# 主程 算法 设计模式 动态库 底层算法" name="description">


  <title>
    
      《Unity3D高级编程之进阶主程》第一章，C#要点技术(三) 浮点数的精度问题
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css?version=20180701">
  <!-- <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface"> -->

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

  	<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h2>
        <a href="/">
          技术人生
        </a>
      </h2>
      <p class="lead">技术，哲学，金融</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      <a class="sidebar-nav-item" href="/书籍著作/index.html">书籍著作</a>
      <a class="sidebar-nav-item" href="/Unity3D/index.html">Unity3D</a>
      <a class="sidebar-nav-item" href="/游戏通用模块/index.html">游戏通用模块</a>
      <a class="sidebar-nav-item" href="/前端技术/index.html">前端技术</a>
      <a class="sidebar-nav-item" href="/后端技术/index.html">后端技术</a>
      <a class="sidebar-nav-item" href="/其他技术/index.html">其他技术</a>
      <a class="sidebar-nav-item" href="/金融投资/index.html">金融投资</a>
      <a class="sidebar-nav-item" href="/life/index.html">思路探讨</a>
      <a class="sidebar-nav-item" href="/英文文章/index.html">英文文章</a>

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/Util-page.html">常用页面工具</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about.html">我的简介</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/engineer-shopping.html">程序员必需品</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/friendlink.html">友情链接</a>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
      
      
      <a class="sidebar-nav-item" href="https://github.com/luzexi">GitHub project</a>
      <a href="http://www.luzexi.com/assets/feed.xml">RSS feed</a>
      <!-- <span class="sidebar-nav-item">Currently v2.1.0</span> -->
    </nav>

    <p>&copy; 2020. All rights reserved. </p>
    <p><a href="http://www.beian.miit.gov.cn" target="_blank">浙ICP备13028172号-1</a></p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">《Unity3D高级编程之进阶主程》第一章，C#要点技术(三) 浮点数的精度问题</h1>
  <span class="post-date">19 Jan 2019</span>

  <p>直接开门见山了。</p>

<h3>浮点数的精度问题</h3>

<p>平常极少使用double类型，因为浮点数计算我们也并没有使用到特别的科学计算部分，所以float基本都够用，而且double也同样有精度问题，无论怎么样都是无法避免精度问题在项目里的危害的。</p>

<p>===</p>

<p>float 与 double 比较来看，占用的位数不同会导致精度不同，但也会引起计算效率不同，内存消耗也不一样，虽然在现代计算机中来看，对double的计算量和占用的内存量已经不太在意了，在单片机中会有所限制，手机设备中是肯定没有限制的，不过无论怎么样它都是无法避免精度问题。</p>

<p>实际工作中想试图通过使用double替换float来解决精度问题的人数众多，最后基本都以失败告终。</p>

<p>要认清精度这个问题的根源，我们先来看下浮点数在内存中到底是如何存储的。</p>

<p>计算机只认识 0 和 1，所以数值都是以二进制的方式储存在内存中的。根据 IEEE 754 标准，任意一个二进制浮点数 V 均可表示为：V = (-1 ^ s) * M * (2 ^ e)。</p>

<p>以 198903.19(10) 为例，</p>

<p>先转成二进制的数值为：110000100011110111.0011000010100011(2)（截取 16 位小数），</p>

<p>采用科学记数法等于 1.100001000111101110011000010100011 * (2 ^ 17)（整数位是 1），</p>

<p>即 198903.19(10) = (-1 ^ 0) * 1.100001000111101110011000010100011 * (2 ^ 17)。</p>

<p>整数部分可采用 &quot;除2取余法&quot;，小数部分可采用 &quot;乘2取整法&quot;。</p>

<p>从结果可以看出，小数部分 0.19 转为二进制后，小数位数超过 16 位（已经手算到小数点后 32 位都还没算完，其实这个位数是无穷尽的）。</p>

<p>由于无法得到完全精准正确的数值，所以浮点数在程序编程中就会遇到诸多的问题。</p>

<h6>浮点数的精度问题，可不只是小数点的精度问题哦，当浮点数变大时，在整数部分也同样会有相同的问题，因为浮点数是一个X * Y的形式得到的数字，当数字放大时自然精度就会变小，无论是整数位还是小数位。</h6>

<p>精度问题看起来好像很难碰到，但实际开发中碰到了很头疼。</p>

<p>那么到底哪些地方会碰到？</p>

<h6>1.数值比较不相等</h6>

<p>比如某个变量，需要从0开始加，每次加0.01，加到刚好0.23时做某事，到0.34时做另外一件事，到0.56时再做另一件。</p>

<p>这种精确定位的问题，就会遇到麻烦。因为浮点数在加减乘数时无法完全准确定位到某个值，就会在出现，要么比0.23小，要么比0.23大，永远不会刚刚与0.23相等的时候。</p>

<p>因此比较时，需要有一个微小的浮动区间。比如 ABS(X-Y) &lt; 0.0001 时认为 X 和 Y 是相等的。</p>

<h6>2.数值计算不确定</h6>

<p>比如 x = 1f，y = 2f，z = 1 * 2f，如果 x / y &lt;= 0.5f 时做某事，那么理论上说 x / z 也能通过这个if，但实际上未必能通过。</p>

<p>由于浮点数无法得到精确的数值而是一个浮动的数值。z 的计算结果有可能是0.4999999999991，当x / z 时，结果有可能得到大于0.5。</p>

<p>这就很头疼了啊。在实际编码中，如果在外圈的if判断成立，而内圈的if判断却有可能不成立，整个程序就出现无法估计得问题，因为看起来同样的数值，可能得到的结果却不一样。</p>

<p>这种情况下怎么办？</p>

<h6>第一种解决方法是，只计算一次，认定这个值为准确值，只用这个变量结果做判断。</h6>

<p>意识是说，用一次计算的结果，当做唯一确定性结果，而不再使用多次计算得到的结果。排除了多次结果不同导致的问题。</p>

<p>由于多次看似相等的计算其实得到的结果有可能不同，使得问题变得更复杂，比如上面所说的，1f / 2f 的结果，却用 1f / (1f * 2f) 来表示导致问题变得不可控。不如只使用一次计算结果，不再进行多次计算，认定当前结果的数值为准确数值，用这个浮点数值当做判断的标准。</p>

<p>我常用这种方法，因为其他方法涉及的代码量太多，情况也分不同种，限制太多，而项目需要快速推进，当前遗留的不是很重要的问题，完全可以推延到整体架构完成后，一步步细化，在前期的解决方案中，在考虑完整体架构的安全，负载能力，扩展能力，性能可优化性后，完全可以采用一些相对比较简单的解决方案，以快速达到前期的目标。</p>

<h6>第二种解决办法是，改用int或long型来替代浮点数。</h6>

<p>浮点数和整数的计算方式都是一样的，只是小数点部分不同而已，那么完全可以把浮点数乘以10的幂次，把自己需要的精度提上来用整数表示。</p>

<p>比如保留3位精度，所有浮点数都乘以1万来存储(因为第四位不是很准确了)，1.5变成了15000的整数，9.9变成了99000整数存储。</p>

<p>这样整数 15000 乘以 99000 得到的结果，与，整数30000 除以 2 再乘以 99000 得到的结果是完完全全相等的。</p>

<p>再复杂点 原来 2.5 / 3.1 * 5.1 与 0.8064 * 5.1，两者约等于为 4.1126，用整数替代，2500 / 31 * 51 与 80 * 51，等于 4080，虽然精度出现问题，但前两者结果不一致，而后两者结果完全相同。</p>

<p>用整数做计算精度问题，我们可以再扩大数值的幂次么，来看看，如果是 250000 / 31 * 51 就等于 411290，是不是精度提高了啊。</p>

<p>但问题又来了，乘以10的幂次来提高精度时，当浮点数比较大时，就会超出了整数的最大上线2 ^ 32 - 1或者2 ^ 64 - 1。</p>

<h6>第三种解决方法是，定点数</h6>

<p>浮点数在计算机中的表示方法是用 V = (-1)^s x (1.x) x 2^(E-f) 这样的公式表示的，也就是说浮点数的表达其实是模糊的，它用了另一个数的指数来表示当前的数。</p>

<p>而定点数则不同，它把整数部分和小数部分拆分开来，都用整数的形式表示，这样计算和表达都使用整数的方式，整数的计算是确定的，这样就不会存在误差，缺点是占用的字节数多了，计算的范围也缩小了。</p>

<p>用定点数来替换浮点数计算就能保证在各设备上的计算结果一致性，不过直接使用 C# 自带的decimal定点数在使用时也存在很多问题，比如无法和浮点数随意的互相转换，所以在计算上也会需要进行一定的封装，又比如无法控制末尾小数点，使得精度还是无法根据项目需求来控制，无法控制内存大小，大量使用使得堆栈内存增加。</p>

<p>因此大部分项目都是自己实现定点数的，把整数和小数拆开来都用整数表示封装在某个类中，再写一些额外的数学库的编写。其实并不复杂只要耐下心来写都会发现不是难事，把定点数与其他类型数字的加减乘除重写一下，如果涉及到更多的数学运算，则再建立一个定点数的数学库，存放一些数学运算的函数。</p>

<h6>第四种解决方法是，用字符串替代浮点数。</h6>

<p>如果浮点数用途只有加减乘数，那么完全可以用字符串代替浮点数来计算结果。</p>

<p>我记得以前在大学里做ACM题目时，就有这种方式来检验程序员的逻辑能力和考虑问题的全面性的题目，题目很简单A * B 或 A - B 或 A + B 或 A / B 输出结果，精度要求在小数点后10位。</p>

<p>把中小学算术的计算方式，写入到程序里去，用整数计算当前位置的算算术问题，这样整数就完全不需要担心越界问题，而且能自由的控制精度。</p>

<p>缺点是，很消耗CPU，比如123456.78912345 * 456789.2345678，这种类型的计算使用字符串代替浮点数，用一次相当于计算好几万次的普通浮点数计算。但是如果程序中对精度要求很高，且计算的次数不大，我觉得还是可以把这种方式放在考虑范围内的。</p>

<h6>第五种解决办法是，提高期望值。</h6>

<p>如果 10000 / 2 有可能等于 4999.9999 而无法达到5000的目标值时，我们不妨在计算前多加个1，使得 10001 / 2，这样就大概率保证超出 5000 的结果目标了。</p>

<p>我们怎么想的？为什么能这么做？因为我们做了假设。</p>

<p>我们脑袋中假设结果是模糊的，这个结果范围就是有可能是5000.0001，也有可能是5000.02，也有可能是4999.998，也有可能是4999.98。</p>

<p>正常情况下，由计算机的寄存器和CPU决定到底会得到什么结果。但我们不想，我们的期望是，宁愿高一点点，跨过这道门槛，也不要少一点点，被门槛拦在外面。</p>

<p>如果浮点数的精度不能给我们安全感，那么我们就自己给自己安全感。提高自己的数值，或者说，降低门槛，差不多了就差一点点了，就当做是跨过去了。</p>

<p>于是就有了 (X + 1) / Y 或者 (X + 0.001) * Y 的写法来度过&#39;精度危机&#39;。</p>

  <p>感谢您的耐心阅读</p>
  <p>Thanks for your reading</p>
</div>
<div>
  
<!-- 代码1：放在页面需要展示的位置  -->
<!-- 如果您配置过sourceid，建议在div标签中配置sourceid、cid(分类id)，没有请忽略  -->
<!-- <div id="cyReward" role="cylabs" data-use="reward" align="center" ></div> -->

<script type="text/javascript" src="/assets/js/tctip-1.0.3.min.js"></script>
<script>
  new tctip({
    top: '50%',
    button: {
      id: 9,
      type: 'zanzhu'
    },
    list: [
      {
        type: 'alipay',
        qrImg: '/assets/common/alipay.jpg'
      }, {
        type: 'wechat',
        qrImg: '/assets/common/wechatpay.jpg'
      }, {
        type: 'bitcoin',
        qrContent: '1ErCFmtoQY2KDctjgPALZri3USsMqdSvqh'
      }
    ]
  }).init()
</script>

  <li>
<p><strong><font color="red">版权申明</font></strong></p>
<!-- <p>本文为博主原创文章，未经允许不得转载: <a href = "http://www.luzexi.com">http://www.luzexi.com</a></p> -->
<p><strong><font color="red">本文为博主原创文章，未经允许不得转载:</font></strong></p>
<p><a href = "http://www.luzexi.com/2019/01/19/Unity3D%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%9B%E9%98%B6%E4%B8%BB%E7%A8%8B-CSharp%E8%A6%81%E7%82%B9%E6%8A%80%E6%9C%AF3.html">《Unity3D高级编程之进阶主程》第一章，C#要点技术(三) 浮点数的精度问题</a></p>
<!-- <p>本文为博主原创文章，未经允许不得转载: <a href = "http://www.luzexi.com/2019/01/19/Unity3D%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%9B%E9%98%B6%E4%B8%BB%E7%A8%8B-CSharp%E8%A6%81%E7%82%B9%E6%8A%80%E6%9C%AF3.html">《Unity3D高级编程之进阶主程》第一章，C#要点技术(三) 浮点数的精度问题</a></p> -->
<p><strong><font color="red">Copyright attention</font></strong></p>
<p><strong><font color="red">Please don't reprint without authorize.</font></strong></p>

</li>
  <li>
<p><strong>微信公众号，文章同步推送，致力于分享一个资深程序员在北上广深拼搏中对世界的理解</strong></p>
<p><image src="/public/qrcode_for_gzh.jpg" /></p>
</li>
</div>
<div class="related">
    
<div class="bshare-custom icon-medium-plus"><div class="bsPromo bsPromo2"></div><a title="分享到微信" class="bshare-weixin" href="javascript:void(0);"></a><a title="分享到新浪微博" class="bshare-sinaminiblog"></a><a title="分享到QQ好友" class="bshare-qqim" href="javascript:void(0);"></a><a title="分享到QQ空间" class="bshare-qzone" href="javascript:void(0);"></a><a title="分享到Twitter" class="bshare-twitter" href="javascript:void(0);"></a><a title="分享到Facebook" class="bshare-facebook" href="javascript:void(0);"></a><a title="更多平台" class="bshare-more bshare-more-icon more-style-addthis"></a></div><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#style=-1&amp;uuid=36b4f383-d948-41a3-acd5-31ae604e3ad8&amp;pophcol=2&amp;lang=zh"></script><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/bshareC0.js"></script>


</div>



<script type="text/javascript">
	if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent))
    { //移动端
        /*mobile-20:5*/
    	var cpro_id = "u3493987";
		document.write("\<script type=\"text\/javascript\" src=\"//cpro.baidustatic.com/cpro/ui/cm.js\"\>\<\/script\>");
    }
    else
    {
        /*760*90 创建于 2016-02-02*/
    	var cpro_id = "u2514412";
        document.write("\<script type=\"text/javascript\" src=\"//cpro.baidustatic.com/cpro/ui/c.js\"\>\<\/script\>");
	}
</script>





<div class="related">
  <h2>最新发表的文章</h2>
  <ul class="related-posts">

    
      <li>
        <h3>
          <a href="/2020/02/27/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A840.html">
            思路探讨(四十) 对赚钱和学习的一些思考(下)
            <small>27 Feb 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/02/15/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A839.html">
            思路探讨(三十九) 对赚钱和学习的一些思考(上)
            <small>15 Feb 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2020/01/31/%E9%98%B2%E7%94%B5%E8%AF%9D%E9%AA%9A%E6%89%B0-%E9%98%B2%E5%91%BC%E6%AD%BB%E4%BD%A0%E6%97%A5%E5%BF%97.html">
            防电话骚扰防呼死你日志
            <small>31 Jan 2020</small>
          </a>
        </h3>
      </li>
    

  </ul>

  <h2>之后发表的文章</h2>

  <ul class="related-posts">
    

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      

    

      
      

      
        
          <li>
            <h3>
              <a href="/2019/02/19/you-can-live-your-dream.html">
                YOU CAN LIVE YOUR DREAM!
                <small>19 Feb 2019</small>
              </a>
            </h3>
          </li>
        
          <li>
            <h3>
              <a href="/2019/02/17/Unity3D%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%9B%E9%98%B6%E4%B8%BB%E7%A8%8B-CSharp%E8%A6%81%E7%82%B9%E6%8A%80%E6%9C%AF6.html">
                《Unity3D高级编程之进阶主程》第一章，C#要点技术(六) 搜索算法
                <small>17 Feb 2019</small>
              </a>
            </h3>
          </li>
        
          <li>
            <h3>
              <a href="/2019/02/04/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A820.html">
                思路探讨(二十) 如何将你的家庭与普通人拉开差距
                <small>04 Feb 2019</small>
              </a>
            </h3>
          </li>
        
          <li>
            <h3>
              <a href="/2019/02/03/Unity3D%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%9B%E9%98%B6%E4%B8%BB%E7%A8%8B-CSharp%E8%A6%81%E7%82%B9%E6%8A%80%E6%9C%AF5.html">
                《Unity3D高级编程之进阶主程》第一章，C#要点技术(五) 排序算法
                <small>03 Feb 2019</small>
              </a>
            </h3>
          </li>
        
          <li>
            <h3>
              <a href="/2019/01/26/Unity3D%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%9B%E9%98%B6%E4%B8%BB%E7%A8%8B-CSharp%E8%A6%81%E7%82%B9%E6%8A%80%E6%9C%AF4.html">
                《Unity3D高级编程之进阶主程》第一章，C#要点技术(四) 委托、事件、装箱、拆箱
                <small>26 Jan 2019</small>
              </a>
            </h3>
          </li>
        

        
  <!-- </ul> -->

  <h2>之前发表的文章</h2>

  <ul class="related-posts">
    

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      

    

      

      
        
          <li>
            <h3>
              <a href="/2019/01/12/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A819.html">
                思路探讨(十九) 机会
                <small>12 Jan 2019</small>
              </a>
            </h3>
          </li>
        
          <li>
            <h3>
              <a href="/2019/01/05/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A818.html">
                思路探讨(十八) 所有不确定都是机会
                <small>05 Jan 2019</small>
              </a>
            </h3>
          </li>
        
          <li>
            <h3>
              <a href="/2019/01/01/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A817.html">
                思路探讨(十七) 2018形势和心态
                <small>01 Jan 2019</small>
              </a>
            </h3>
          </li>
        
          <li>
            <h3>
              <a href="/2018/12/26/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A816.html">
                思路探讨(十六) 感官动物
                <small>26 Dec 2018</small>
              </a>
            </h3>
          </li>
        
          <li>
            <h3>
              <a href="/2018/12/15/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A815.html">
                思路探讨(十五) 中产阶层的天花板
                <small>15 Dec 2018</small>
              </a>
            </h3>
          </li>
        

        
  </ul>
</div>




<!--PC和WAP自适应版-->
<div id="SOHUCS" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cys17tiy3'; 
var conf = 'prod_3b20e80a06c760385d4781c30f8ebf5c'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) {
var head = document.getElementsByTagName('head')[0]||document.head||document.documentElement;
var script = document.createElement('script');
script.type = 'text/javascript';
script.charset = 'utf-8';
script.id = 'changyan_mobile_js';
script.src = 'https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf;
head.appendChild(script);
} else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>




<script type="text/javascript">
	if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent))
    { //移动端
        /*mobile-悬浮20:3*/
    	var cpro_id = "u3495898";
		document.write("\<script type=\"text\/javascript\" src=\"//cpro.baidustatic.com/cpro/ui/cm.js\"\>\<\/script\>");
    }
    else
    {
        /*500*200-1*/
        var cpro_id = "u3486033";
        document.write("\<script type=\"text/javascript\" src=\"//cpro.baidustatic.com/cpro/ui/c.js\"\>\<\/script\>");
	}
</script>
 



    </div>

    
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?f3d58556a7396e715b3602ef6754cd91";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


    <script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

  </body>
  
</html>
