{
    "version": "https://jsonfeed.org/version/1",
    "title": "技术人生",
    "home_page_url": "http://www.luzexi.com/",
    "feed_url": "http://www.luzexi.com/feed.json",
    "description": "技术，哲学，金融",
    "icon": "http://www.luzexi.com/apple-touch-icon.png",
    "favicon": "http://www.luzexi.com/favicon.ico",
    "expired": false,
    
    "author":  {
        "name": "Jesse Lu",
        "url": "http://www.luzexi.com",
        "avatar": null
    },
    
"items": [
    
        {
            "id": "http://www.luzexi.com/2020/12/27/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B018",
            "title": "读书笔记(十八) 《C++性能优化指南》三",
            "summary": "读书 书 看书 读后感",
            "content_text": "此篇主要介绍热点代码、I/O、以及并行部分的优化，我们会从原理出发来，再根据原理讲优化，这样即学习了原理，又知道了优化的来龙去脉。热点代码这里作者带我们聊一聊关于代码细节的优化，虽然语句的细节优化并不能带来非常明显的提升，但是也是非常有必要的优化步骤，尤其在那些追求极致高性能或精小的组件中，代码细节的优化决定了组件与组件之间的差异。语句细节的优化，其实质是对CPU指令的优化，可以认为是从执行指令流中移除指令的过程。下面先来阐述一下细节优化的原理。语句的细节优化，其实质是执行指令数量的优化，指令跳转次数的优化，向栈中保存临时寄存器次数的优化，以及内存分配次数的优化。执行指令数量减少了可以减少CPU在执行程序时的耗时我们很好理解，指令跳转则是因为指令也是被放在内存中的数据，因此它也会被高速缓存cache，长距离跳转会让高速缓存失效，静态函数调用和非成员函数调用通常都是长距离指令跳转的典型案例。函数调用开销不可忽视，即使一个空函数，在调用时也会有性能开销（编译器可能会帮我们优化掉空函数），有时为了极致的优化，我们应该最大限度的减少调用函数的频率，特别是频率最高的top3。因为在函数被调用时会保存当前函数的数据，包括参数、局部变量、当前指令地址、临时寄存器和标记寄存器等，每次调用一个函数会做如下处理：\t1.当调用函数时，先保存当前函数的临时变量、参数、临时寄存器、标记寄存器。\t\t2.将这些每个要保存的数据都复制到栈中。\t\t3.当前执行的地址复制到栈中。\t4.将指令指针寄存器IP指向要执行的函数体的第一句\t5.执行函数体中的指令\t6.将函数调用结果保存到寄存器\t7.从栈中推出要返回的地址，并复制给指令寄存器IP\t8.推出栈中的临时寄存器、参数、局部变量、标记寄存器都重新还原回去\t9.继续执行剩下的指令直到遇到下一个函数。如果遇到成员函数是虚函数的，还得先从虚表中偏移并取出函数地址再调用，这里又多了2次计算，即先取出虚表地址、再根据虚表地址偏移获得真正的函数地址、最后再才能跳转过去。如果是多重继承、或者是多重继承的继承类中的虚函数成员，则需要再加一次地址偏移计算。inline内联是减少函数调用的最佳方式，内联函数并不像一般函数那样会保存数据并且跳转指令，因为编译器会就地展开内联函数中的指令，因此没有推栈入栈保存数据到栈和跳转指令到函数再返回的步骤，取而代之的是就地直接执行指令。这样看来减少函数调用(或让函数内联)的同时也减少了入栈、出栈、复制数据的指令数量，也减少了指令跳转的丢失高速缓存的概率。不必要的内存分配也是在代码细节中常犯的错误，尤其指向堆内存分配，当函数中需要某个容器或者类实例时，常会临时向堆内存申请一次以用来计算。我们来看看以上这说的4个细节的具体例子：for(int i = 0 ; i&lt;strlen(str) ; i++)\t...//改为for(int i = 0, n = strlen(str) ; i&lt;n ; i++)\t...这里不一定有优化，因为编译器可能会识别这类循环并将实时计算移出去，不过不能保证编译器一定会这么干，所以我们最好做人为的优化，保证不重复计算。void function(){\tlist = new list();\tfor(int i = 0 ; i&lt;n ; i++)\t{\t\tlist.Add(xx);\t}\treturn;}//改为public static list = new list(); //改为全局变量void function(){\tlist.Clear();\tfor(int i = 0 ; i&lt;n ; i++)\t{\t\tlist.Add(xx);\t}\treturn;}函数中临时的堆内存分配，改为全局的共用内存，只要分配一次，每次使用前先清理就能节省开销。int k = 0;for(int i = 0 ; i&lt;100 ; i++){\tint j = sin(100) + cos(50);\tk = j*i;}//改为int k = 0;int j = sin(100) + cos(5);for(int i = 0 ; i&lt;100 ; i++){\tk = j*i;}移除循环中不变的计算，减少不必要的指令，可能会被编译器优化掉。for(int i = 0 ; i&lt;10 ; i++){\tint b = Add(3,5);\t...}//改为int b = 0for(int i = 0 ; i&lt;10 ; i++){\tb = 3 + 5;\t...}//或者将Add函数内联inline int Add(a,b){\t...}用内联或者手动内联的方式，减少循环中的函数调用开销。string str = \"a\";str = \"&lt;p&gt;\" + str + \"&lt;/p&gt;\";//改为str = string.format(\"&lt;p&gt;{0}&lt;/p&gt;\",str);//或者str = StringCacheMgr.instance.Format(\"&lt;p&gt;{0}&lt;/p&gt;\",str);减少字符串内存分配次数，将原来要分配两次的字符串，改为只要分配1次。或者使用自制的字符串内存管理方式管理分配和操作字符串(前面的内存优化那一节我们讲过这种方式)for(int i = 0 ; i&lt;1000 ; i++){\ttest();}//改为test();void test(){\tfor(int i = 0 ; i&lt;1000 ;i++)\t{\t\t...\t}}将1000次调用函数的开销改为1次，节省函数调用的开销。if(x == a){\t...}else if(xx == a){\t...}else if(xxx == a){\t...}else ...//改为switch(a){\tcase x:\t\tbreak;\tcase xx:\t\tbreak;\tcase xxx:\t\tbreak;}通常switch都会被编译器优化为索引的方式去跳转，因此用switch比if效率高的多，也不用我们自己对数据排序。最后说下异常try catch的开销，在早期C++的try catch机制会在栈帧上包含一个异常上下文，这些上下文会随着异常抛出或者作用范围结束而销毁，增加性能开销。现在则不同了，开销没有开销，只是会在开始try时多几个指令更改中断程序的指向，退出时再改回来。如果太多try catch的调用仍然会多出很多额外的消耗。我们做个小结，我们说语句的细节优化，实质是减少执行指令数量，减少指令跳转次数，减少函数调用，以及减少内存分配次数。我们用代码细节来解释有哪些细节是可以遵从我们的原理来优化的，这些细节的优化，在性能要求比较高的组件上会比较有用，好的代码细节是业务逻辑优化的前提。业务逻辑上，当我们更多运用的是调整实现方式，调整数据结构的方式，调整业务逻辑策略的方式时，这些细节的优化则成了底层的支柱。I/OI/O操作的优化空间相对比较小，是因为它主要的工作大部分由操作系统完成。因此我们先介绍下操作系统中I/O的读写原理，再从原理出发优化I/O操作效率，包括降低读写次数减少读取时间和优化体验俩个方面。操作系统中为了分割操作内容让调用更安全，分为‘用户态’和‘内核态’，当用户态需要内核态工作时我们称为‘系统调用’，我们平常写的程序只要不涉及系统调用的都是用户态完成的，一旦涉及到需要操作系统工作的部分，就要先切到内核态完成工作，结束后再切回用户态继续执行后面的程序，这个切换的过程是比较费时费力的，I/O调用就是其中一种需要切换内核态的系统调用。操作系统可以支持多种底层不同的文件系统（比如NTFS, FAT, ext3, ext4），为了给内核和用户进程提供统一的文件系统视图，Linux在用户进程和底层文件系统之间加入了一个抽象层，即虚拟文件系统(Virtual File System, VFS)，进程所有的文件操作都通过VFS，由VFS来适配各种底层不同的文件系统，完成实际的文件操作。这里我们来了解下虚拟文件系统构成和主要模块：超级块（super_block）用于保存一个文件系统的所有元数据，相当于这个文件系统的信息库，为其他的模块提供信息。因此一个超级块可代表一个文件系统，文件系统的任意元数据修改都要通过超级块修改，超级块对象是常驻内存并被缓存起来的。目录项模块是管理路径的目录项，比如一个路径 /home/foo/hello.txt，那么目录项有home, foo, hello.txt三个。每个目录项的块，存储的是这个目录下的所有的文件的inode号和文件名等信息。其内部是树形结构，操作系统检索一个文件是从根目录开始，按层次解析路径中的所有目录，直到定位到具体文件。inode模块管理的是一个具体的文件，是文件的唯一标识，一个文件对应一个inode。通过inode可以方便的找到文件在磁盘扇区的位置，同时inode模块可链接到address_space模块，方便查找自身文件数据是否已经被缓存在内存中。打开文件列表模块包含所有内核已经打开的文件，已经打开的文件对象由open系统调用在内核中创建，也叫文件句柄。打开文件列表模块中包含一个列表，列表表项是一个结构体struct file，结构体中的信息存储了打开的一个文件的各种状态参数。file_operations模块模块中维护一个数据结构，是一系列函数指针的集合，其中包含所有可以使用的系统调用函数，例如open、read、write、mmap等。每个打开文件（打开文件列表模块的一个表项）都可以连接到file_operations模块，从而对任何已打开的文件，通过系统调用函数，实现各种操作。address_space模块记录了文件在页缓存中已经缓存了的物理页信息，是页缓存和外部设备中文件系统的桥梁。如果将文件系统可以理解成数据源，内存中的页缓存是已经读取的内容，那么address_space可以说是内存系统和文件系统的中间层。所有文件信息保存在超级块中，通过目录项模块找到文件所在位置，所有被打开的文件放在文件列表模块中，file_operations模块负责操作文件，每个文件都有唯一标识inode，磁盘数据与内存缓存通过address_space联接与映射。下面我们来看看读写入文件时的基本流程：读文件1、进程调用库函数向内核发起读文件请求；2、内核通过检查进程的文件描述符定位到虚拟文件系统的已打开文件列表表项；3、调用该文件可用的系统调用函数read()read()函数通过文件表项链接到目录项模块，根据传入的文件路径，在目录项模块中检索，找到该文件的inode；4、在inode中，通过文件内容偏移量计算出要读取的页；5、通过inode找到文件对应的address_space；6、在address_space中访问该文件的页缓存树，查找对应的页缓存结点：（1）如果页缓存命中，那么直接返回文件内容；（2）如果页缓存缺失，那么产生一个页缺失异常，创建一个页缓存页，同时通过inode找到文件该页的磁盘地址，读取相应的页填充该缓存页；重新进行第6步查找页缓存；7、文件内容读取成功。写文件前5步和读文件一致，在address_space中查询对应页的页缓存是否存在：6、如果页缓存命中，直接把文件内容修改更新在页缓存的页中。写文件就结束了。这时候文件修改位于页缓存，并没有写回到磁盘文件中去。7、如果页缓存缺失，那么产生一个页缺失异常，创建一个页缓存页，同时通过inode找到文件该页的磁盘地址，读取相应的页填充该缓存页。此时缓存页命中，进行第6步。8、一个页缓存中的页如果被修改，那么会被标记成脏页。脏页需要写回到磁盘中的文件块。有两种方式可以把脏页写回磁盘：（1）手动调用sync()或者fsync()系统调用把脏页写回（2）pdflush进程会定时把脏页写回到磁盘同时注意，脏页不能被置换出内存，如果脏页正在被写回，那么会被设置写回标记，这时候该页就被上锁，其他写请求被阻塞直到锁释放。页缓存实际上就是一个基数树结构，它将一个文件的内容组织起来存放在struct page结构中，文件越大树形结构越庞大，每一页都记录着文件内容的页信息和缓存信息。另外内核使用task_struct来表示单个进程的描述符，其中包含维护一个进程的所有信息。task_struct结构体中维护了一个 files的指针（和“已打开文件列表”上的表项是不同的指针）来指向结构体files_struct，files_struct中包含文件描述符表和打开的文件对象信息，这使得系统能够：1、多个进程可以同时指向一个打开文件对象（文件列表表项）。2、一个进程可以多次打开一个文件，生成不同的文件描述符，每个文件描述符指向不同的文件列表表项。但是由于是同一个文件，inode唯一，所以这些文件列表表项都指向同一个inode。我们知道了文件的读写原理再来看看我们在平时编写文件操作时的优化思路。1.减少读写次数，减少读写时间。由于每次读取文件内容都会从用户态转到内核态，完成后再切回来，这种切换的消耗是比较重的，因此我们应该尽量减少读写次数。在读取一个文件时，尽量将需要的内容一次性读取完毕，甚至可以预先读取未来的内容，以避免多次读取。在写文件时也是同样，尽量一次性写入硬盘，避免多次写入。例如下面代码：while(getline(file,line)){\tdoSomeThing(line);}//改为lines = getlines(file);for(int i = 0 ,n = len(lines) ; i&lt; n ; ++i){\tdoSomeThing(lines[i]);}一次性读取所有行，再对每行做处理。void write_lines(std::ostream&amp; file std::string const&amp; lines[]){\tfor(int i = 0,n = len(lines) ; i&lt;n ; ++i)\t{\t\tfile &lt;&lt; lines[i]\t\tfile-&gt;flush();\t}}//改为void write_lines(std::ostream&amp; file std::string const&amp; lines[]){\tfor(int i = 0,n = len(lines) ; i&lt;n ; ++i)\t{\t\tfile &lt;&lt; lines[i];\t}\tfile-&gt;flush();}//或用内存池的方式改为void write_lines(std::ostream&amp; file std::string const&amp; lines[]){\tint str_size = 0;\tfor(int i = 0,n = len(lines) ; i&lt;n ; ++i)\t{\t\tstr_size += len(lines[i] + 1)*sizeof(char);\t}\t\tbyte[] data = MemoryPool.instance.AllocMemory(str_size);\tCombineStringData(lines, data); //将lines中的数据都拷贝到data中\tfile-&gt;write(data);\tfile-&gt;flush();\tMemoryPool.instance.Free(data);}每次写入文件时系统并不会立即写入文件，而是存放在页缓存，如果我们每次刷新，则会每次都同步到硬盘，写入硬盘速度比较内存慢很多，会消耗比较长时间，所以要减少刷新调用次数。只是减少刷新次数，但依然减少不了内核态切换的次数。于是我们用内存池的方式减少内存分配的时间，将内存分配的耗时降低，将原本要调用很多次系统调用的次数降低为了一次，从而减少了内核态切换的次数。2.优化体验用阻塞读取的方式，由于线程要等待磁盘设备的工作，对于整个程序的效率来说是比较低的，因为硬盘设备读写的速度比较慢，主线程要等待硬盘设备工作完毕后才进行后面的工作。因此为了能让程序的整体效率提升，我们可以用异步读取的方式来优化整体的程序时间，即在读取或写入文件的同时，其他程序工作同步进行。最常见的是游戏的开机画面，加载画面，切换场景画面，甚至有些游戏中边加载边进行的部分，都是可以通过并行来优化体验的。文件读写并发通常都是开启线程后的读写操作，与阻塞内容一样，只是更多的利用可利用的CPU时间而不让线程空闲等待硬盘，原理是我们尽力能让计算机中的所有设备资源都满负荷运转并很好的协作，而不是相互牵制。下面我们就来讲讲并发的优化内容。并发并发的方案有很多特别是在业务层上有很多技巧，这里只是选取与语言相关部分。我们将从原理出发讲一讲，线程同步中的技巧、原子性、以及无锁容器的原理。由于设备资源并不总是运行，因为我们的程序并没有使用到这些资源，或者说有时没有同一时间同时让它们一起运转，这使得资源的闲置造成了浪费，如果能在当某个程序在执行指令时，另一个设备在满负荷运作，这样就相当于提高了运行效率。并发的挑战是找到足够多的独立任务来充分地使用所有可用的计算机资源，让资源都能满负荷的执行，提高整体运行效率。其中CPU资源是最稀缺，也是使用最频繁的资源，如果能让多核中所有CPU都满负荷工作(不考虑降频问题)程序的效率就能提高很多，即使不满负荷，也能提其他CPU分担不少工作，让降频的概率减少到最低。首先我们来梳理下操作系统中的进程、线程、时间片的概念。线程是实际工作的单元，进程只是一个容器用来管理线程。严格来说Linux内核其实不区分进程和线程，内核把执行单元叫做任务(Task)。操作系统实际上调度的是进程，进程通过fork()来创建同样的另一个进程。每个进程有一个PID，同一组进程中最先启动的那个还有一个TGID，严格来说前者应该叫线程ID，后者应该叫进程ID，其实它们都是Linux的Task。多线程能同时做好几件事情以提高效率，但实际问题是，CPU的数量（核心数）是有限的，而且并不多。如果你的CPU有8个核，并且整个操作系统中有8个线程的话，不考虑中断等因素，每个线程理论上能一直执行下去。然而多于8个线程以后，操作系统就必须进行调度，也就是分配时间片。具体的分配方案，或者说调度算法有很多种。如果一个进程创建了很多线程的话，最多也只有8个能够处于执行的状态(这里说的是物理线程，有别于逻辑线程)，其余的线程必须等待调度。线程被调度的时候需要进行上下文切换，这个操作是一种额外的开销。当线程数量过多的时候，上下文切换产生的额外开销会对系统的效率造成负面影响。线程的调度算法和进程一样通常有优先级之分，优先级高的线程可以比优先级低的线程多抢占些CPU时间片。甚至不同的线程可以通过系统调用将线程绑定在某个CPU核上。线程同步通常我们在多个线程交叉执行时最关心的是同步问题。解决这个问题我们可以用，减少锁的占用时间、减少锁的颗粒度、无锁容器三个方式。前两者更好理解些，也用的比较多，最后一个需要阐明下原理。通常我们使用锁和互斥量来解决线程间的同步问题，但这会带来潜在问题，就是由于锁的原因导致线程间的等待时间变长，实际执行的效率可能并没有因此而增加。因此锁的范围必须被压缩到最小，例如：void doFunction(item){\tlock(obj)\t{\t\tdoSomeThing1();\t\tlist.push(item); //must lock\t\tdoSomeThing2();\t}}//改为void doFunction(item){\tdoSomeThing1();\tlock(obj)\t{\t\tlist.push(item); //must lock\t}\tdoSomeThing2();}尽可能的缩小锁的范围，减少锁等待时间。void doFunction1(){\tlock(obj)\t{\t\t...\t}}void doFunction2(){\tlock(obj)\t{\t\t...\t}}//改为void doFunction1(){\tlock(obj1)\t{\t\t...\t}}void doFunction2(){\tlock(obj2)\t{\t\t...\t}}减少锁的颗粒度，让各自的锁只负责自己一小部分的内容。这里也涉及到细粒度锁(算法)，它通常基于轻量级原子性原语，由于并不是基于系统提供的同步原语所以性能开销很小，但在高并发的情况下，细粒度锁(算法)就会成为程序的瓶颈。由于指定锁某些局部的计算范围或者函数，锁的时间太长并不划算，所以我们通常在两个线程间的协作上使用消息队列(或者其他容器)让线程更大程度的并行，但这依然需要对容器加锁，以使得操作不冲突。为了能让容器冲突时间更小，当只有两个线程操作容器时，我们通常会采用些技巧。      例如双队列，设置两个队列，其中一个用于处理消息，另一个用于接收消息，当处理消息时，两个队列的头指针交换一下再处理，这样就能让接收的队列继续接收，处理的队列独自处理，这种方式的缩短了锁的占用时间，锁的时间缩短到了变量交换时间。        以及循环队列的方式，用头尾循环的方式做队列，一个线程只对尾部操作，另一个线程只对头部操作，发送数据的线程向尾部推入数据，接收数据的线程从头部取出数据，循环操作队列，只有当队列满时才需要停一停等待数据处理，其他时候，两者永远都不需要相互等待。  无锁容器无锁容器的复杂度有点高，它适用于高并发场景，这里不便深入，其原理是原子操作。虽然我们不深入无锁容器的具体写法，但我们用问答的方式来解释下原子操作。什么是原子性？如果一个更新操作不会计算到一半的时候被另外一个线程看到，就叫原子性。原子操作可认为是一个不可分的操作；要么发生，要么没发生，我们看不到任何执行的中间过程，不存在部分结果(partial effects)。可以想象的到，原子操作要保证要么全部发生，要么全部没发生，这样原子操作绝对不是一个廉价的消耗低的指令，相反，原子操作是一个较为昂贵的指令。非原子操作，为什么会更新到一半被另一个线程看到？即使一个简单的整型变量的赋值操作，也有可能更新到一半被另一个线程看到，这是为什么呢？原因就是高速缓存中的旧数据。由于每个cpu除了共享一个内存设备外还有各自的高速缓存，一个cpu更新了内存中的内容后，其实并没有通知其他cpu中的缓存去掉该内容，这导致其他cpu中的高速缓存存储的仍然是旧的数据。当这些CPU读取这个变量时会从缓存中取得旧数据，直到缓存中的这个数据被丢弃或更新。原子操作，做了什么使得更新不被其他线程看到？CPU的高速缓存间有一个MESI协议(cache一致性协议，4个关键词 Modifed Exclusive Shared Invalid 拼凑起来的缩写)，通过这个消息协议，CPU可以查看其他CPU高速缓存中的数据状态，就像不同设备间通信那样。当执行原子操作 store 即写入数据时，先查看当前cpu高速缓存中有没有数据，如果没有，则通知其他cpu中的高速缓存该数据切为无效状态，等待所有cpu都将该数据切为无效状态后，此cpu才开始发起写入内存和高速缓存的操作，并标记该值为修改状态。如果有，则更新高速缓存中的值，并通知其他cpu中的高速缓存该值已经不合法，最后此cpu并没有将该值写入内存，而是在高速缓存中标记该值被修改，以便下次再利用，或者等到丢弃时再写入内存。当执行原子操作 load 即读取数据时，先查看当前cpu高速缓存中有没有该数据，如果没有(或者是无效的)，则从先从查看其他cpu中查看该数据，如果有则获取，没有则从内存中获取。如果当前cpu高速缓存中有该数据，则直接使用该数据(必须不是无效的)。其他并行优化1.分割资源，减少线程间的争夺。分割或者复制一块内存出来，让某个线程专门使用，这样就不会与其他线程冲突，计算结束时再考虑合并的事。此方法在Unity引擎的 Job System中有使用到，即给Job System一块独立的内存来处理自己的事物，与其他线程不冲突。2.散列容器，减少锁的范围，和前面介绍的细粒度锁(算法）稍微有点不一样，这种容器是散列的，冲突更少但使用范围很小。3.SIMD指令虽然不是并行，但由于它可以同时处理4个数据的运算，也算是勉强算并行处理了。参考资料：《从内核文件系统看文件读写过程》《Linux系统中 进程 、线程 、时间片的关系》《说说无锁(Lock-Free)编程那些事》",
            "content_html": "<p>此篇主要介绍热点代码、I/O、以及并行部分的优化，我们会从原理出发来，再根据原理讲优化，这样即学习了原理，又知道了优化的来龙去脉。</p><h2 id=\"热点代码\">热点代码</h2><p>这里作者带我们聊一聊关于代码细节的优化，虽然语句的细节优化并不能带来非常明显的提升，但是也是非常有必要的优化步骤，尤其在那些追求极致高性能或精小的组件中，代码细节的优化决定了组件与组件之间的差异。</p><p>语句细节的优化，其实质是对CPU指令的优化，可以认为是从执行指令流中移除指令的过程。下面先来阐述一下细节优化的原理。</p><h3 id=\"语句的细节优化其实质是执行指令数量的优化指令跳转次数的优化向栈中保存临时寄存器次数的优化以及内存分配次数的优化\">语句的细节优化，其实质是执行指令数量的优化，指令跳转次数的优化，向栈中保存临时寄存器次数的优化，以及内存分配次数的优化。</h3><p>执行指令数量减少了可以减少CPU在执行程序时的耗时我们很好理解，指令跳转则是因为指令也是被放在内存中的数据，因此它也会被高速缓存cache，长距离跳转会让高速缓存失效，静态函数调用和非成员函数调用通常都是长距离指令跳转的典型案例。</p><p>函数调用开销不可忽视，即使一个空函数，在调用时也会有性能开销（编译器可能会帮我们优化掉空函数），有时为了极致的优化，我们应该最大限度的减少调用函数的频率，特别是频率最高的top3。</p><p>因为在函数被调用时会保存当前函数的数据，包括参数、局部变量、当前指令地址、临时寄存器和标记寄存器等，每次调用一个函数会做如下处理：</p><pre><code>\t1.当调用函数时，先保存当前函数的临时变量、参数、临时寄存器、标记寄存器。\t\t2.将这些每个要保存的数据都复制到栈中。\t\t3.当前执行的地址复制到栈中。\t4.将指令指针寄存器IP指向要执行的函数体的第一句\t5.执行函数体中的指令\t6.将函数调用结果保存到寄存器\t7.从栈中推出要返回的地址，并复制给指令寄存器IP\t8.推出栈中的临时寄存器、参数、局部变量、标记寄存器都重新还原回去\t9.继续执行剩下的指令直到遇到下一个函数。</code></pre><p>如果遇到成员函数是虚函数的，还得先从虚表中偏移并取出函数地址再调用，这里又多了2次计算，即先取出虚表地址、再根据虚表地址偏移获得真正的函数地址、最后再才能跳转过去。如果是多重继承、或者是多重继承的继承类中的虚函数成员，则需要再加一次地址偏移计算。</p><p>inline内联是减少函数调用的最佳方式，内联函数并不像一般函数那样会保存数据并且跳转指令，因为编译器会就地展开内联函数中的指令，因此没有推栈入栈保存数据到栈和跳转指令到函数再返回的步骤，取而代之的是就地直接执行指令。</p><p>这样看来减少函数调用(或让函数内联)的同时也减少了入栈、出栈、复制数据的指令数量，也减少了指令跳转的丢失高速缓存的概率。</p><p>不必要的内存分配也是在代码细节中常犯的错误，尤其指向堆内存分配，当函数中需要某个容器或者类实例时，常会临时向堆内存申请一次以用来计算。</p><p>我们来看看以上这说的4个细节的具体例子：</p><pre><code class=\"language-c++\">for(int i = 0 ; i&lt;strlen(str) ; i++)\t...//改为for(int i = 0, n = strlen(str) ; i&lt;n ; i++)\t...</code></pre><h4 id=\"这里不一定有优化因为编译器可能会识别这类循环并将实时计算移出去不过不能保证编译器一定会这么干所以我们最好做人为的优化保证不重复计算\">这里不一定有优化，因为编译器可能会识别这类循环并将实时计算移出去，不过不能保证编译器一定会这么干，所以我们最好做人为的优化，保证不重复计算。</h4><pre><code class=\"language-c++\">void function(){\tlist = new list();\tfor(int i = 0 ; i&lt;n ; i++)\t{\t\tlist.Add(xx);\t}\treturn;}//改为public static list = new list(); //改为全局变量void function(){\tlist.Clear();\tfor(int i = 0 ; i&lt;n ; i++)\t{\t\tlist.Add(xx);\t}\treturn;}</code></pre><h4 id=\"函数中临时的堆内存分配改为全局的共用内存只要分配一次每次使用前先清理就能节省开销\">函数中临时的堆内存分配，改为全局的共用内存，只要分配一次，每次使用前先清理就能节省开销。</h4><pre><code class=\"language-c++\">int k = 0;for(int i = 0 ; i&lt;100 ; i++){\tint j = sin(100) + cos(50);\tk = j*i;}//改为int k = 0;int j = sin(100) + cos(5);for(int i = 0 ; i&lt;100 ; i++){\tk = j*i;}</code></pre><h4 id=\"移除循环中不变的计算减少不必要的指令可能会被编译器优化掉\">移除循环中不变的计算，减少不必要的指令，可能会被编译器优化掉。</h4><pre><code class=\"language-c++\">for(int i = 0 ; i&lt;10 ; i++){\tint b = Add(3,5);\t...}//改为int b = 0for(int i = 0 ; i&lt;10 ; i++){\tb = 3 + 5;\t...}//或者将Add函数内联inline int Add(a,b){\t...}</code></pre><h4 id=\"用内联或者手动内联的方式减少循环中的函数调用开销\">用内联或者手动内联的方式，减少循环中的函数调用开销。</h4><pre><code class=\"language-c++\">string str = \"a\";str = \"&lt;p&gt;\" + str + \"&lt;/p&gt;\";//改为str = string.format(\"&lt;p&gt;{0}&lt;/p&gt;\",str);//或者str = StringCacheMgr.instance.Format(\"&lt;p&gt;{0}&lt;/p&gt;\",str);</code></pre><h4 id=\"减少字符串内存分配次数将原来要分配两次的字符串改为只要分配1次\">减少字符串内存分配次数，将原来要分配两次的字符串，改为只要分配1次。</h4><h3 id=\"或者使用自制的字符串内存管理方式管理分配和操作字符串前面的内存优化那一节我们讲过这种方式\">或者使用自制的字符串内存管理方式管理分配和操作字符串(前面的内存优化那一节我们讲过这种方式)</h3><pre><code class=\"language-c++\">for(int i = 0 ; i&lt;1000 ; i++){\ttest();}//改为test();void test(){\tfor(int i = 0 ; i&lt;1000 ;i++)\t{\t\t...\t}}</code></pre><h4 id=\"将1000次调用函数的开销改为1次节省函数调用的开销\">将1000次调用函数的开销改为1次，节省函数调用的开销。</h4><pre><code class=\"language-c++\">if(x == a){\t...}else if(xx == a){\t...}else if(xxx == a){\t...}else ...//改为switch(a){\tcase x:\t\tbreak;\tcase xx:\t\tbreak;\tcase xxx:\t\tbreak;}</code></pre><h4 id=\"通常switch都会被编译器优化为索引的方式去跳转因此用switch比if效率高的多也不用我们自己对数据排序\">通常switch都会被编译器优化为索引的方式去跳转，因此用switch比if效率高的多，也不用我们自己对数据排序。</h4><p>最后说下异常try catch的开销，在早期C++的try catch机制会在栈帧上包含一个异常上下文，这些上下文会随着异常抛出或者作用范围结束而销毁，增加性能开销。现在则不同了，开销没有开销，只是会在开始try时多几个指令更改中断程序的指向，退出时再改回来。如果太多try catch的调用仍然会多出很多额外的消耗。</p><h3 id=\"我们做个小结我们说语句的细节优化实质是减少执行指令数量减少指令跳转次数减少函数调用以及减少内存分配次数我们用代码细节来解释有哪些细节是可以遵从我们的原理来优化的这些细节的优化在性能要求比较高的组件上会比较有用好的代码细节是业务逻辑优化的前提业务逻辑上当我们更多运用的是调整实现方式调整数据结构的方式调整业务逻辑策略的方式时这些细节的优化则成了底层的支柱\">我们做个小结，我们说语句的细节优化，实质是减少执行指令数量，减少指令跳转次数，减少函数调用，以及减少内存分配次数。我们用代码细节来解释有哪些细节是可以遵从我们的原理来优化的，这些细节的优化，在性能要求比较高的组件上会比较有用，好的代码细节是业务逻辑优化的前提。业务逻辑上，当我们更多运用的是调整实现方式，调整数据结构的方式，调整业务逻辑策略的方式时，这些细节的优化则成了底层的支柱。</h3><h2 id=\"io\">I/O</h2><h3 id=\"io操作的优化空间相对比较小是因为它主要的工作大部分由操作系统完成因此我们先介绍下操作系统中io的读写原理再从原理出发优化io操作效率包括降低读写次数减少读取时间和优化体验俩个方面\">I/O操作的优化空间相对比较小，是因为它主要的工作大部分由操作系统完成。因此我们先介绍下操作系统中I/O的读写原理，再从原理出发优化I/O操作效率，包括降低读写次数减少读取时间和优化体验俩个方面。</h3><p>操作系统中为了分割操作内容让调用更安全，分为‘用户态’和‘内核态’，当用户态需要内核态工作时我们称为‘系统调用’，我们平常写的程序只要不涉及系统调用的都是用户态完成的，一旦涉及到需要操作系统工作的部分，就要先切到内核态完成工作，结束后再切回用户态继续执行后面的程序，这个切换的过程是比较费时费力的，I/O调用就是其中一种需要切换内核态的系统调用。</p><p>操作系统可以支持多种底层不同的文件系统（比如NTFS, FAT, ext3, ext4），为了给内核和用户进程提供统一的文件系统视图，Linux在用户进程和底层文件系统之间加入了一个抽象层，即虚拟文件系统(Virtual File System, VFS)，进程所有的文件操作都通过VFS，由VFS来适配各种底层不同的文件系统，完成实际的文件操作。</p><h3 id=\"这里我们来了解下虚拟文件系统构成和主要模块\">这里我们来了解下虚拟文件系统构成和主要模块：</h3><h3 id=\"超级块super_block\">超级块（super_block）</h3><p>用于保存一个文件系统的所有元数据，相当于这个文件系统的信息库，为其他的模块提供信息。</p><p>因此一个超级块可代表一个文件系统，文件系统的任意元数据修改都要通过超级块修改，超级块对象是常驻内存并被缓存起来的。</p><h3 id=\"目录项模块\">目录项模块</h3><p>是管理路径的目录项，比如一个路径 /home/foo/hello.txt，那么目录项有home, foo, hello.txt三个。</p><p>每个目录项的块，存储的是这个目录下的所有的文件的inode号和文件名等信息。其内部是树形结构，操作系统检索一个文件是从根目录开始，按层次解析路径中的所有目录，直到定位到具体文件。</p><h3 id=\"inode模块\">inode模块</h3><p>管理的是一个具体的文件，是文件的唯一标识，一个文件对应一个inode。</p><p>通过inode可以方便的找到文件在磁盘扇区的位置，同时inode模块可链接到address_space模块，方便查找自身文件数据是否已经被缓存在内存中。</p><h3 id=\"打开文件列表模块\">打开文件列表模块</h3><p>包含所有内核已经打开的文件，已经打开的文件对象由open系统调用在内核中创建，也叫文件句柄。</p><p>打开文件列表模块中包含一个列表，列表表项是一个结构体struct file，结构体中的信息存储了打开的一个文件的各种状态参数。</p><h3 id=\"file_operations模块\">file_operations模块</h3><p>模块中维护一个数据结构，是一系列函数指针的集合，其中包含所有可以使用的系统调用函数，例如open、read、write、mmap等。</p><p>每个打开文件（打开文件列表模块的一个表项）都可以连接到file_operations模块，从而对任何已打开的文件，通过系统调用函数，实现各种操作。</p><h3 id=\"address_space模块\">address_space模块</h3><p>记录了文件在页缓存中已经缓存了的物理页信息，是页缓存和外部设备中文件系统的桥梁。如果将文件系统可以理解成数据源，内存中的页缓存是已经读取的内容，那么address_space可以说是内存系统和文件系统的中间层。</p><h3 id=\"所有文件信息保存在超级块中通过目录项模块找到文件所在位置所有被打开的文件放在文件列表模块中file_operations模块负责操作文件每个文件都有唯一标识inode磁盘数据与内存缓存通过address_space联接与映射\">所有文件信息保存在超级块中，通过目录项模块找到文件所在位置，所有被打开的文件放在文件列表模块中，file_operations模块负责操作文件，每个文件都有唯一标识inode，磁盘数据与内存缓存通过address_space联接与映射。</h3><h3 id=\"下面我们来看看读写入文件时的基本流程\">下面我们来看看读写入文件时的基本流程：</h3><h3 id=\"读文件\">读文件</h3><p>1、进程调用库函数向内核发起读文件请求；</p><p>2、内核通过检查进程的文件描述符定位到虚拟文件系统的已打开文件列表表项；</p><p>3、调用该文件可用的系统调用函数read()</p><p>read()函数通过文件表项链接到目录项模块，根据传入的文件路径，在目录项模块中检索，找到该文件的inode；</p><p>4、在inode中，通过文件内容偏移量计算出要读取的页；</p><p>5、通过inode找到文件对应的address_space；</p><p>6、在address_space中访问该文件的页缓存树，查找对应的页缓存结点：</p><p>（1）如果页缓存命中，那么直接返回文件内容；</p><p>（2）如果页缓存缺失，那么产生一个页缺失异常，创建一个页缓存页，同时通过inode找到文件该页的磁盘地址，读取相应的页填充该缓存页；重新进行第6步查找页缓存；</p><p>7、文件内容读取成功。</p><h3 id=\"写文件\">写文件</h3><p>前5步和读文件一致，在address_space中查询对应页的页缓存是否存在：</p><p>6、如果页缓存命中，直接把文件内容修改更新在页缓存的页中。写文件就结束了。这时候文件修改位于页缓存，并没有写回到磁盘文件中去。</p><p>7、如果页缓存缺失，那么产生一个页缺失异常，创建一个页缓存页，同时通过inode找到文件该页的磁盘地址，读取相应的页填充该缓存页。此时缓存页命中，进行第6步。</p><p>8、一个页缓存中的页如果被修改，那么会被标记成脏页。脏页需要写回到磁盘中的文件块。有两种方式可以把脏页写回磁盘：</p><p>（1）手动调用sync()或者fsync()系统调用把脏页写回</p><p>（2）pdflush进程会定时把脏页写回到磁盘</p><p>同时注意，脏页不能被置换出内存，如果脏页正在被写回，那么会被设置写回标记，这时候该页就被上锁，其他写请求被阻塞直到锁释放。</p><h3 id=\"页缓存实际上就是一个基数树结构它将一个文件的内容组织起来存放在struct-page结构中文件越大树形结构越庞大每一页都记录着文件内容的页信息和缓存信息\">页缓存实际上就是一个基数树结构，它将一个文件的内容组织起来存放在struct page结构中，文件越大树形结构越庞大，每一页都记录着文件内容的页信息和缓存信息。</h3><p>另外内核使用task_struct来表示单个进程的描述符，其中包含维护一个进程的所有信息。task_struct结构体中维护了一个 files的指针（和“已打开文件列表”上的表项是不同的指针）来指向结构体files_struct，files_struct中包含文件描述符表和打开的文件对象信息，这使得系统能够：</p><p>1、多个进程可以同时指向一个打开文件对象（文件列表表项）。</p><p>2、一个进程可以多次打开一个文件，生成不同的文件描述符，每个文件描述符指向不同的文件列表表项。但是由于是同一个文件，inode唯一，所以这些文件列表表项都指向同一个inode。</p><h3 id=\"我们知道了文件的读写原理再来看看我们在平时编写文件操作时的优化思路\">我们知道了文件的读写原理再来看看我们在平时编写文件操作时的优化思路。</h3><p>1.减少读写次数，减少读写时间。</p><p>由于每次读取文件内容都会从用户态转到内核态，完成后再切回来，这种切换的消耗是比较重的，因此我们应该尽量减少读写次数。</p><p>在读取一个文件时，尽量将需要的内容一次性读取完毕，甚至可以预先读取未来的内容，以避免多次读取。在写文件时也是同样，尽量一次性写入硬盘，避免多次写入。例如下面代码：</p><pre><code class=\"language-c++\">while(getline(file,line)){\tdoSomeThing(line);}//改为lines = getlines(file);for(int i = 0 ,n = len(lines) ; i&lt; n ; ++i){\tdoSomeThing(lines[i]);}</code></pre><h3 id=\"一次性读取所有行再对每行做处理\">一次性读取所有行，再对每行做处理。</h3><pre><code class=\"language-c++\">void write_lines(std::ostream&amp; file std::string const&amp; lines[]){\tfor(int i = 0,n = len(lines) ; i&lt;n ; ++i)\t{\t\tfile &lt;&lt; lines[i]\t\tfile-&gt;flush();\t}}//改为void write_lines(std::ostream&amp; file std::string const&amp; lines[]){\tfor(int i = 0,n = len(lines) ; i&lt;n ; ++i)\t{\t\tfile &lt;&lt; lines[i];\t}\tfile-&gt;flush();}//或用内存池的方式改为void write_lines(std::ostream&amp; file std::string const&amp; lines[]){\tint str_size = 0;\tfor(int i = 0,n = len(lines) ; i&lt;n ; ++i)\t{\t\tstr_size += len(lines[i] + 1)*sizeof(char);\t}\t\tbyte[] data = MemoryPool.instance.AllocMemory(str_size);\tCombineStringData(lines, data); //将lines中的数据都拷贝到data中\tfile-&gt;write(data);\tfile-&gt;flush();\tMemoryPool.instance.Free(data);}</code></pre><h3 id=\"每次写入文件时系统并不会立即写入文件而是存放在页缓存如果我们每次刷新则会每次都同步到硬盘写入硬盘速度比较内存慢很多会消耗比较长时间所以要减少刷新调用次数\">每次写入文件时系统并不会立即写入文件，而是存放在页缓存，如果我们每次刷新，则会每次都同步到硬盘，写入硬盘速度比较内存慢很多，会消耗比较长时间，所以要减少刷新调用次数。</h3><h3 id=\"只是减少刷新次数但依然减少不了内核态切换的次数于是我们用内存池的方式减少内存分配的时间将内存分配的耗时降低将原本要调用很多次系统调用的次数降低为了一次从而减少了内核态切换的次数\">只是减少刷新次数，但依然减少不了内核态切换的次数。于是我们用内存池的方式减少内存分配的时间，将内存分配的耗时降低，将原本要调用很多次系统调用的次数降低为了一次，从而减少了内核态切换的次数。</h3><p>2.优化体验</p><p>用阻塞读取的方式，由于线程要等待磁盘设备的工作，对于整个程序的效率来说是比较低的，因为硬盘设备读写的速度比较慢，主线程要等待硬盘设备工作完毕后才进行后面的工作。因此为了能让程序的整体效率提升，我们可以用异步读取的方式来优化整体的程序时间，即在读取或写入文件的同时，其他程序工作同步进行。</p><p>最常见的是游戏的开机画面，加载画面，切换场景画面，甚至有些游戏中边加载边进行的部分，都是可以通过并行来优化体验的。</p><h3 id=\"文件读写并发通常都是开启线程后的读写操作与阻塞内容一样只是更多的利用可利用的cpu时间而不让线程空闲等待硬盘原理是我们尽力能让计算机中的所有设备资源都满负荷运转并很好的协作而不是相互牵制\">文件读写并发通常都是开启线程后的读写操作，与阻塞内容一样，只是更多的利用可利用的CPU时间而不让线程空闲等待硬盘，原理是我们尽力能让计算机中的所有设备资源都满负荷运转并很好的协作，而不是相互牵制。</h3><p>下面我们就来讲讲并发的优化内容。</p><h2 id=\"并发\">并发</h2><p>并发的方案有很多特别是在业务层上有很多技巧，这里只是选取与语言相关部分。我们将从原理出发讲一讲，线程同步中的技巧、原子性、以及无锁容器的原理。</p><p>由于设备资源并不总是运行，因为我们的程序并没有使用到这些资源，或者说有时没有同一时间同时让它们一起运转，这使得资源的闲置造成了浪费，如果能在当某个程序在执行指令时，另一个设备在满负荷运作，这样就相当于提高了运行效率。</p><h3 id=\"并发的挑战是找到足够多的独立任务来充分地使用所有可用的计算机资源让资源都能满负荷的执行提高整体运行效率其中cpu资源是最稀缺也是使用最频繁的资源如果能让多核中所有cpu都满负荷工作不考虑降频问题程序的效率就能提高很多即使不满负荷也能提其他cpu分担不少工作让降频的概率减少到最低\">并发的挑战是找到足够多的独立任务来充分地使用所有可用的计算机资源，让资源都能满负荷的执行，提高整体运行效率。其中CPU资源是最稀缺，也是使用最频繁的资源，如果能让多核中所有CPU都满负荷工作(不考虑降频问题)程序的效率就能提高很多，即使不满负荷，也能提其他CPU分担不少工作，让降频的概率减少到最低。</h3><p>首先我们来梳理下操作系统中的进程、线程、时间片的概念。</p><p>线程是实际工作的单元，进程只是一个容器用来管理线程。严格来说Linux内核其实不区分进程和线程，内核把执行单元叫做任务(Task)。操作系统实际上调度的是进程，进程通过fork()来创建同样的另一个进程。每个进程有一个PID，同一组进程中最先启动的那个还有一个TGID，严格来说前者应该叫线程ID，后者应该叫进程ID，其实它们都是Linux的Task。</p><p>多线程能同时做好几件事情以提高效率，但实际问题是，CPU的数量（核心数）是有限的，而且并不多。如果你的CPU有8个核，并且整个操作系统中有8个线程的话，不考虑中断等因素，每个线程理论上能一直执行下去。然而多于8个线程以后，操作系统就必须进行调度，也就是分配时间片。具体的分配方案，或者说调度算法有很多种。如果一个进程创建了很多线程的话，最多也只有8个能够处于执行的状态(这里说的是物理线程，有别于逻辑线程)，其余的线程必须等待调度。线程被调度的时候需要进行上下文切换，这个操作是一种额外的开销。当线程数量过多的时候，上下文切换产生的额外开销会对系统的效率造成负面影响。</p><p>线程的调度算法和进程一样通常有优先级之分，优先级高的线程可以比优先级低的线程多抢占些CPU时间片。甚至不同的线程可以通过系统调用将线程绑定在某个CPU核上。</p><h3 id=\"线程同步\">线程同步</h3><p>通常我们在多个线程交叉执行时最关心的是同步问题。解决这个问题我们可以用，减少锁的占用时间、减少锁的颗粒度、无锁容器三个方式。前两者更好理解些，也用的比较多，最后一个需要阐明下原理。</p><p>通常我们使用锁和互斥量来解决线程间的同步问题，但这会带来潜在问题，就是由于锁的原因导致线程间的等待时间变长，实际执行的效率可能并没有因此而增加。</p><p>因此锁的范围必须被压缩到最小，例如：</p><pre><code class=\"language-c++\">void doFunction(item){\tlock(obj)\t{\t\tdoSomeThing1();\t\tlist.push(item); //must lock\t\tdoSomeThing2();\t}}//改为void doFunction(item){\tdoSomeThing1();\tlock(obj)\t{\t\tlist.push(item); //must lock\t}\tdoSomeThing2();}</code></pre><h3 id=\"尽可能的缩小锁的范围减少锁等待时间\">尽可能的缩小锁的范围，减少锁等待时间。</h3><pre><code class=\"language-c++\">void doFunction1(){\tlock(obj)\t{\t\t...\t}}void doFunction2(){\tlock(obj)\t{\t\t...\t}}//改为void doFunction1(){\tlock(obj1)\t{\t\t...\t}}void doFunction2(){\tlock(obj2)\t{\t\t...\t}}</code></pre><h3 id=\"减少锁的颗粒度让各自的锁只负责自己一小部分的内容这里也涉及到细粒度锁算法它通常基于轻量级原子性原语由于并不是基于系统提供的同步原语所以性能开销很小但在高并发的情况下细粒度锁算法就会成为程序的瓶颈\">减少锁的颗粒度，让各自的锁只负责自己一小部分的内容。这里也涉及到细粒度锁(算法)，它通常基于轻量级原子性原语，由于并不是基于系统提供的同步原语所以性能开销很小，但在高并发的情况下，细粒度锁(算法)就会成为程序的瓶颈。</h3><p>由于指定锁某些局部的计算范围或者函数，锁的时间太长并不划算，所以我们通常在两个线程间的协作上使用消息队列(或者其他容器)让线程更大程度的并行，但这依然需要对容器加锁，以使得操作不冲突。</p><p>为了能让容器冲突时间更小，当只有两个线程操作容器时，我们通常会采用些技巧。</p><ul>  <li>    <p>例如双队列，设置两个队列，其中一个用于处理消息，另一个用于接收消息，当处理消息时，两个队列的头指针交换一下再处理，这样就能让接收的队列继续接收，处理的队列独自处理，这种方式的缩短了锁的占用时间，锁的时间缩短到了变量交换时间。</p>  </li>  <li>    <p>以及循环队列的方式，用头尾循环的方式做队列，一个线程只对尾部操作，另一个线程只对头部操作，发送数据的线程向尾部推入数据，接收数据的线程从头部取出数据，循环操作队列，只有当队列满时才需要停一停等待数据处理，其他时候，两者永远都不需要相互等待。</p>  </li></ul><h3 id=\"无锁容器\">无锁容器</h3><p>无锁容器的复杂度有点高，它适用于高并发场景，这里不便深入，其原理是原子操作。虽然我们不深入无锁容器的具体写法，但我们用问答的方式来解释下原子操作。</p><h3 id=\"什么是原子性\">什么是原子性？</h3><p>如果一个更新操作不会计算到一半的时候被另外一个线程看到，就叫原子性。</p><p>原子操作可认为是一个不可分的操作；要么发生，要么没发生，我们看不到任何执行的中间过程，不存在部分结果(partial effects)。可以想象的到，原子操作要保证要么全部发生，要么全部没发生，这样原子操作绝对不是一个廉价的消耗低的指令，相反，原子操作是一个较为昂贵的指令。</p><h3 id=\"非原子操作为什么会更新到一半被另一个线程看到\">非原子操作，为什么会更新到一半被另一个线程看到？</h3><p>即使一个简单的整型变量的赋值操作，也有可能更新到一半被另一个线程看到，这是为什么呢？原因就是高速缓存中的旧数据。</p><p>由于每个cpu除了共享一个内存设备外还有各自的高速缓存，一个cpu更新了内存中的内容后，其实并没有通知其他cpu中的缓存去掉该内容，这导致其他cpu中的高速缓存存储的仍然是旧的数据。当这些CPU读取这个变量时会从缓存中取得旧数据，直到缓存中的这个数据被丢弃或更新。</p><h3 id=\"原子操作做了什么使得更新不被其他线程看到\">原子操作，做了什么使得更新不被其他线程看到？</h3><p>CPU的高速缓存间有一个MESI协议(cache一致性协议，4个关键词 Modifed Exclusive Shared Invalid 拼凑起来的缩写)，通过这个消息协议，CPU可以查看其他CPU高速缓存中的数据状态，就像不同设备间通信那样。</p><p>当执行原子操作 store 即写入数据时，先查看当前cpu高速缓存中有没有数据，如果没有，则通知其他cpu中的高速缓存该数据切为无效状态，等待所有cpu都将该数据切为无效状态后，此cpu才开始发起写入内存和高速缓存的操作，并标记该值为修改状态。如果有，则更新高速缓存中的值，并通知其他cpu中的高速缓存该值已经不合法，最后此cpu并没有将该值写入内存，而是在高速缓存中标记该值被修改，以便下次再利用，或者等到丢弃时再写入内存。</p><p>当执行原子操作 load 即读取数据时，先查看当前cpu高速缓存中有没有该数据，如果没有(或者是无效的)，则从先从查看其他cpu中查看该数据，如果有则获取，没有则从内存中获取。如果当前cpu高速缓存中有该数据，则直接使用该数据(必须不是无效的)。</p><h3 id=\"其他并行优化\">其他并行优化</h3><p>1.分割资源，减少线程间的争夺。</p><p>分割或者复制一块内存出来，让某个线程专门使用，这样就不会与其他线程冲突，计算结束时再考虑合并的事。</p><p>此方法在Unity引擎的 Job System中有使用到，即给Job System一块独立的内存来处理自己的事物，与其他线程不冲突。</p><p>2.散列容器，减少锁的范围，和前面介绍的细粒度锁(算法）稍微有点不一样，这种容器是散列的，冲突更少但使用范围很小。</p><p>3.SIMD指令虽然不是并行，但由于它可以同时处理4个数据的运算，也算是勉强算并行处理了。</p><p>参考资料：</p><p><a href=\"https://www.cnblogs.com/huxiao-tee/p/4657851.html\">《从内核文件系统看文件读写过程》</a></p><p><a href=\"https://www.zhihu.com/question/64723752\">《Linux系统中 进程 、线程 、时间片的关系》</a></p><p><a href=\"https://www.jiqizhixin.com/articles/2019-01-22-12\">《说说无锁(Lock-Free)编程那些事》</a></p>",
            "url": "http://www.luzexi.com/2020/12/27/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B018",
            
            
            
            
            
            "date_published": "2020-12-27T00:00:00+08:00",
            "date_modified": "2020-12-27T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/12/25/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A17",
            "title": "给女儿的信(七)",
            "summary": "女儿 教育 亲情",
            "content_text": "Hi 陆秀恩圣诞快乐，今年的圣诞爸爸在很远的深圳，爸爸好想跟你一起过圣诞，爸爸一直很想念你，也一直很关注你。我知道你与同学相处的越来越融洽了，在学校里的表现很积极很开朗，大家都喜欢跟你交朋友，因为你懂得关心朋友。你的画画和跳舞越来越棒了，对自己喜欢的事很专注。我跟秀恩一样也很专注呢。我还听妈妈说你越来越自律了，这是个不错的开始喔。爸爸一直在学习如何学习，想把学习的技巧再多研究一下，让自己更懂得如何高效学习，以前爸爸学习总是很低效，注意力很难集中，浪费了很多时间，现在我想改变一下自己。这是一条漫长的路，爸爸每天都在坚持，坚持每天看点书，每天运动一下，每天学习一下，这样一天天积累下来，1年就会有大的不同，3、5年就有翻天覆地的变化。我想成为一个知识渊博的人，可能成不了科学家，但可以成为一个有价值的人，一个自律、智慧、有爱的人。爸爸很想念你，祝你圣诞快乐，加油陆秀恩 ：）Hi 陆安妮圣诞快乐，爸爸很想念你。我常听妈妈说你也很想念爸爸，爸爸心里暖暖的很高兴。在幼儿园里的日子还好么，和朋友们相处的还融洽么，爸爸很想过来每天都陪着你，但爸爸有点忙，需要在深圳工作几年。爸爸知道最近你跟姐姐一起开始学习写字和数学，爸爸知道你很努力，跟爸爸一起加油喔。你会慢慢的找到自己学习的节奏的，安妮。你很棒哎，要坚持住喔。爸爸也在深圳努力呢，每天都有学习和健身，爸爸跟你一起做身体壮壮的、学习棒棒的好孩子，比心。爸爸拿着你送给我的画，每天都放在床头看一下，一看到这幅画爸爸就想到你，下次记得再送爸爸一副画哦。最近去台上表演时心里紧张吗，爸爸看了你跳舞的视频，很不错哎，我们再接再厉，一起加油。爸爸、妈妈、小姨妈、安妮、秀恩都一起加油，加~油~！圣诞快乐安妮，想念你的爸爸 ：）",
            "content_html": "<p>Hi 陆秀恩</p><p>圣诞快乐，今年的圣诞爸爸在很远的深圳，爸爸好想跟你一起过圣诞，爸爸一直很想念你，也一直很关注你。</p><p>我知道你与同学相处的越来越融洽了，在学校里的表现很积极很开朗，大家都喜欢跟你交朋友，因为你懂得关心朋友。</p><p>你的画画和跳舞越来越棒了，对自己喜欢的事很专注。我跟秀恩一样也很专注呢。我还听妈妈说你越来越自律了，这是个不错的开始喔。</p><p>爸爸一直在学习如何学习，想把学习的技巧再多研究一下，让自己更懂得如何高效学习，以前爸爸学习总是很低效，注意力很难集中，浪费了很多时间，现在我想改变一下自己。</p><p>这是一条漫长的路，爸爸每天都在坚持，坚持每天看点书，每天运动一下，每天学习一下，这样一天天积累下来，1年就会有大的不同，3、5年就有翻天覆地的变化。我想成为一个知识渊博的人，可能成不了科学家，但可以成为一个有价值的人，一个自律、智慧、有爱的人。</p><p>爸爸很想念你，祝你圣诞快乐，加油陆秀恩 ：）</p><hr /><p>Hi 陆安妮</p><p>圣诞快乐，爸爸很想念你。</p><p>我常听妈妈说你也很想念爸爸，爸爸心里暖暖的很高兴。</p><p>在幼儿园里的日子还好么，和朋友们相处的还融洽么，爸爸很想过来每天都陪着你，但爸爸有点忙，需要在深圳工作几年。</p><p>爸爸知道最近你跟姐姐一起开始学习写字和数学，爸爸知道你很努力，跟爸爸一起加油喔。你会慢慢的找到自己学习的节奏的，安妮。你很棒哎，要坚持住喔。爸爸也在深圳努力呢，每天都有学习和健身，爸爸跟你一起做身体壮壮的、学习棒棒的好孩子，比心。</p><p>爸爸拿着你送给我的画，每天都放在床头看一下，一看到这幅画爸爸就想到你，下次记得再送爸爸一副画哦。最近去台上表演时心里紧张吗，爸爸看了你跳舞的视频，很不错哎，我们再接再厉，一起加油。</p><p>爸爸、妈妈、小姨妈、安妮、秀恩都一起加油，加~油~！</p><p>圣诞快乐安妮，想念你的爸爸 ：）</p>",
            "url": "http://www.luzexi.com/2020/12/25/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A17",
            
            
            
            
            
            "date_published": "2020-12-25T00:00:00+08:00",
            "date_modified": "2020-12-25T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/12/13/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B017",
            "title": "读书笔记(十七) 《C++性能优化指南》二",
            "summary": "读书 书 看书 读后感",
            "content_text": "字符串问题这里作者讲的有点啰嗦，没有围绕着重点去讲，所以这里我吸收下他的知识点并总结下自己的知识点和经验。把字符串问题单独拎出来说是因为字符串问题比较大，也比较隐性，常常容易引起性能问题。字符串在概念上很简单，它就是一个字符数组，但是想要实现高效的字符串却非常不容易。首先字符串内存是动态分配的，其次是字符串常常被用来当成一个值来使用，这导致字符串操作常常带来大量不必要的内存分配和内存复制。字符串问题的重点在内存分配问题和字符串查找。字符串操作带来的内存频繁的分配和浪费导致程序性能效率大大降低，操作包括，字符串拼接、字符串拆分、字符串大小写切换等，每次操作字符串都会新分配一个字符串内存或者字符串内存集，而查找字符串，即使使用算法通常也会逐字比较，效率比价差，特别是在一个集合中查找某个字符串对应的值时，需要完整的比较两者字符串是否完全一致。改善内存分配效率，我们可以使用预分配和内存池机制。字符串内存预分配可以有2种，一种预先分配很多个长度不同的字符串缓存起来，使用时给出去，例如分别预分配1-50长度的字符串各100个，当逻辑需要时再给出去，用完了再收回来。另一种是先分配多个长一点的字符串，例如分配100个100长度的字符串，让字符串能够在拼接时不用再分配内存，由于本身字符串长度足够长，所以可以直接在当前字符数组中改写内容。除了预分配，我们也可以将已经分配的字符串加入到字符串缓冲池中去，来管理这些预先分配好的字符串，需要时给予，不用时回收，不够时再分配一批，这样就能重复利用已经分配的字符串内存，将分配内存的工作集中起来消耗在某个点上。我们常会去比较和查找字符串，查找字符串中的字符串有很多算法，但比较两个字符串是否相同如果仍然使用查找算法去做就是一种浪费，那么我们应该怎样去做两个字符串的比较呢，最好用哈希的方式，把字符串计算出一个哈希值，用这个哈希值来比较是否相等就快很多了。例如我们常常在业务逻辑中判断两个字符串是否相等，每次比较都会浪费掉很多计算量，用哈希的方式就会快很多，因为比较的是两个整数，在每次更新字符串时只需要重新计算一次哈希值就可以，由于通常字符串更新的并不频繁，所以计算哈希的消耗远比每次遍历两个字符串所带来的消耗要小的多。但哈希计算不一定能够获得一个唯一值，所以它只能被用来判断是否不同，即当哈希值不同时，两个字符串一定不同，而两个哈希值相同时有可能不同，此时再比较两者是否真的相同。虽然无法直接比较相同的字符串，但仍然大大减少了不同的两个字符串的比较的计算。算法算法是性能优化中的精髓，多数平庸的优化方法对性能改善都是线性的，但算法不同，如果说一个高效的算法替换了一个低效的算法性能可能呈现指数级的增长。算法时间开销一般有O(1)，O(log2(N))，O(N)，O(Nlog2(N))，O(N^2)，O(N^3)，O(2^N)，从高效到低效的排列，大多数算法如果能到log2(N)已经是非常优秀了，再进一步到O(1)则通常要付出巨大的内存代价。作者对二分查找、哈希、散列查找算法特别中意，于是讲了散列算法是怎样的和关键点是什么。我们在用在用查找算法时log2(N)的算法已经是非常不错的查找效率了，所以二分查找是效率比较高的，但它仍然是建立在有序队列的基础上，需要先排序再查找，排序比查找更能耗时，而且后续的元素加入需要插入到有序队列中。而散列算法则不同，排序和查找会更快，前提是数据特性能够散列，或者说散列的冲突不会那么高，于是他告诉我们哈希算法对于散列的重要性。这里作者讲的查找和排序内容比较浅，我融入了一些自己的经验。算法通常是根据数据特效来定制的，所以对数据独有的特性分析是重点。就我的理解，算法并一定要局限于当前的结构，可以重新创建一个全新的结构方式，这样在用算法去优化程序的时候思路会更开阔。例如我们在全地图寻找某个人的时候并不一定要在查找函数上优化算法，而可以重新制造一个方格结构体把世界分割成不同的方块，找人时只要收集四周方块内的人就可以更快的找到。算法也可以是局部的，因为数据多少和数据的特性可以由不同算法处理，所以我们在处理一大堆数据时可以拆分成不同的数据集进行处理，这些数据集的大小和特性也有所不同，针对性的处理会得到更有效的算法效率，例如快速排序算法，可以由不同的算法组成，由于它的中间值决定了快排速度，所以中间值我们可以用三个值取中间数的算法来找到更加稳定的中间值，当数段被分割成多个区间并且单个区间小于等于8个数时，插入排序其实比快排会更加快一些，因此我们在快排中间当数据量小于8时选择用插入排序算法。作者列举了一些常用的算法优化思路和套路。套路有：预计算、延迟计算、批量处理、缓存、特化、提高处理量、提示、优化执行路径、散列法、双重检查。预计算提前计算好一些可以离线完成计算量存储在文件中，这样可以省去了实时计算的开销。延迟计算先让所有中间过程改变完成后再对最后的结果计算，这样就省去了每次都需要计算全路径的消耗，例如引擎中通常有节点相互的挂载，每次赋值节点position时都会去计算重新计算子节点的位置，这时就要思考如何让计算延后，每次子节点的真实位置只要在帧结束时计算一遍就可以了，不用每次改变position时都去全路径计算一遍所有子节点。批量处理某些具有相同性质的数据不要一个个处理，因为一起同一类型的数据处理起来会有更优的方法，例如堆排序如果一个个插入的元素的话性能开销是O(Nlog2(N))，而一次性构建一个堆的话只需要O(N)。缓存不要每次都计算，然后拿着结果去比较，计算完后缓存起来，一直用缓存的值，直到需要更改时再计算一遍。特化一堆数据处理时它们都会消耗一些计算量，如果某个数据是特别的，不需要计算或者计算量可以很小，则另外开辟一个通道给它，让它少消耗一些。提高处理量一次处理多个数据而不是一个个处理，例如写日志不要每次都写，每隔一段时间写一次，类似这样的操作，先把准备的数据集中起来，集中起来的数据可能会有更多相似的特性可以用来优化。提示当处理数据的时候，给予一个提示，这样我们就能知道该如何更好更快的处理，例如在插入一个数据到队列里去时，告诉插入函数，这个数是个比较大的值或者是一个比较小的值，这样我们在做插入时就有了更多优化提示。优化执行路径程序语句里有很多个if…else，如果95%的语句都进某个if，那么最好把它提前到语句前，这样就不用执行其他的if里的计算了。散列法哈希值比较法，数据结构和字符串在比较时比较费时，用哈希值比较则比较方便，为它们计算一个哈希值，当两个哈希值不同时，它们一定不同，如果哈希值相同则再比较是否真的相同。双重检查数据其实有很多个特征可供我们使用来优化我们的算法，比如长度，如果两个数组长度不一样，那么它们两个的内容肯定是不一样的。类似这样的特征还有数据结构的某个字段或者某几个字段可以决定算法的计算路径，我们只要判断这几个字段就能排除很多计算量。套路只是方法论很多时候技巧谁都知道，实际运用时却能难灵活自如，如果你不常用它们，它们就不回成为你思考的一部分。容器作者对容器类数据结构性能做了一些介绍，从本质和测试标准两个方面做了讲解。不管C++标准库和Boost中的容纳器，还是其他语言的标准容器，它们都是非常通用且性价比不错的容器。但是如果你想让容器的性能发挥到最佳状态，就得自己去改造它。为什么要改造呢？因为首先标准容器内存的分配方式对具体的业务逻辑并不友好，我们可以把跟业务强相关的内存分配方式和内存池的技巧用在容器上以提高内存分配效率，其次容器中数据结构的插入、删除、查找的算法跟业务匹配上并不是最佳的，所以我们要根据我们的实际情况来改造这些算法以提高性能效率。容器包括，序列容器和关联容器，序列容器有string，vector，deque，list，forward_list，大都是以数组或链表形式存在的容器，而关联容器则以map和set为代表，用来建立key和value之间联系的容器，包括map、multimap、set、multiset等。我们在构造完自己的容器后，需要跟标准容器进行比较，只有这样才能知道我们改造的与业务强相关的容器是否比标准容器更加高效。容器性能测试标准就是为了判断容器的在各方面的性能是否更优秀，测试内容需要包含向一个没有内容的容器中以及向一个有数万条记录的容器中插入，删除，查找十万个不同的元素所需要消耗的纳秒数，比较拥有相同功能的容器在执行同一功能的操作时所消耗的时间。我们在测试时用到的数据也会遇到问题，十万个元素也并不能代表数据的典型性，所以很多时候我们需要离线Random随机1000组不同的数据以覆盖所有测试范围。由于我们自己不可能对所有容器进行重构，所以第三方容器库也是我们需要关注的地方，包括Boost、EASTL等都是我们需要参考的对象。内存分配提升内存分配效率是提升程序性能非常有效的手段，其实质就是减少内存分配次数，减少内存分配次数就意味着减少内存分配带来的消耗，因此关键的关键还是如何减少内存分配次数，注意，是次数，不是大小，也不是释放。讲内存分配之前，我们先来了解下内存分配接口以及内存分配的底层原理。C++中内存管理函数有new，delete，malloc，free，其中new，delete运算符可以被类重载为 new()，new，delete()，delete，他们与class强相关，而malloc()和free()则是经典的C函数库中的内存管理函数，它们分配和释放的是无类型内存块，当无类型内存块被创建出来后，可以被强制指定为是某个变量、数据结构或者类实例。从概念上来说，分配内存的函数会从内存中寻找一块可以使用的内存来满足请求，但事实上并没有这么简单。作者没有详细介绍内存分配和释放的底层原理，但我觉得这部分的底层原理是值得挖掘和说明的，作为一个频繁与内存打交道的程序员来说，知道内存是如何分配和释放的是非常有必要的。我们的程序被加载到内存后分为几个内存段，包括指令段，数据段，bss段，栈段，堆段，指令段放具体指令，数据段放常量数据，bss段放静态和全局变量，栈段放调用栈、临时寄存器和临时变量，以上几个段都是固定的，不会有扩容一说，只有堆段是可扩容的。new和malloc分配的内存就在这个堆段中。堆段会事先分配一段内存，当malloc请求分配的内存时，如果剩余空的内存足够，则分配返回一段足够大小的内存，如果不足则再申请内存。堆段在向系统申请内存时类似于提高内存块大小，分配新内存这个操作需要系统将用户态切换到内核态再切回来，因此性能损耗是比较大的。其实malloc分配了内存，也并不代表实际物理内存中申请了某块内存，因为进程所面对的虚拟内存地址空间，只有按页映射到物理内存地址，才能真正使用。而且分配了新的内存，物理内存上实际没有此内存空间，只有当我们memset实际使用它时系统发现了物理内存缺页情况时才真正分配实际物理内存空间。从这个角度看，内存分配在操作系统底层上会稍显复杂。那么申请内存在系统底层到底是如何操作的呢？我们来深究一下。在Linux中进程由进程控制块(PCB)描述，用一个task_struct 数据结构表示，这个数据结构记录了所有进程信息，包括进程状态、进程调度信息、标示符、进程通信相关信息、进程连接信息、时间和定时器、文件系统信息、虚拟内存信息等. 和malloc密切相关的就是虚拟内存信息，定义为struct mm_struct描述了进程的地址空间。mm_struct结构对整个用户空间（进程空间）的描述如下:///include/linux/sched.h struct mm_struct {  struct vm_area_struct * mmap;  /* 指向虚拟区间（VMA）链表 */  rb_root_t mm_rb;         /*指向red_black树*/  struct vm_area_struct * mmap_cache;     /* 指向最近找到的虚拟区间*/  pgd_t * pgd;             /*指向进程的页目录*/  atomic_t mm_users;                   /* 用户空间中的有多少用户*/                                       atomic_t mm_count;               /* 对\"struct mm_struct\"有多少引用*/                                       int map_count;                        /* 虚拟区间的个数*/  struct rw_semaphore mmap_sem;  spinlock_t page_table_lock;        /* 保护任务页表和 mm-&gt;rss */         struct list_head mmlist;            /*所有活动（active）mm的链表 */  unsigned long start_code, end_code, start_data, end_data; /* 代码段、数据段 起始地址和结束地址 */  unsigned long start_brk, brk, start_stack; /* 栈区 的起始地址，堆区 起始地址和结束地址 */  unsigned long arg_start, arg_end, env_start, env_end; /*命令行参数 和 环境变量的 起始地址和结束地址*/  unsigned long rss, total_vm, locked_vm;  unsigned long def_flags;  unsigned long cpu_vm_mask;  unsigned long swap_address;  unsigned dumpable:1;  /* Architecture-specific MM context */  mm_context_t context;};其中start_brk和brk分别是堆的起始和终止地址，我们使用malloc动态分配的内存就在这之间。系统分配堆空间时，进程通过malloc()库函数在堆上进行空间动态分配，堆空间如果不够用，malloc就进行系统调用增大brk的值。malloc只知道start_brk 和brk之间连续可用的内存空间它可用任意分配，如果不够用了就向系统申请增大brk。我们看到实际堆内存在虚拟空间中是可以不断向上扩张的，虽然实际物理内存中不是这样，但至少在虚拟空间中我们可以认为堆内存是一段连续的内存空间地址。由于我们分配的内存空间都在虚拟空间当中，我们看到的都是虚拟的地址，实际物理内存分配并不是我们想象的那样连续，也有可能在分配时由于物理内存不足我们拿到的空间是从硬盘空间上的一段数据交换到内存上来的。所以很多时候即使我们分配了连续的空间，在物理内存上也并不是连续的，只能说连续的概率比较大而已。其实还有很多分配内存在操作系统层面的原理，这里暂时不深究下去。作者指出提高内存分配效率的方法有两种，一种是减少不必要的内存复制的情况，另一种是用固定大小内存分配器解决减少内存分配次数。其中内存复制现象常会存在于对象初始化、赋值运算、函数参数、函数返回、插入一个元素到标准容器中，这几种情况是我们需要特别注意的，常常会由于失误编码而导致内存复制的情况，特别是针对一些常用的结构体和非指针类型的实例传递。固定大小内存管理器，意思是分配的内存块大小是固定的，这块内存可以是某个类或数据结构相匹配的一个固定大小，也可以是按某固定大小的内存块，这块内存能容纳某个范围内的一个类或数据结构的实例，这个内存管理器专门管理这个类或数据结构的所有内存的，或者专门管理某个固定大小内存块的管理类，这样在分配某一类大小实例时可以专门使用这样的内存管理器(有冗余不可避免)。在固定大小内存管理器中，会预加载一段内存以便给足够数量的类和数据结构使用，并且在回收时存储在管理器中以便重复利用，这样既减少了内存分配次数，也减少了内存碎片。这样一来，内存块的管理，可以分为，专门为某个类设计的内存管理类，和专门为某个大小范围内设计的内存管理类，我们可以称它们为通用的内存块管理类。在实际编程中，我们在写一个固定大小的内存分配管理器时，如果某个类使用数量比较固定和分配释放率比较频繁的话，可以专门为这个类做一个分配器是性价比比较高的。我们通常也会写一个比较通用的内存管理器，用大小不同的内存块来进行区分，例如我们可以为64byte，128byte，256byte，512byte，1k，2k，这几档大小分别预分配几十个内存块存储在通用内存分配管理器中，当程序请求内存时，将请求大小四舍五入后变为2的下一个幂，这样就能获得一个最快适配的内存管理器，当然在使用完毕释放时也同样只是回到这个内存管理器中存储起来以便重复利用，就像内存池和对象池那样。热点代码这周依然没有写完，下周继续最后一部分的总结。参考资料：《malloc和free的实现原理解析》https://jacktang816.github.io/post/mallocandfree/",
            "content_html": "<h3 id=\"字符串问题\">字符串问题</h3><p>这里作者讲的有点啰嗦，没有围绕着重点去讲，所以这里我吸收下他的知识点并总结下自己的知识点和经验。</p><p>把字符串问题单独拎出来说是因为字符串问题比较大，也比较隐性，常常容易引起性能问题。字符串在概念上很简单，它就是一个字符数组，但是想要实现高效的字符串却非常不容易。</p><p>首先字符串内存是动态分配的，其次是字符串常常被用来当成一个值来使用，这导致字符串操作常常带来大量不必要的内存分配和内存复制。</p><p>字符串问题的重点在内存分配问题和字符串查找。字符串操作带来的内存频繁的分配和浪费导致程序性能效率大大降低，操作包括，字符串拼接、字符串拆分、字符串大小写切换等，每次操作字符串都会新分配一个字符串内存或者字符串内存集，而查找字符串，即使使用算法通常也会逐字比较，效率比价差，特别是在一个集合中查找某个字符串对应的值时，需要完整的比较两者字符串是否完全一致。</p><p>改善内存分配效率，我们可以使用预分配和内存池机制。字符串内存预分配可以有2种，一种预先分配很多个长度不同的字符串缓存起来，使用时给出去，例如分别预分配1-50长度的字符串各100个，当逻辑需要时再给出去，用完了再收回来。另一种是先分配多个长一点的字符串，例如分配100个100长度的字符串，让字符串能够在拼接时不用再分配内存，由于本身字符串长度足够长，所以可以直接在当前字符数组中改写内容。</p><p>除了预分配，我们也可以将已经分配的字符串加入到字符串缓冲池中去，来管理这些预先分配好的字符串，需要时给予，不用时回收，不够时再分配一批，这样就能重复利用已经分配的字符串内存，将分配内存的工作集中起来消耗在某个点上。</p><p>我们常会去比较和查找字符串，查找字符串中的字符串有很多算法，但比较两个字符串是否相同如果仍然使用查找算法去做就是一种浪费，那么我们应该怎样去做两个字符串的比较呢，最好用哈希的方式，把字符串计算出一个哈希值，用这个哈希值来比较是否相等就快很多了。例如我们常常在业务逻辑中判断两个字符串是否相等，每次比较都会浪费掉很多计算量，用哈希的方式就会快很多，因为比较的是两个整数，在每次更新字符串时只需要重新计算一次哈希值就可以，由于通常字符串更新的并不频繁，所以计算哈希的消耗远比每次遍历两个字符串所带来的消耗要小的多。但哈希计算不一定能够获得一个唯一值，所以它只能被用来判断是否不同，即当哈希值不同时，两个字符串一定不同，而两个哈希值相同时有可能不同，此时再比较两者是否真的相同。虽然无法直接比较相同的字符串，但仍然大大减少了不同的两个字符串的比较的计算。</p><h3 id=\"算法\">算法</h3><p>算法是性能优化中的精髓，多数平庸的优化方法对性能改善都是线性的，但算法不同，如果说一个高效的算法替换了一个低效的算法性能可能呈现指数级的增长。</p><p>算法时间开销一般有O(1)，O(log2(N))，O(N)，O(Nlog2(N))，O(N^2)，O(N^3)，O(2^N)，从高效到低效的排列，大多数算法如果能到log2(N)已经是非常优秀了，再进一步到O(1)则通常要付出巨大的内存代价。</p><p>作者对二分查找、哈希、散列查找算法特别中意，于是讲了散列算法是怎样的和关键点是什么。我们在用在用查找算法时log2(N)的算法已经是非常不错的查找效率了，所以二分查找是效率比较高的，但它仍然是建立在有序队列的基础上，需要先排序再查找，排序比查找更能耗时，而且后续的元素加入需要插入到有序队列中。而散列算法则不同，排序和查找会更快，前提是数据特性能够散列，或者说散列的冲突不会那么高，于是他告诉我们哈希算法对于散列的重要性。</p><p>这里作者讲的查找和排序内容比较浅，我融入了一些自己的经验。</p><p>算法通常是根据数据特效来定制的，所以对数据独有的特性分析是重点。就我的理解，算法并一定要局限于当前的结构，可以重新创建一个全新的结构方式，这样在用算法去优化程序的时候思路会更开阔。例如我们在全地图寻找某个人的时候并不一定要在查找函数上优化算法，而可以重新制造一个方格结构体把世界分割成不同的方块，找人时只要收集四周方块内的人就可以更快的找到。</p><p>算法也可以是局部的，因为数据多少和数据的特性可以由不同算法处理，所以我们在处理一大堆数据时可以拆分成不同的数据集进行处理，这些数据集的大小和特性也有所不同，针对性的处理会得到更有效的算法效率，例如快速排序算法，可以由不同的算法组成，由于它的中间值决定了快排速度，所以中间值我们可以用三个值取中间数的算法来找到更加稳定的中间值，当数段被分割成多个区间并且单个区间小于等于8个数时，插入排序其实比快排会更加快一些，因此我们在快排中间当数据量小于8时选择用插入排序算法。</p><p>作者列举了一些常用的算法优化思路和套路。</p><p>套路有：预计算、延迟计算、批量处理、缓存、特化、提高处理量、提示、优化执行路径、散列法、双重检查。</p><h3 id=\"预计算\">预计算</h3><p>提前计算好一些可以离线完成计算量存储在文件中，这样可以省去了实时计算的开销。</p><h3 id=\"延迟计算\">延迟计算</h3><p>先让所有中间过程改变完成后再对最后的结果计算，这样就省去了每次都需要计算全路径的消耗，例如引擎中通常有节点相互的挂载，每次赋值节点position时都会去计算重新计算子节点的位置，这时就要思考如何让计算延后，每次子节点的真实位置只要在帧结束时计算一遍就可以了，不用每次改变position时都去全路径计算一遍所有子节点。</p><h3 id=\"批量处理\">批量处理</h3><p>某些具有相同性质的数据不要一个个处理，因为一起同一类型的数据处理起来会有更优的方法，例如堆排序如果一个个插入的元素的话性能开销是O(Nlog2(N))，而一次性构建一个堆的话只需要O(N)。</p><h3 id=\"缓存\">缓存</h3><p>不要每次都计算，然后拿着结果去比较，计算完后缓存起来，一直用缓存的值，直到需要更改时再计算一遍。</p><h3 id=\"特化\">特化</h3><p>一堆数据处理时它们都会消耗一些计算量，如果某个数据是特别的，不需要计算或者计算量可以很小，则另外开辟一个通道给它，让它少消耗一些。</p><h3 id=\"提高处理量\">提高处理量</h3><p>一次处理多个数据而不是一个个处理，例如写日志不要每次都写，每隔一段时间写一次，类似这样的操作，先把准备的数据集中起来，集中起来的数据可能会有更多相似的特性可以用来优化。</p><h3 id=\"提示\">提示</h3><p>当处理数据的时候，给予一个提示，这样我们就能知道该如何更好更快的处理，例如在插入一个数据到队列里去时，告诉插入函数，这个数是个比较大的值或者是一个比较小的值，这样我们在做插入时就有了更多优化提示。</p><h3 id=\"优化执行路径\">优化执行路径</h3><p>程序语句里有很多个if…else，如果95%的语句都进某个if，那么最好把它提前到语句前，这样就不用执行其他的if里的计算了。</p><h3 id=\"散列法\">散列法</h3><p>哈希值比较法，数据结构和字符串在比较时比较费时，用哈希值比较则比较方便，为它们计算一个哈希值，当两个哈希值不同时，它们一定不同，如果哈希值相同则再比较是否真的相同。</p><h3 id=\"双重检查\">双重检查</h3><p>数据其实有很多个特征可供我们使用来优化我们的算法，比如长度，如果两个数组长度不一样，那么它们两个的内容肯定是不一样的。类似这样的特征还有数据结构的某个字段或者某几个字段可以决定算法的计算路径，我们只要判断这几个字段就能排除很多计算量。</p><h3 id=\"套路只是方法论\">套路只是方法论</h3><p>很多时候技巧谁都知道，实际运用时却能难灵活自如，如果你不常用它们，它们就不回成为你思考的一部分。</p><h3 id=\"容器\">容器</h3><p>作者对容器类数据结构性能做了一些介绍，从本质和测试标准两个方面做了讲解。</p><p>不管C++标准库和Boost中的容纳器，还是其他语言的标准容器，它们都是非常通用且性价比不错的容器。但是如果你想让容器的性能发挥到最佳状态，就得自己去改造它。为什么要改造呢？因为首先标准容器内存的分配方式对具体的业务逻辑并不友好，我们可以把跟业务强相关的内存分配方式和内存池的技巧用在容器上以提高内存分配效率，其次容器中数据结构的插入、删除、查找的算法跟业务匹配上并不是最佳的，所以我们要根据我们的实际情况来改造这些算法以提高性能效率。</p><p>容器包括，序列容器和关联容器，序列容器有string，vector，deque，list，forward_list，大都是以数组或链表形式存在的容器，而关联容器则以map和set为代表，用来建立key和value之间联系的容器，包括map、multimap、set、multiset等。</p><p>我们在构造完自己的容器后，需要跟标准容器进行比较，只有这样才能知道我们改造的与业务强相关的容器是否比标准容器更加高效。</p><p>容器性能测试标准就是为了判断容器的在各方面的性能是否更优秀，测试内容需要包含向一个没有内容的容器中以及向一个有数万条记录的容器中插入，删除，查找十万个不同的元素所需要消耗的纳秒数，比较拥有相同功能的容器在执行同一功能的操作时所消耗的时间。我们在测试时用到的数据也会遇到问题，十万个元素也并不能代表数据的典型性，所以很多时候我们需要离线Random随机1000组不同的数据以覆盖所有测试范围。</p><p>由于我们自己不可能对所有容器进行重构，所以第三方容器库也是我们需要关注的地方，包括Boost、EASTL等都是我们需要参考的对象。</p><h2 id=\"内存分配\">内存分配</h2><p>提升内存分配效率是提升程序性能非常有效的手段，其实质就是减少内存分配次数，减少内存分配次数就意味着减少内存分配带来的消耗，因此关键的关键还是如何减少内存分配次数，注意，是次数，不是大小，也不是释放。</p><p>讲内存分配之前，我们先来了解下内存分配接口以及内存分配的底层原理。</p><p>C++中内存管理函数有new，delete，malloc，free，其中new，delete运算符可以被类重载为 new()，new<a href=\"\"></a>，delete()，delete<a href=\"\"></a>，他们与class强相关，而malloc()和free()则是经典的C函数库中的内存管理函数，它们分配和释放的是无类型内存块，当无类型内存块被创建出来后，可以被强制指定为是某个变量、数据结构或者类实例。</p><p>从概念上来说，分配内存的函数会从内存中寻找一块可以使用的内存来满足请求，但事实上并没有这么简单。作者没有详细介绍内存分配和释放的底层原理，但我觉得这部分的底层原理是值得挖掘和说明的，作为一个频繁与内存打交道的程序员来说，知道内存是如何分配和释放的是非常有必要的。</p><p>我们的程序被加载到内存后分为几个内存段，包括指令段，数据段，bss段，栈段，堆段，指令段放具体指令，数据段放常量数据，bss段放静态和全局变量，栈段放调用栈、临时寄存器和临时变量，以上几个段都是固定的，不会有扩容一说，只有堆段是可扩容的。new和malloc分配的内存就在这个堆段中。</p><p>堆段会事先分配一段内存，当malloc请求分配的内存时，如果剩余空的内存足够，则分配返回一段足够大小的内存，如果不足则再申请内存。</p><p>堆段在向系统申请内存时类似于提高内存块大小，分配新内存这个操作需要系统将用户态切换到内核态再切回来，因此性能损耗是比较大的。其实malloc分配了内存，也并不代表实际物理内存中申请了某块内存，因为进程所面对的虚拟内存地址空间，只有按页映射到物理内存地址，才能真正使用。而且分配了新的内存，物理内存上实际没有此内存空间，只有当我们memset实际使用它时系统发现了物理内存缺页情况时才真正分配实际物理内存空间。</p><p>从这个角度看，内存分配在操作系统底层上会稍显复杂。那么申请内存在系统底层到底是如何操作的呢？我们来深究一下。</p><p>在Linux中进程由进程控制块(PCB)描述，用一个task_struct 数据结构表示，这个数据结构记录了所有进程信息，包括进程状态、进程调度信息、标示符、进程通信相关信息、进程连接信息、时间和定时器、文件系统信息、虚拟内存信息等. 和malloc密切相关的就是虚拟内存信息，定义为struct mm_struct描述了进程的地址空间。</p><p>mm_struct结构对整个用户空间（进程空间）的描述如下:</p><pre><code class=\"language-c\">///include/linux/sched.h struct mm_struct {  struct vm_area_struct * mmap;  /* 指向虚拟区间（VMA）链表 */  rb_root_t mm_rb;         /*指向red_black树*/  struct vm_area_struct * mmap_cache;     /* 指向最近找到的虚拟区间*/  pgd_t * pgd;             /*指向进程的页目录*/  atomic_t mm_users;                   /* 用户空间中的有多少用户*/                                       atomic_t mm_count;               /* 对\"struct mm_struct\"有多少引用*/                                       int map_count;                        /* 虚拟区间的个数*/  struct rw_semaphore mmap_sem;  spinlock_t page_table_lock;        /* 保护任务页表和 mm-&gt;rss */         struct list_head mmlist;            /*所有活动（active）mm的链表 */  unsigned long start_code, end_code, start_data, end_data; /* 代码段、数据段 起始地址和结束地址 */  unsigned long start_brk, brk, start_stack; /* 栈区 的起始地址，堆区 起始地址和结束地址 */  unsigned long arg_start, arg_end, env_start, env_end; /*命令行参数 和 环境变量的 起始地址和结束地址*/  unsigned long rss, total_vm, locked_vm;  unsigned long def_flags;  unsigned long cpu_vm_mask;  unsigned long swap_address;  unsigned dumpable:1;  /* Architecture-specific MM context */  mm_context_t context;};</code></pre><p>其中start_brk和brk分别是堆的起始和终止地址，我们使用malloc动态分配的内存就在这之间。系统分配堆空间时，进程通过malloc()库函数在堆上进行空间动态分配，堆空间如果不够用，malloc就进行系统调用增大brk的值。malloc只知道start_brk 和brk之间连续可用的内存空间它可用任意分配，如果不够用了就向系统申请增大brk。</p><p>我们看到实际堆内存在虚拟空间中是可以不断向上扩张的，虽然实际物理内存中不是这样，但至少在虚拟空间中我们可以认为堆内存是一段连续的内存空间地址。</p><p>由于我们分配的内存空间都在虚拟空间当中，我们看到的都是虚拟的地址，实际物理内存分配并不是我们想象的那样连续，也有可能在分配时由于物理内存不足我们拿到的空间是从硬盘空间上的一段数据交换到内存上来的。所以很多时候即使我们分配了连续的空间，在物理内存上也并不是连续的，只能说连续的概率比较大而已。</p><p>其实还有很多分配内存在操作系统层面的原理，这里暂时不深究下去。</p><p>作者指出提高内存分配效率的方法有两种，一种是减少不必要的内存复制的情况，另一种是用固定大小内存分配器解决减少内存分配次数。</p><p>其中内存复制现象常会存在于对象初始化、赋值运算、函数参数、函数返回、插入一个元素到标准容器中，这几种情况是我们需要特别注意的，常常会由于失误编码而导致内存复制的情况，特别是针对一些常用的结构体和非指针类型的实例传递。</p><p>固定大小内存管理器，意思是分配的内存块大小是固定的，这块内存可以是某个类或数据结构相匹配的一个固定大小，也可以是按某固定大小的内存块，这块内存能容纳某个范围内的一个类或数据结构的实例，这个内存管理器专门管理这个类或数据结构的所有内存的，或者专门管理某个固定大小内存块的管理类，这样在分配某一类大小实例时可以专门使用这样的内存管理器(有冗余不可避免)。</p><p>在固定大小内存管理器中，会预加载一段内存以便给足够数量的类和数据结构使用，并且在回收时存储在管理器中以便重复利用，这样既减少了内存分配次数，也减少了内存碎片。</p><p>这样一来，内存块的管理，可以分为，专门为某个类设计的内存管理类，和专门为某个大小范围内设计的内存管理类，我们可以称它们为通用的内存块管理类。</p><p>在实际编程中，我们在写一个固定大小的内存分配管理器时，如果某个类使用数量比较固定和分配释放率比较频繁的话，可以专门为这个类做一个分配器是性价比比较高的。我们通常也会写一个比较通用的内存管理器，用大小不同的内存块来进行区分，例如我们可以为64byte，128byte，256byte，512byte，1k，2k，这几档大小分别预分配几十个内存块存储在通用内存分配管理器中，当程序请求内存时，将请求大小四舍五入后变为2的下一个幂，这样就能获得一个最快适配的内存管理器，当然在使用完毕释放时也同样只是回到这个内存管理器中存储起来以便重复利用，就像内存池和对象池那样。</p><h2 id=\"热点代码\">热点代码</h2><p>这周依然没有写完，下周继续最后一部分的总结。</p><p>参考资料：</p><p>《malloc和free的实现原理解析》https://jacktang816.github.io/post/mallocandfree/</p>",
            "url": "http://www.luzexi.com/2020/12/13/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B017",
            
            
            
            
            
            "date_published": "2020-12-13T00:00:00+08:00",
            "date_modified": "2020-12-13T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/12/06/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B016",
            "title": "读书笔记(十六) 《C++性能优化指南》一",
            "summary": "读书 书 看书 读后感",
            "content_text": "这本书给我的感受是，有技巧有细节也有许多不足，作者介绍了大部分程序上性能优化的方案和思路，也从原理上讲了性能问题的根本原理，但没能做得通俗易懂、深入浅出，书本有几处地方在故弄玄虚以及凑字数，也许是我的功力不足没能理解，这部分无法理解的杂乱无章的内容，可以留到以后再慢慢回顾。整本书其实并不是针对C++写的，而是面向程序执行而效率写的，其他语言也一样通用。我结合我的经历和经验写下我的理解，以及我从书中学到的知识，或许过几年回头看会是另一番情景，但现在我需要把它们拎出来总结一下。作者是一个有30多年编程经历的人，对编程依然保持的狂热兴趣，注意，他从未去过微软、谷歌等知名公司，这本书就是在这样的一个前提下写下的。作者认为我们在优化程序的时候，很多时候都是靠‘猜测’而不是实际的去测试，这是一个比较大的问题。实际上我们并不知道某段程序是否有性能问题，因为有可能编译器已经将它优化了，或者某段程序在我们优化后是否真的有性能提升，因为很多时候我们只是肉眼去代码或是用脑袋去猜，不知道性能问题出在哪里就花费很多时间去优化这是不行的。而且我们也不能因为优化程序性能而破坏了程序的稳定性，如果从中制造出Bug导致产品崩溃那是非常得不偿失的。另外他提出了一个比较重要的理念，即大部分性能问题在代码层面上的分布都是‘90/10规则’，也就是说，90%的性能问题出在10%的代码上。因此为了我们在做性能优化时提高效率，应该重点去找出这影响90%性能问题的那10%的代码，它们就是性能问题的重点。不过这10%的代码并不是集中在某处，而是分散在各个模块中，需要我们去找出来，因此按照我的经验和他的理念来理解性能优化的90/10规则，是说我们需要改动的代码远比整体代码要少的多，而我们必须精准的找出这部分少数代码并优化它。原书内容比较繁杂，我又重新归类，我把它归类为，计算机执行原理、性能测试、字符串问题、算法、内存分配、热点代码、IO、并发，这八个方面。下面就让我们来讲讲我从书本中学到的对性能优化的理解。计算机执行原理代码从被编译到成为可执行文件也就是机器码，这个过程就是一个从本文字符串翻译成机器码的过程，当我们执行它们的时候，它可机器码被放入了内存，内存中也有分块，包括数据段、栈段、指令段。CPU在执行指令时是从内存中将指令送入CPU的，而执行指令的速度通常比读取内存的快很多，因此读取指令也成为了瓶颈的一种。CPU在读取指令时也并不会一行一行的读取，因为这样效率太差，取而代之的是它会把一大块内容读取到高速缓存从而加快执行速度，指令会顺序执行直到结束或有跳转。而内存芯片也有自己的工作原理，它相当于另一个CPU，它只有在顺序访问时才能在一个周期内完成，而访问一个非连续的位置则会花费更多周期。这里就涉及到了内存在访问时的形式，每次访问内存都是以某个大小为单位，例如x86机器，每次访问内存时都是以4个字节为单位访问，一个int整数为4个字节需要一次访问，但如果这个int整数内存没有对齐，那么可能就需要访问两次才能获得这个值，因为构成这个内存的物理结构可能是垮了两个物理内存字。不过请注意，现代编译器都会默认对对象和数据结构做内存对齐操作，除非我们告诉编译器某个数据结构不做内存对齐。对齐时编译器也会优化内存结构让高速缓存命中率提高，关于class的内存布局我们在《深度探索C++对象模型》总结中有详细的讲解。作者没有细说关于不对齐时内存访问的来龙去脉，不过我们来举个例子：[-][-][x][x][x][x][-][-]例如上面这个非对齐的内存空间，‘x’表示某个int变量占用的4个字节，‘-’表示其他，当CPU读取这个int整数时，其实是先读取[-][-][x][x]再读取[x][x][-][-]拼接完成后为[x][x][x][x]最后交给寄存器。实际上访问非内存对齐并没有我们想象的那么简单，一个内存实际上有很多个内存芯片共同组成。为了提高访问的带宽，通常会将存储地址分开放在不同的芯片上，例如上面位置0，1，2，3，这4个byte分别存放在芯片1，芯片2，芯片3，芯片4中，当需要它们时，可以一次性全部读取，即如下：偏移量/芯片存储空间   x1 x2 x3 x40 [-][x][x][x]1 [x][-][-][-]2 [-][-][-][-]3 [-][-][-][-]4 [-][-][-][-]图中x为要读取的数据，每一列为一个芯片负责的空间，每一行为一个偏移量。这就是说，内存实际上并不是完全以连续byte形式组织的，而是以偏移(offset)量给出具体地址。当我们读取[0][1][2][3]这4个byte数据时可以一次性读取，但如果从1开始读取1，2，3，4时就要多一次偏移(offset)的操作，即先让4个芯片读取偏移量为0时的数据，再让它们读取偏移量为1的数据。为了改善内存速度，高速缓存被大量运用，即我们说的L1、L2、L3、L4四级高速缓存，它们每一层的速度大约是下一层的10倍左右。当执行单位需要的内容不在高速缓存中时，需要从内存中加载数据到高速缓存中，并同时将一部分内容舍弃以换取足够的空间，通常会选择放弃的数据都是最近被使用频率比较低的数据。在读取一个不在高速缓存中的数据时通常会将临近的数据也被缓存起来，从访问概率上来说做了加速了数据访问，即概率上来说临近的数据访问概率比较高的特点。这意味着频繁被访问的数据和频繁被访问的周围附近的数据都会因为高速缓存而加速。不仅仅是变量数据，机器指令也是数据的一种，超远的if和goto跳转以及远地址function函数调用同样会让高速缓存失效，其原理是执行指令地址从一处跳到另一处导致执行指令不连续。内存的访问也会有不够的时候，这时虚拟内存带来了很大的便利，但也给性能带来了很大影响。在虚拟内存机制中，当内存不够时需要借用磁盘空间来扩充，这让内存制造出拥有充足物理空间的假象，将使用频率小的内存数据作为文件存放在磁盘上，当使用时再读区进内存同时更换部分内存到硬盘上，我们常称它们为内存swap操作。由于swap操作很费时，因此检测swap次数也常被纳入性能监控中。通常我们一个操作系统中有多个程序需要同时内存访问，而内存总线就只有一个，内存芯片必须一个个去完成CPU分配给它的任务，有时甚至是经常不连续的内存访问，由此看来，内存的读写负担是相当重的。如果未来有更多的处理器内核增加，而内存接口和读取速度没有增加的话，那么其实这些内核对性能的改善效果也是趋于递减的，因为虽然有多个CPU来处理指令，但内存并没有被加速。接着我们来看看线程和进程如何影响执行效率，由于操作系统会执行一个线程很短时间然后将上下文切换到其他线程或进程。导致在切换时会浪费掉很多时间，操作系统需要暂停当前的线程并且保存处理器中的寄存器到内存，然后为即将被执行的线程加载之前保存过的寄存器。如果新的线程的数据不在高速缓存中，那么还需要从内存中加载数据到高速缓存，因此上下文切换的代价比我们想象的高。这里做个小结，以上讲的都是些计算机执行原理，我们需要明白的原理才能真正明白优化背后的逻辑。首先内存效率没有我们想象那么快，非对齐内存会多一次开销(编译器通常都有做内存对齐)，指令远距离跳转和内存远距离访问都会让高速缓存命中丢失，频繁访问的数据和附近的数据会比较快，虚拟内存扩充了内存但swap时性能开销很大，多个进程和线程争夺内存使用权是性能瓶颈之一，太多线程和进程上下文切换代价较大，会导致执行效率降低。性能测试性能测试对于性能优化来说是关键的关键，就像作者提到的那样，我们不能靠猜来判断哪些代码需要优化，或者代码执行效率提升了多少不能由某个人说了算。那些具有最让人折服的优化技巧的开发人员都会系统地完成如下步骤：1.测试出哪些地方是可优化的，做出预测并记录预测。2.保留优化的代码记录3.用测试工具进行测量优化前后的数据对比4.保留实验结果并做详细的笔记。以上列的四项步骤是性能优化过程中必须不断实践的技能，现实中多数开发人员都想当然的去优化代码，而不是按照上面的方式有条不紊的进行优化，这是优化过程中最糟糕的一点，即不知道自己该从哪里开始优化，优化结束时不知道是否真的优化了优化了多少，有可能更加糟糕，过了段时间甚至记不起来优化了什么。除了实际的去测量和记录，我们在性能测试时要注意哪些关键点呢？作者给出了自己的经验。1.测量程序的启动时间，执行时间，退出时间。通常人们总是忘了启动和退出时间，这导致部分测量范围不够或者测量不准确。2.测量的数据和环境必须是可重复的。只有两个数据和环境是可重复的，才有可能让两次测量在同一个标准中进行。3.测量必须有一个标准和一致的范围。如果前后两次测量的环境、测量内容、测试的持续时间不一致，则测量出来的数据是无效的，这种情况下的任何优化数据都是可笑的。4.测量数据通常都是波动的，没有不波动的测量数据。因此我们需要通过反复测量多次给出平均值的方式来确定最后的数据。5.其他进程会影响测量结果。关闭其他会导致影响的进程，或者提高测量进程为最高级别。6.测量工具很重要测量工具包括类似Stopwatch方式的打点，抓取堆栈调用时间，内存分配，内存快照等方式。7.分析代码和测量运行时间是帮助找出可优化代码的两种有效途径。只分析代码是行不通的，只测量运行时间也不可行。要分析代码与测量相互迭代，分析后测量，测量后分析，以此方式不断找出可优化的代码。开发人员需要向同事和领导展示他们在性能优化中取得的进展，我们需要精准的测量和详细的记录，如果凭直觉进行优化，也不发表结果，或者发表了结果也会遭到质疑，这是因为他们分不清你到底是在用高度专业的直觉进行优化还是只是在碰运气。字符串问题这把字符串问题单独拎出来说是因为字符串问题比较大，也比较隐性，常常容易引起性能问题。字符串在概念上很简单，它就是一个字符数组，但是想要实现高效的字符串却非常不容易。这周太忙，暂时写到这里，下周继续…",
            "content_html": "<p>这本书给我的感受是，有技巧有细节也有许多不足，作者介绍了大部分程序上性能优化的方案和思路，也从原理上讲了性能问题的根本原理，但没能做得通俗易懂、深入浅出，书本有几处地方在故弄玄虚以及凑字数，也许是我的功力不足没能理解，这部分无法理解的杂乱无章的内容，可以留到以后再慢慢回顾。</p><p>整本书其实并不是针对C++写的，而是面向程序执行而效率写的，其他语言也一样通用。我结合我的经历和经验写下我的理解，以及我从书中学到的知识，或许过几年回头看会是另一番情景，但现在我需要把它们拎出来总结一下。</p><p>作者是一个有30多年编程经历的人，对编程依然保持的狂热兴趣，注意，他从未去过微软、谷歌等知名公司，这本书就是在这样的一个前提下写下的。</p><p>作者认为我们在优化程序的时候，很多时候都是靠‘猜测’而不是实际的去测试，这是一个比较大的问题。实际上我们并不知道某段程序是否有性能问题，因为有可能编译器已经将它优化了，或者某段程序在我们优化后是否真的有性能提升，因为很多时候我们只是肉眼去代码或是用脑袋去猜，不知道性能问题出在哪里就花费很多时间去优化这是不行的。而且我们也不能因为优化程序性能而破坏了程序的稳定性，如果从中制造出Bug导致产品崩溃那是非常得不偿失的。</p><p>另外他提出了一个比较重要的理念，即大部分性能问题在代码层面上的分布都是‘90/10规则’，也就是说，90%的性能问题出在10%的代码上。因此为了我们在做性能优化时提高效率，应该重点去找出这影响90%性能问题的那10%的代码，它们就是性能问题的重点。不过这10%的代码并不是集中在某处，而是分散在各个模块中，需要我们去找出来，因此按照我的经验和他的理念来理解性能优化的90/10规则，是说我们需要改动的代码远比整体代码要少的多，而我们必须精准的找出这部分少数代码并优化它。</p><p>原书内容比较繁杂，我又重新归类，我把它归类为，计算机执行原理、性能测试、字符串问题、算法、内存分配、热点代码、IO、并发，这八个方面。下面就让我们来讲讲我从书本中学到的对性能优化的理解。</p><h2 id=\"计算机执行原理\">计算机执行原理</h2><p>代码从被编译到成为可执行文件也就是机器码，这个过程就是一个从本文字符串翻译成机器码的过程，当我们执行它们的时候，它可机器码被放入了内存，内存中也有分块，包括数据段、栈段、指令段。</p><p>CPU在执行指令时是从内存中将指令送入CPU的，而执行指令的速度通常比读取内存的快很多，因此读取指令也成为了瓶颈的一种。CPU在读取指令时也并不会一行一行的读取，因为这样效率太差，取而代之的是它会把一大块内容读取到高速缓存从而加快执行速度，指令会顺序执行直到结束或有跳转。</p><p>而内存芯片也有自己的工作原理，它相当于另一个CPU，它只有在顺序访问时才能在一个周期内完成，而访问一个非连续的位置则会花费更多周期。</p><p>这里就涉及到了内存在访问时的形式，每次访问内存都是以某个大小为单位，例如x86机器，每次访问内存时都是以4个字节为单位访问，一个int整数为4个字节需要一次访问，但如果这个int整数内存没有对齐，那么可能就需要访问两次才能获得这个值，因为构成这个内存的物理结构可能是垮了两个物理内存字。</p><p>不过请注意，现代编译器都会默认对对象和数据结构做内存对齐操作，除非我们告诉编译器某个数据结构不做内存对齐。对齐时编译器也会优化内存结构让高速缓存命中率提高，关于class的内存布局我们在《深度探索C++对象模型》总结中有详细的讲解。</p><p>作者没有细说关于不对齐时内存访问的来龙去脉，不过我们来举个例子：</p><pre><code class=\"language-c\">[-][-][x][x][x][x][-][-]</code></pre><p>例如上面这个非对齐的内存空间，‘x’表示某个int变量占用的4个字节，‘-’表示其他，当CPU读取这个int整数时，其实是先读取</p><pre><code class=\"language-c\">[-][-][x][x]</code></pre><p>再读取</p><pre><code>[x][x][-][-]</code></pre><p>拼接完成后为</p><pre><code>[x][x][x][x]</code></pre><p>最后交给寄存器。实际上访问非内存对齐并没有我们想象的那么简单，一个内存实际上有很多个内存芯片共同组成。为了提高访问的带宽，通常会将存储地址分开放在不同的芯片上，例如上面位置0，1，2，3，这4个byte分别存放在芯片1，芯片2，芯片3，芯片4中，当需要它们时，可以一次性全部读取，即如下：</p><pre><code class=\"language-c\">偏移量/芯片存储空间   x1 x2 x3 x40 [-][x][x][x]1 [x][-][-][-]2 [-][-][-][-]3 [-][-][-][-]4 [-][-][-][-]</code></pre><p>图中x为要读取的数据，每一列为一个芯片负责的空间，每一行为一个偏移量。这就是说，内存实际上并不是完全以连续byte形式组织的，而是以偏移(offset)量给出具体地址。当我们读取[0][1][2][3]这4个byte数据时可以一次性读取，但如果从1开始读取1，2，3，4时就要多一次偏移(offset)的操作，即先让4个芯片读取偏移量为0时的数据，再让它们读取偏移量为1的数据。</p><p>为了改善内存速度，高速缓存被大量运用，即我们说的L1、L2、L3、L4四级高速缓存，它们每一层的速度大约是下一层的10倍左右。当执行单位需要的内容不在高速缓存中时，需要从内存中加载数据到高速缓存中，并同时将一部分内容舍弃以换取足够的空间，通常会选择放弃的数据都是最近被使用频率比较低的数据。在读取一个不在高速缓存中的数据时通常会将临近的数据也被缓存起来，从访问概率上来说做了加速了数据访问，即概率上来说临近的数据访问概率比较高的特点。</p><p>这意味着频繁被访问的数据和频繁被访问的周围附近的数据都会因为高速缓存而加速。不仅仅是变量数据，机器指令也是数据的一种，超远的if和goto跳转以及远地址function函数调用同样会让高速缓存失效，其原理是执行指令地址从一处跳到另一处导致执行指令不连续。</p><p>内存的访问也会有不够的时候，这时虚拟内存带来了很大的便利，但也给性能带来了很大影响。在虚拟内存机制中，当内存不够时需要借用磁盘空间来扩充，这让内存制造出拥有充足物理空间的假象，将使用频率小的内存数据作为文件存放在磁盘上，当使用时再读区进内存同时更换部分内存到硬盘上，我们常称它们为内存swap操作。由于swap操作很费时，因此检测swap次数也常被纳入性能监控中。</p><p>通常我们一个操作系统中有多个程序需要同时内存访问，而内存总线就只有一个，内存芯片必须一个个去完成CPU分配给它的任务，有时甚至是经常不连续的内存访问，由此看来，内存的读写负担是相当重的。如果未来有更多的处理器内核增加，而内存接口和读取速度没有增加的话，那么其实这些内核对性能的改善效果也是趋于递减的，因为虽然有多个CPU来处理指令，但内存并没有被加速。</p><p>接着我们来看看线程和进程如何影响执行效率，由于操作系统会执行一个线程很短时间然后将上下文切换到其他线程或进程。导致在切换时会浪费掉很多时间，操作系统需要暂停当前的线程并且保存处理器中的寄存器到内存，然后为即将被执行的线程加载之前保存过的寄存器。如果新的线程的数据不在高速缓存中，那么还需要从内存中加载数据到高速缓存，因此上下文切换的代价比我们想象的高。</p><h3 id=\"这里做个小结以上讲的都是些计算机执行原理我们需要明白的原理才能真正明白优化背后的逻辑首先内存效率没有我们想象那么快非对齐内存会多一次开销编译器通常都有做内存对齐指令远距离跳转和内存远距离访问都会让高速缓存命中丢失频繁访问的数据和附近的数据会比较快虚拟内存扩充了内存但swap时性能开销很大多个进程和线程争夺内存使用权是性能瓶颈之一太多线程和进程上下文切换代价较大会导致执行效率降低\">这里做个小结，以上讲的都是些计算机执行原理，我们需要明白的原理才能真正明白优化背后的逻辑。首先内存效率没有我们想象那么快，非对齐内存会多一次开销(编译器通常都有做内存对齐)，指令远距离跳转和内存远距离访问都会让高速缓存命中丢失，频繁访问的数据和附近的数据会比较快，虚拟内存扩充了内存但swap时性能开销很大，多个进程和线程争夺内存使用权是性能瓶颈之一，太多线程和进程上下文切换代价较大，会导致执行效率降低。</h3><h2 id=\"性能测试\">性能测试</h2><p>性能测试对于性能优化来说是关键的关键，就像作者提到的那样，我们不能靠猜来判断哪些代码需要优化，或者代码执行效率提升了多少不能由某个人说了算。</p><p>那些具有最让人折服的优化技巧的开发人员都会系统地完成如下步骤：</p><pre><code>1.测试出哪些地方是可优化的，做出预测并记录预测。2.保留优化的代码记录3.用测试工具进行测量优化前后的数据对比4.保留实验结果并做详细的笔记。</code></pre><p>以上列的四项步骤是性能优化过程中必须不断实践的技能，现实中多数开发人员都想当然的去优化代码，而不是按照上面的方式有条不紊的进行优化，这是优化过程中最糟糕的一点，即不知道自己该从哪里开始优化，优化结束时不知道是否真的优化了优化了多少，有可能更加糟糕，过了段时间甚至记不起来优化了什么。</p><p>除了实际的去测量和记录，我们在性能测试时要注意哪些关键点呢？作者给出了自己的经验。</p><pre><code>1.测量程序的启动时间，执行时间，退出时间。通常人们总是忘了启动和退出时间，这导致部分测量范围不够或者测量不准确。2.测量的数据和环境必须是可重复的。只有两个数据和环境是可重复的，才有可能让两次测量在同一个标准中进行。3.测量必须有一个标准和一致的范围。如果前后两次测量的环境、测量内容、测试的持续时间不一致，则测量出来的数据是无效的，这种情况下的任何优化数据都是可笑的。4.测量数据通常都是波动的，没有不波动的测量数据。因此我们需要通过反复测量多次给出平均值的方式来确定最后的数据。5.其他进程会影响测量结果。关闭其他会导致影响的进程，或者提高测量进程为最高级别。6.测量工具很重要测量工具包括类似Stopwatch方式的打点，抓取堆栈调用时间，内存分配，内存快照等方式。7.分析代码和测量运行时间是帮助找出可优化代码的两种有效途径。只分析代码是行不通的，只测量运行时间也不可行。要分析代码与测量相互迭代，分析后测量，测量后分析，以此方式不断找出可优化的代码。</code></pre><p>开发人员需要向同事和领导展示他们在性能优化中取得的进展，我们需要精准的测量和详细的记录，如果凭直觉进行优化，也不发表结果，或者发表了结果也会遭到质疑，这是因为他们分不清你到底是在用高度专业的直觉进行优化还是只是在碰运气。</p><h2 id=\"字符串问题\">字符串问题</h2><p>这把字符串问题单独拎出来说是因为字符串问题比较大，也比较隐性，常常容易引起性能问题。字符串在概念上很简单，它就是一个字符数组，但是想要实现高效的字符串却非常不容易。</p><h3 id=\"这周太忙暂时写到这里下周继续\">这周太忙，暂时写到这里，下周继续…</h3>",
            "url": "http://www.luzexi.com/2020/12/06/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B016",
            
            
            
            
            
            "date_published": "2020-12-06T00:00:00+08:00",
            "date_modified": "2020-12-06T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/12/02/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A16",
            "title": "给女儿的信(六)",
            "summary": "女儿 教育 亲情",
            "content_text": "Hi Sharon and Anne，爸爸好想你们，爸爸喜欢你们。爸爸还在深圳呢，要再过大概1个月才能回来呢。爸爸最近在给自己安排任务，以前爸爸常常等公司给我安排任务，这样会有个问题，爸爸总是会忙于公司的事，没有空去做自己想做的事情了。爸爸觉得这样不行，爸爸必须做些自己想做的事情，但又不能将公司的事情落下，于是爸爸就想到自己给自己安排任务，每天晚上都写下爸爸明天要做的事情，把公司的事和自己的事都兼顾起来，每天都做完他们，当然爸爸在指定任务的时候都是指定一天里能做完的，做不完的后面分成一天天的小任务去做。就像老师给你们安排作业一样，这些都是别人要你们做的，有些被动，做被动的事情的时候其实没有灵魂，不如反过来，每天晚上写下明天自己要做的事情，第二天的时候去做自己写下的列表上的事情，这样会更快乐哦。加油Sharon，加油Anne！",
            "content_html": "<p>Hi Sharon and Anne，爸爸好想你们，爸爸喜欢你们。爸爸还在深圳呢，要再过大概1个月才能回来呢。</p><p>爸爸最近在给自己安排任务，以前爸爸常常等公司给我安排任务，这样会有个问题，爸爸总是会忙于公司的事，没有空去做自己想做的事情了。爸爸觉得这样不行，爸爸必须做些自己想做的事情，但又不能将公司的事情落下，于是爸爸就想到自己给自己安排任务，每天晚上都写下爸爸明天要做的事情，把公司的事和自己的事都兼顾起来，每天都做完他们，当然爸爸在指定任务的时候都是指定一天里能做完的，做不完的后面分成一天天的小任务去做。就像老师给你们安排作业一样，这些都是别人要你们做的，有些被动，做被动的事情的时候其实没有灵魂，不如反过来，每天晚上写下明天自己要做的事情，第二天的时候去做自己写下的列表上的事情，这样会更快乐哦。</p><p>加油Sharon，加油Anne！</p>",
            "url": "http://www.luzexi.com/2020/12/02/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A16",
            
            
            
            
            
            "date_published": "2020-12-02T00:00:00+08:00",
            "date_modified": "2020-12-02T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/11/21/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B110",
            "title": "向内看自己(十) 反思自己的行为带给人的感觉",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "最近发现自己的行为和话语给别人的感觉很不好，这源于我自身的性格问题。我有很多性格问题，导致生活中、工作中在与人交往过程中就会遇到障碍或瓶颈。我很想弄清楚我到底出了什么问题，但一直没弄明白，于是我想好好剖析一下自己。也因为最近在学习冥想，这个看起来有点玄乎的词语，是我最近研究的内容，我会专门写一篇文章来详细说明我对它的理解与感受。我发现冥想最大的益处就是让我忽略杂念专注于当前所做的事，在专注过程中不断发现当前事物中以前没有被我发现的细节，这些细节很多时候都是关键中的关键。当然最重要的也是最大的问题是我自己本身，于是我边练习冥想技巧边来发现自己的问题。自身问题一，我常常会去要求别人却没有用心体会对方的感受，慢慢会引起别人的反感。自身问题二，我常常会以炫耀的口吻讲述自己的经历和想法，让对方感觉不愉快。自身问题三，我常常会想妥协而装做一副顺从的样子，让别人有了更多负担，也让事情进展有些尴尬。自身问题四，我常常心急如焚想立刻搞定某事而选择比较激进的做法，让人会觉得我不靠谱，或者不尊重他们。自身问题五，与人交流成为我了的负担，我宁愿自己辛苦点去搞定也不愿意或者说恐惧与人打交道。即使我知道这些问题的存在，我仍然不知道该如何去改进，因为我没有找到解决问题的方向。就像上学时一直喜欢玩耍没有好好学习一样，我知道好好学习的重要性，但就是坐不下来安静学习。我觉得是因为我没有get到某个点。这和我现在所面临的问题有点相似，明知道有问题，明知道该如何如何去做，但就是做不到。很多时候我们都是撞的很痛了才下定决心去改，但这时通常已经很迟了，我不想每次都等到我痛到骨子里了才去改。于是我问自己，我需要get什么点？我回忆了下，长大成人后喜欢上了自律和学习的过程，我为什么会有转变，我是怎么转变过来的。我依稀记得，长大成人后，逐渐喜欢上学习的起点，是因为我第一次获得学习上的成就感开始的，可能这个成就感是非常微不足道的一点点，但足以敲开了我对此感兴趣的大门。随着我不断深入研究，慢慢的我被一次次的成就感所激励着不断前进，许多正向的反馈在我的生活中不断冒出，中间也有些许负向的反馈，但由于相对正向反馈来说量少我还能克服它们。这个过程中最重要的是第一次正向反馈，当我感觉到自己的努力有了回报，我就更感兴趣去深入研究它们。如果在开始的时候，一次次又一次的正向反馈不断袭来，我就能感觉到我自己找对了方法，就像找到了金钥匙那样，不断向这个方向前进，直到遇到更大的瓶颈。当遇到更大的瓶颈时，我则需要更换思路和方法，如果没有找对思路和方法，则会继续原地踏步，常常会因为原地踏步时间太久而感到沮丧和气馁，因此而懈怠并且开始退步。想到这里，我想着能不能根据这个途径，先去找些改善的行动项做起来，从而获得正向反馈，再根据这个正向反馈来一步步改善我的行为。这当然是很难的，起步的时候更是艰难，特别是第一次的正向反馈可能需要一段比较长时间的积累，我需要保持耐心维持改善行为好一阵。路漫漫其修远兮，吾将上下而求索。希望大家一起加油同我一样来改善自己​",
            "content_html": "<p>最近发现自己的行为和话语给别人的感觉很不好，这源于我自身的性格问题。</p><p>我有很多性格问题，导致生活中、工作中在与人交往过程中就会遇到障碍或瓶颈。</p><p>我很想弄清楚我到底出了什么问题，但一直没弄明白，于是我想好好剖析一下自己。</p><p>也因为最近在学习冥想，这个看起来有点玄乎的词语，是我最近研究的内容，我会专门写一篇文章来详细说明我对它的理解与感受。</p><p>我发现冥想最大的益处就是让我忽略杂念专注于当前所做的事，在专注过程中不断发现当前事物中以前没有被我发现的细节，这些细节很多时候都是关键中的关键。</p><p>当然最重要的也是最大的问题是我自己本身，于是我边练习冥想技巧边来发现自己的问题。</p><p>自身问题一，我常常会去要求别人却没有用心体会对方的感受，慢慢会引起别人的反感。</p><p>自身问题二，我常常会以炫耀的口吻讲述自己的经历和想法，让对方感觉不愉快。</p><p>自身问题三，我常常会想妥协而装做一副顺从的样子，让别人有了更多负担，也让事情进展有些尴尬。</p><p>自身问题四，我常常心急如焚想立刻搞定某事而选择比较激进的做法，让人会觉得我不靠谱，或者不尊重他们。</p><p>自身问题五，与人交流成为我了的负担，我宁愿自己辛苦点去搞定也不愿意或者说恐惧与人打交道。</p><p>即使我知道这些问题的存在，我仍然不知道该如何去改进，因为我没有找到解决问题的方向。</p><p>就像上学时一直喜欢玩耍没有好好学习一样，我知道好好学习的重要性，但就是坐不下来安静学习。</p><p>我觉得是因为我没有get到某个点。这和我现在所面临的问题有点相似，明知道有问题，明知道该如何如何去做，但就是做不到。</p><p>很多时候我们都是撞的很痛了才下定决心去改，但这时通常已经很迟了，我不想每次都等到我痛到骨子里了才去改。</p><p>于是我问自己，我需要get什么点？</p><h4 id=\"我回忆了下长大成人后喜欢上了自律和学习的过程我为什么会有转变我是怎么转变过来的\">我回忆了下，长大成人后喜欢上了自律和学习的过程，我为什么会有转变，我是怎么转变过来的。</h4><h4 id=\"我依稀记得长大成人后逐渐喜欢上学习的起点是因为我第一次获得学习上的成就感开始的可能这个成就感是非常微不足道的一点点但足以敲开了我对此感兴趣的大门随着我不断深入研究慢慢的我被一次次的成就感所激励着不断前进许多正向的反馈在我的生活中不断冒出中间也有些许负向的反馈但由于相对正向反馈来说量少我还能克服它们\">我依稀记得，长大成人后，逐渐喜欢上学习的起点，是因为我第一次获得学习上的成就感开始的，可能这个成就感是非常微不足道的一点点，但足以敲开了我对此感兴趣的大门。随着我不断深入研究，慢慢的我被一次次的成就感所激励着不断前进，许多正向的反馈在我的生活中不断冒出，中间也有些许负向的反馈，但由于相对正向反馈来说量少我还能克服它们。</h4><h4 id=\"这个过程中最重要的是第一次正向反馈当我感觉到自己的努力有了回报我就更感兴趣去深入研究它们如果在开始的时候一次次又一次的正向反馈不断袭来我就能感觉到我自己找对了方法就像找到了金钥匙那样不断向这个方向前进直到遇到更大的瓶颈当遇到更大的瓶颈时我则需要更换思路和方法如果没有找对思路和方法则会继续原地踏步常常会因为原地踏步时间太久而感到沮丧和气馁因此而懈怠并且开始退步\">这个过程中最重要的是第一次正向反馈，当我感觉到自己的努力有了回报，我就更感兴趣去深入研究它们。如果在开始的时候，一次次又一次的正向反馈不断袭来，我就能感觉到我自己找对了方法，就像找到了金钥匙那样，不断向这个方向前进，直到遇到更大的瓶颈。当遇到更大的瓶颈时，我则需要更换思路和方法，如果没有找对思路和方法，则会继续原地踏步，常常会因为原地踏步时间太久而感到沮丧和气馁，因此而懈怠并且开始退步。</h4><h4 id=\"想到这里我想着能不能根据这个途径先去找些改善的行动项做起来从而获得正向反馈再根据这个正向反馈来一步步改善我的行为\">想到这里，我想着能不能根据这个途径，先去找些改善的行动项做起来，从而获得正向反馈，再根据这个正向反馈来一步步改善我的行为。</h4><h4 id=\"这当然是很难的起步的时候更是艰难特别是第一次的正向反馈可能需要一段比较长时间的积累我需要保持耐心维持改善行为好一阵\">这当然是很难的，起步的时候更是艰难，特别是第一次的正向反馈可能需要一段比较长时间的积累，我需要保持耐心维持改善行为好一阵。</h4><h4 id=\"路漫漫其修远兮吾将上下而求索\">路漫漫其修远兮，吾将上下而求索。</h4><h3 id=\"希望大家一起加油同我一样来改善自己\">希望大家一起加油同我一样来改善自己​</h3>",
            "url": "http://www.luzexi.com/2020/11/21/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B110",
            
            
            
            
            
            "date_published": "2020-11-21T00:00:00+08:00",
            "date_modified": "2020-11-21T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/11/20/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B014",
            "title": "读书笔记(十四) 《深度探索C++对象模型》",
            "summary": "读书 书 看书 读后感",
            "content_text": "看此书的起因是自己想更加深刻的了解底层，最底层的莫不过于汇编了，但只有汇编还不够，因为它需要上层工具语言编译器的支持，编译器怎么去编译程序的，决定了汇编的执行方向，理论上说汇编只是执行编译器编译后的程序内容，因此我认为编译器是关键所在。我们大多数人自认为自己已经把面向对象语言已经烂熟于心了，其实台面下的机制，如编译器合成的默认构造函数、对象内存布局等都不是很了解。我也是一样，我对编译器一块知识一直不是清晰，所以想通过这本书来了解我们平时编程时的底层的工作原理是什么。作者说第一句话就打动了我，让我认真看完了全书，他说“我的经验告诉我，如果一个程序员了解底层实现模型，他就能够写出效率较高的代码，自信心也比较高。一个人不应该用猜的方式，或者等待某位大师的宣判，才确定何时提供一个copy constructor 而何时不需要。这类问题的解答应该来自于我们自身对对象模型的了解。“不管我们是在使用C#、Java、C++，它们都是面相对象的编程语言，因此底层的原理都会有些相似性，特别是内存布局上。我也是抱着这种用C++内存布局去理解其他语言的心态去学习和研究这部分内容的。对象的内存布局一个普通的class，有成员变量、成员函数，静态变量，静态函数，关于它们我们可以话一张图，拿一个简单的Point来举例：\tclass Point\t成员变量 float x\t成员函数 int PointCount()\t静态变量 static int sMaxCount\t静态函数 static int GetMaxCount()假如我们实例化一个Point，即 Point * pt = new Point，Point的内存中为：\tfloat x没错，内存中只有一个浮点数变量的空间大小，那么其他的包括成员函数、静态变量、静态函数都不在Point实例内存中，它们在哪呢？它们被编译器编写在了代码段和数据段中，可以被所有Point实例共享的内存使用。我们知道一个可执行程序的内存分布，分为数据段、代码段、栈段，这三个基本都是静态不会被改变的空间段，其他还有中断表、堆内存空间等。class的成员函数、静态函数无论是否public还是private修饰，都会被放入代码段中，静态变量则被放入数据段中无论是否public还是private(放入数据段中的内容，每次取值都会做远距离寻址，相对近距离寻址会费一些，因为隔断了内存连续操作)，而成员变量例如Point中的x，无论它是public还是private都会被放入动态内存分配的内存块中。实际上计算机内存中、以及机器码中没有public和private之分，我们可以任意的取得任何内存中的内容没有限制，限制我们程序访问的，只是语言和编译器的语法检查器这两者为我们提供的语言方法和规则检查。当class有继承和多态后则有所不同当class有了继承后，通常都会有多态出现，即虚函数。让我们来举个例子说明：class Point{public:\tfloat x;\tvirtual int PointCount();}class Point2D : public Point{public:\tfloat y;\tvirtual int PointCount();\tvirtual void PrintPoint();}Point pt = new Point2D();加上继承和多态后，内存布局就有所变化，由于基类和子类都有虚函数，子类重载了函数后，我们在内存中就需要有一张表来存放所有虚函数，以便正确调用。如上Point和Point2D的关系，可以将一个Point2D实例内存看作如下结构：\t- virtual table 虚表地址 --------&gt;   Point2D的虚表空间\t\t\t\t\t\t\t\t\t\t- PointCount()地址\t\t\t\t\t\t\t\t\t\t- PrintPoint()地址\t- x\t- y和普通class不同的是，当我们有了多态后，我们的一个实例内存中除了数据外，还多了一个变量指向这个类的虚表空间，这个虚表空间已经被编译器编写在了数据段中，是一个静态的并且专门为Point2D制定的空间，这个空间中存放着指向类中所有虚函数地址，空间不会随着多个实例化而增多因为它只有一个，但每个Point2D实例的虚表指针指向着它（Point实例也是类似的内存布局）。（这里不得不讲一下struct和class的区别，其实它在不同语言中的语义和用途不太一样，在C++中可能大部分struct都是用来兼容c或当纯数据的内存结构的，很多class有的功能struct也同样能实现，但在其他语言则不同，比如在C#中的用途就是期望struct能更多的做些内存连续优化，因为它是复制类型数据结构，每次赋值和传递参数都会复制一份内存，除非使用引用关键字。）此时如果是Point实例则是\t- virtual table 虚表地址 --------&gt;   Point的虚表空间\t\t\t\t\t\t\t\t\t\t- PointCount()地址\t- x与Point2D相比，少了一个y变量，以及虚表空间中少了一个函数地址。(编译器编译中很多时候都会将许多我们看来是动态的访问变为静态，例如子类的强制转换(其实内存上没有做任何操作，只是通知编译器后面的操作是基于某个类开始的，使得编译器在编译时偏移地址较前面有所不同)、前面Point中的静态函数（程序在执行时就会直接跳到代码段的GetMaxCount这个函数的地址上而不会通过实例内存去找）、Templete会在编译期就将代码和指令生成完毕，以及一些编译器对代码的优化会直接将某个公式计算好以数字的形式呈现在机器码里，还有很多排错机制，其实编译器帮我们干了很多本该我们需要检查和手动指定的工作。)多重继承的内存布局更为复杂些，会带有好几个虚表地址在内存中，效率也更差，因为每一层的虚表都会间接性降低把处理搬到寄存器执行的优化，我们也不鼓励多重继承的写法，因此这里不做详细讲解。实例化后的类大小真的只有变量大小的总和，加一个虚标指针吗？还有内存对齐的规则。在32位计算机上，由于寄存器是32位、总线有32条、一次取内容为32位，因此每次取值时都会取得一个4字节的内存内容，编译器也会遵循32位字节对齐的方式去编译。例如：class A{\tint a; //4字节\tbool b; //1字节\tfloat c; //4字节\tdouble d; //8字节\tchar e; //1字节}\t[a 4字节]\t[b 1字节][填充3字节]\t[c 4字节]\t[d 8字节]\t[e 1字节][填充3字节]32位计算机中，此对象的内存空间为 4 +（1+3） + 4 + 8 + (1+3) = 24个字节。而在64位计算机中，以64位内存对齐的规则时：\t[a 4字节][b 1字节][填充3字节]\t[c 4字节][填充4字节]\t[d 8字节]\t[e 1字节][填充7字节]此对象实例的内存占用空间为 (4+1+3) + (4+4) + 8 + (1+7) = 32字节，在取a、b变量时可以一次取得，节省一次内存调度。对象在内存上对齐的越紧凑，能节省的内存调度次数就会越少，程序运行的性能也会因此提高。inline 内联除了对齐内存，inline也能让编译器优化函数，让函数执行更快。那么它是怎么优化的呢？一般而言，处理一个inline函数有两个阶段：1.分析函数，以决定函数是否具备inline能力。如果函数因其复杂度，或因其建构问题，被判断不可成为inline，它会被转为一个static函数，并在“被编译模块”内产生对应的函数定义。2.真正的inline函数在调用时展开操作，省去函数调用导致的推栈和入栈寄存器的操作，也一并优化了函数中的计算内容(更少的内存存取次数和更快更少的计算次数)。这也导致我们通常给予inline后并不清楚编译器是否真正将其视为inline去优化，只有我们进入汇编中才能看到是否真的实现了inline。inline具体会优化哪些方面呢？我们来举几个例子minval = min(val1, val2); //1minval = min(1024, 2048); //2minval = min(foo(), bar() +1); //3如果min是一个inline内联函数：第一行会被改为 minval = val1 &lt; val2 ? val1 : val2; 省去了函数调用。第二行会被改为 minval = 1024; 编译器直接离线计算好结果用常数代替函数调用。第三行会被改为int t1 = foo();int t2 = bar() + 1;minval = t1 &lt; t2 ? t1 : t2;增加了临时性的变量，从而替代内联的函数调用。inline函数中的局部变量加上inline自己增加的局部变量，在展开后可能会导致大量临时性的变量产生。inline函数对于封装提供了一种必要的支持，可以有效存取装于class中的nonpublic数据。它同时也是C程序中大量使用#define宏处理的一个安全代替品，但如果inline函数被调用太多次的话，会产生大量的扩展代码，使得程序集本身的大小暴涨。Template 模板C++ 中的Template 模板，在许多语言里也称为泛型。自从1991年加入到cfront 3.0之后深深改变了C++编程习惯。它被使用在编译期做些评估和生成代码的工作，也因而带来了重大的效率提升，同时也成为了程序员一个噩梦以及最挫败的主题。那么当我们声明了一个 template class、或者 template function时究竟会发生什么呢？其实什么都不会发生，如果我们不使用它的话，编译器就会忽略它什么都不干。有也只有当我们使用定义的template做事时，编译器才开始工作，我说的使用是指在我们在代码中使用了前面声明的 template class 或者 template function，而不光是定义。如果我们使用了一个指针，指向特定的实例，像这样：template&lt;class T&gt;class Point{public:\tvoid Print();private:\tT x,y,z;}Point&lt;float&gt; * ptr = 0;编译器依然什么都不回做，因为一个指向class object的指针本身并不是一个class object，编译器不需要知道与该class有关的任何成员数据或对象布局数据，它只是一个指针，至于指向什么并不重要。然而如果带template的class被实例化时，则编译器才真正开始为template产生代码，例如我们定义了一个实体而非指针：Point&lt;float&gt; origin;此时origin会被实例化，编译器也检查到了这种情况，则会启动template代码生成器为Point生成一个类，如下面代码生成格式：class Point_float{private:\tfloat x,y,z;}然而在编译器生成template代码类时，也并不会将所有template定义的类中的代码都生成出来，编译器只会在代码中生成被使用的函数或者可能使用的函数。例如上述中的Point_float就没有生成Print函数，因为我们并没有使用它。这样做的主要原因是，为空间和时间上的效率考虑，如果我们的template class中有100个函数，使用中的类型有10个，我们只使用了其中5个函数，那么原本会生成是100 * 10 = 1000个函数，现在编译器只会生成 5 * 10 = 50 个函数，其余的950个函数代码讲会被忽略。这大大节省了空间提升了编译效率。那么编译器是如何生成template代码的呢？首先要发现template使用情况，在.h和.cpp文件中寻找template使用情况，如果有使用则继续生成，否则忽略。其次编译器尝试模拟链接操作，检查看看哪一个函数真正需要，将真正需要的生成的函数提取出来，位它们生成具体的函数代码。最后编译器要阻止template function在多个.o文件中被生成出来，它会从链接器提供的支持中获取信息，只留下一份代码，其余的都将忽略。RTTI 执行期类型识别执行期类型识别(Runtime Type Identification)最初是由于支持异常处理(Exception Handling)而产生的，可以说它是异常处理的副产品，后来被大量的使用在执行期代码中。C++被吹毛求疵的一点就是，它缺乏一个保证安全的向下转换操作，只有在类型真的可以被转换的情况下，你才能够执行转换。想要实现安全的转换，则需要额外的类信息支持，于是就有了类信息(type information)来作为RTTI的保障。type_info是C++标准所定义的类型描述器的class名称，该class中放置着待索求的类型信息。虚表空间中的第一个空格就是指向type_info信息的地址。在现代C++编译器中，如果我们想要有RTTI功能，则class必须有虚函数或者基类有虚函数，即class Point{\tfloat x;\tvirtual int PointCount();};class Point2D: public Point {...};- Point2D 和 Point实例中的内存布局情况- virtual table 虚表地址 --------&gt;   Point2D的虚表空间\t\t\t\t\t\t\t\t\t- type_info ptr 类信息地址\t\t\t\t\t\t\t\t\t- PointCount()地址\t\t\t\t\t\t\t\t\t- PrintPoint()地址- x- yPoint2D和Point的​虚表头，都是type_info的信息地址，它们的type信息地址分别指向两个不同的type_info静态数据内存地址。这样看来，每次我们使用指针取得class object类型描述器时，其实就是通过虚表指针去取得类信息地址，即如下：((type_info)(pt-&gt;vptr[0]))-&gt;name(); //从虚表指针中的第一个槽位中取得类信息type_info object在C++标准下的定义为：class type_info{public:\tvirtual ~type_info();\tbool operator==(const type_info&amp;) const;\tbool operator!=(const type_info&amp;) const;\tbool before(const type_info&amp;) consnt;\tconst char* name() const;\tconst char* raw_name() const;//返回类名称的编码字符串private:    void *_m_data;    char _m_d_name[1];\ttype_info(const type_info&amp;);\ttype_info&amp; operator=(const type_info&amp;);}有了类信息，我们在做向下转换时，就可以用根据类信息来判断是否可以转换，即如下代码：Point2D pt2d = dynamic_cast&lt;Point2D&gt;(pt);相当于：Point2D pt2d = NULL;type_info type_pt2d = typeid(Point2D);type_info type_pt = typeid(Point);if(type_pt2d == type_pt || type_pt.before(&amp;type_pt2d)){\tpt2d = (Point2D)pt;}return pt2d;总结，class内存分布由成员变量+虚表指针组成，布局大小会根据计算机的内存对齐方式不同而不同。inline内联函数并不一样会真的内联，跟编译器根据函数的复杂度判断是否可以内联的，如果帧的内联了其优化会节省函数调用开始和计算次数开销。Template模板会根据template class使用情况生成代码，生成步骤是先判断是否有被使用-&gt;生成代码-&gt;去除重复。想要有RTTI执行期类型识别，则必须有额外的信息空间支持，即在C++中我们必须有虚继承或基类有虚继承才能获得RTTI的功能，甚至我们可以自己写一个执行期类型识别功能来替代标准C++，有了执行期类型识别功能，我们在向下转换时才更加安全，即dynamic_cast调用时先判断是否类型一致或者是父类的情况，再转换否则为NULL。",
            "content_html": "<p>看此书的起因是自己想更加深刻的了解底层，最底层的莫不过于汇编了，但只有汇编还不够，因为它需要上层工具语言编译器的支持，编译器怎么去编译程序的，决定了汇编的执行方向，理论上说汇编只是执行编译器编译后的程序内容，因此我认为编译器是关键所在。</p><p>我们大多数人自认为自己已经把面向对象语言已经烂熟于心了，其实台面下的机制，如编译器合成的默认构造函数、对象内存布局等都不是很了解。我也是一样，我对编译器一块知识一直不是清晰，所以想通过这本书来了解我们平时编程时的底层的工作原理是什么。</p><p>作者说第一句话就打动了我，让我认真看完了全书，他说“我的经验告诉我，如果一个程序员了解底层实现模型，他就能够写出效率较高的代码，自信心也比较高。一个人不应该用猜的方式，或者等待某位大师的宣判，才确定何时提供一个copy constructor 而何时不需要。这类问题的解答应该来自于我们自身对对象模型的了解。“</p><p>不管我们是在使用C#、Java、C++，它们都是面相对象的编程语言，因此底层的原理都会有些相似性，特别是内存布局上。我也是抱着这种用C++内存布局去理解其他语言的心态去学习和研究这部分内容的。</p><h2 id=\"对象的内存布局\">对象的内存布局</h2><p>一个普通的class，有成员变量、成员函数，静态变量，静态函数，关于它们我们可以话一张图，拿一个简单的Point来举例：</p><pre><code>\tclass Point\t成员变量 float x\t成员函数 int PointCount()\t静态变量 static int sMaxCount\t静态函数 static int GetMaxCount()</code></pre><p>假如我们实例化一个Point，即 Point * pt = new Point，Point的内存中为：</p><pre><code>\tfloat x</code></pre><p>没错，内存中只有一个浮点数变量的空间大小，那么其他的包括成员函数、静态变量、静态函数都不在Point实例内存中，它们在哪呢？</p><h4 id=\"它们被编译器编写在了代码段和数据段中可以被所有point实例共享的内存使用\">它们被编译器编写在了代码段和数据段中，可以被所有Point实例共享的内存使用。</h4><p>我们知道一个可执行程序的内存分布，分为数据段、代码段、栈段，这三个基本都是静态不会被改变的空间段，其他还有中断表、堆内存空间等。</p><p>class的成员函数、静态函数无论是否public还是private修饰，都会被放入代码段中，静态变量则被放入数据段中无论是否public还是private(放入数据段中的内容，每次取值都会做远距离寻址，相对近距离寻址会费一些，因为隔断了内存连续操作)，而成员变量例如Point中的x，无论它是public还是private都会被放入动态内存分配的内存块中。</p><p>实际上计算机内存中、以及机器码中没有public和private之分，我们可以任意的取得任何内存中的内容没有限制，限制我们程序访问的，只是语言和编译器的语法检查器这两者为我们提供的语言方法和规则检查。</p><h4 id=\"当class有继承和多态后则有所不同\">当class有继承和多态后则有所不同</h4><p>当class有了继承后，通常都会有多态出现，即虚函数。让我们来举个例子说明：</p><pre><code class=\"language-c++\">class Point{public:\tfloat x;\tvirtual int PointCount();}class Point2D : public Point{public:\tfloat y;\tvirtual int PointCount();\tvirtual void PrintPoint();}Point pt = new Point2D();</code></pre><p>加上继承和多态后，内存布局就有所变化，由于基类和子类都有虚函数，子类重载了函数后，我们在内存中就需要有一张表来存放所有虚函数，以便正确调用。</p><p>如上Point和Point2D的关系，可以将一个Point2D实例内存看作如下结构：</p><pre><code>\t- virtual table 虚表地址 --------&gt;   Point2D的虚表空间\t\t\t\t\t\t\t\t\t\t- PointCount()地址\t\t\t\t\t\t\t\t\t\t- PrintPoint()地址\t- x\t- y</code></pre><p>和普通class不同的是，当我们有了多态后，我们的一个实例内存中除了数据外，还多了一个变量指向这个类的虚表空间，这个虚表空间已经被编译器编写在了数据段中，是一个静态的并且专门为Point2D制定的空间，这个空间中存放着指向类中所有虚函数地址，空间不会随着多个实例化而增多因为它只有一个，但每个Point2D实例的虚表指针指向着它（Point实例也是类似的内存布局）。</p><p>（这里不得不讲一下struct和class的区别，其实它在不同语言中的语义和用途不太一样，在C++中可能大部分struct都是用来兼容c或当纯数据的内存结构的，很多class有的功能struct也同样能实现，但在其他语言则不同，比如在C#中的用途就是期望struct能更多的做些内存连续优化，因为它是复制类型数据结构，每次赋值和传递参数都会复制一份内存，除非使用引用关键字。）</p><p>此时如果是Point实例则是</p><pre><code>\t- virtual table 虚表地址 --------&gt;   Point的虚表空间\t\t\t\t\t\t\t\t\t\t- PointCount()地址\t- x</code></pre><p>与Point2D相比，少了一个y变量，以及虚表空间中少了一个函数地址。</p><p>(编译器编译中很多时候都会将许多我们看来是动态的访问变为静态，例如子类的强制转换(其实内存上没有做任何操作，只是通知编译器后面的操作是基于某个类开始的，使得编译器在编译时偏移地址较前面有所不同)、前面Point中的静态函数（程序在执行时就会直接跳到代码段的GetMaxCount这个函数的地址上而不会通过实例内存去找）、Templete会在编译期就将代码和指令生成完毕，以及一些编译器对代码的优化会直接将某个公式计算好以数字的形式呈现在机器码里，还有很多排错机制，其实编译器帮我们干了很多本该我们需要检查和手动指定的工作。)</p><p>多重继承的内存布局更为复杂些，会带有好几个虚表地址在内存中，效率也更差，因为每一层的虚表都会间接性降低把处理搬到寄存器执行的优化，我们也不鼓励多重继承的写法，因此这里不做详细讲解。</p><h4 id=\"实例化后的类大小真的只有变量大小的总和加一个虚标指针吗还有内存对齐的规则\">实例化后的类大小真的只有变量大小的总和，加一个虚标指针吗？还有内存对齐的规则。</h4><p>在32位计算机上，由于寄存器是32位、总线有32条、一次取内容为32位，因此每次取值时都会取得一个4字节的内存内容，编译器也会遵循32位字节对齐的方式去编译。</p><p>例如：</p><pre><code class=\"language-c++\">class A{\tint a; //4字节\tbool b; //1字节\tfloat c; //4字节\tdouble d; //8字节\tchar e; //1字节}</code></pre><pre><code>\t[a 4字节]\t[b 1字节][填充3字节]\t[c 4字节]\t[d 8字节]\t[e 1字节][填充3字节]</code></pre><p>32位计算机中，此对象的内存空间为 4 +（1+3） + 4 + 8 + (1+3) = 24个字节。</p><p>而在64位计算机中，以64位内存对齐的规则时：</p><pre><code>\t[a 4字节][b 1字节][填充3字节]\t[c 4字节][填充4字节]\t[d 8字节]\t[e 1字节][填充7字节]</code></pre><p>此对象实例的内存占用空间为 (4+1+3) + (4+4) + 8 + (1+7) = 32字节，在取a、b变量时可以一次取得，节省一次内存调度。</p><h4 id=\"对象在内存上对齐的越紧凑能节省的内存调度次数就会越少程序运行的性能也会因此提高\">对象在内存上对齐的越紧凑，能节省的内存调度次数就会越少，程序运行的性能也会因此提高。</h4><h2 id=\"inline-内联\">inline 内联</h2><p>除了对齐内存，inline也能让编译器优化函数，让函数执行更快。那么它是怎么优化的呢？</p><p>一般而言，处理一个inline函数有两个阶段：</p><p>1.分析函数，以决定函数是否具备inline能力。</p><p>如果函数因其复杂度，或因其建构问题，被判断不可成为inline，它会被转为一个static函数，并在“被编译模块”内产生对应的函数定义。</p><p>2.真正的inline函数在调用时展开操作，省去函数调用导致的推栈和入栈寄存器的操作，也一并优化了函数中的计算内容(更少的内存存取次数和更快更少的计算次数)。</p><p>这也导致我们通常给予inline后并不清楚编译器是否真正将其视为inline去优化，只有我们进入汇编中才能看到是否真的实现了inline。</p><h3 id=\"inline具体会优化哪些方面呢我们来举几个例子\">inline具体会优化哪些方面呢？我们来举几个例子</h3><pre><code class=\"language-c++\">minval = min(val1, val2); //1minval = min(1024, 2048); //2minval = min(foo(), bar() +1); //3</code></pre><p>如果min是一个inline内联函数：</p><p>第一行会被改为 minval = val1 &lt; val2 ? val1 : val2; 省去了函数调用。</p><p>第二行会被改为 minval = 1024; 编译器直接离线计算好结果用常数代替函数调用。</p><p>第三行会被改为</p><pre><code class=\"language-c++\">int t1 = foo();int t2 = bar() + 1;minval = t1 &lt; t2 ? t1 : t2;</code></pre><p>增加了临时性的变量，从而替代内联的函数调用。inline函数中的局部变量加上inline自己增加的局部变量，在展开后可能会导致大量临时性的变量产生。</p><p>inline函数对于封装提供了一种必要的支持，可以有效存取装于class中的nonpublic数据。它同时也是C程序中大量使用#define宏处理的一个安全代替品，但如果inline函数被调用太多次的话，会产生大量的扩展代码，使得程序集本身的大小暴涨。</p><h2 id=\"template-模板\">Template 模板</h2><p>C++ 中的Template 模板，在许多语言里也称为泛型。自从1991年加入到cfront 3.0之后深深改变了C++编程习惯。它被使用在编译期做些评估和生成代码的工作，也因而带来了重大的效率提升，同时也成为了程序员一个噩梦以及最挫败的主题。</p><h4 id=\"那么当我们声明了一个-template-class或者-template-function时究竟会发生什么呢\">那么当我们声明了一个 template class、或者 template function时究竟会发生什么呢？</h4><p>其实什么都不会发生，如果我们不使用它的话，编译器就会忽略它什么都不干。有也只有当我们使用定义的template做事时，编译器才开始工作，我说的使用是指在我们在代码中使用了前面声明的 template class 或者 template function，而不光是定义。</p><p>如果我们使用了一个指针，指向特定的实例，像这样：</p><pre><code class=\"language-c++\">template&lt;class T&gt;class Point{public:\tvoid Print();private:\tT x,y,z;}Point&lt;float&gt; * ptr = 0;</code></pre><p>编译器依然什么都不回做，因为一个指向class object的指针本身并不是一个class object，编译器不需要知道与该class有关的任何成员数据或对象布局数据，它只是一个指针，至于指向什么并不重要。</p><p>然而如果带template的class被实例化时，则编译器才真正开始为template产生代码，例如我们定义了一个实体而非指针：</p><pre><code class=\"language-c++\">Point&lt;float&gt; origin;</code></pre><p>此时origin会被实例化，编译器也检查到了这种情况，则会启动template代码生成器为Point<float>生成一个类，如下面代码生成格式：</float></p><pre><code class=\"language-c++\">class Point_float{private:\tfloat x,y,z;}</code></pre><p>然而在编译器生成template代码类时，也并不会将所有template定义的类中的代码都生成出来，编译器只会在代码中生成被使用的函数或者可能使用的函数。例如上述中的Point_float就没有生成Print函数，因为我们并没有使用它。</p><h4 id=\"这样做的主要原因是为空间和时间上的效率考虑如果我们的template-class中有100个函数使用中的类型有10个我们只使用了其中5个函数那么原本会生成是100--10--1000个函数现在编译器只会生成-5--10--50-个函数其余的950个函数代码讲会被忽略这大大节省了空间提升了编译效率\">这样做的主要原因是，为空间和时间上的效率考虑，如果我们的template class中有100个函数，使用中的类型有10个，我们只使用了其中5个函数，那么原本会生成是100 * 10 = 1000个函数，现在编译器只会生成 5 * 10 = 50 个函数，其余的950个函数代码讲会被忽略。这大大节省了空间提升了编译效率。</h4><h4 id=\"那么编译器是如何生成template代码的呢\">那么编译器是如何生成template代码的呢？</h4><p>首先要发现template使用情况，在.h和.cpp文件中寻找template使用情况，如果有使用则继续生成，否则忽略。</p><p>其次编译器尝试模拟链接操作，检查看看哪一个函数真正需要，将真正需要的生成的函数提取出来，位它们生成具体的函数代码。</p><p>最后编译器要阻止template function在多个.o文件中被生成出来，它会从链接器提供的支持中获取信息，只留下一份代码，其余的都将忽略。</p><h2 id=\"rtti-执行期类型识别\">RTTI 执行期类型识别</h2><p>执行期类型识别(Runtime Type Identification)最初是由于支持异常处理(Exception Handling)而产生的，可以说它是异常处理的副产品，后来被大量的使用在执行期代码中。</p><p>C++被吹毛求疵的一点就是，它缺乏一个保证安全的向下转换操作，只有在类型真的可以被转换的情况下，你才能够执行转换。想要实现安全的转换，则需要额外的类信息支持，于是就有了类信息(type information)来作为RTTI的保障。</p><p>type_info是C++标准所定义的类型描述器的class名称，该class中放置着待索求的类型信息。虚表空间中的第一个空格就是指向type_info信息的地址。</p><p>在现代C++编译器中，如果我们想要有RTTI功能，则class必须有虚函数或者基类有虚函数，即</p><pre><code class=\"language-c++\">class Point{\tfloat x;\tvirtual int PointCount();};class Point2D: public Point {...};</code></pre><pre><code class=\"language-c++\">- Point2D 和 Point实例中的内存布局情况- virtual table 虚表地址 --------&gt;   Point2D的虚表空间\t\t\t\t\t\t\t\t\t- type_info ptr 类信息地址\t\t\t\t\t\t\t\t\t- PointCount()地址\t\t\t\t\t\t\t\t\t- PrintPoint()地址- x- y</code></pre><p>Point2D和Point的​虚表头，都是type_info的信息地址，它们的type信息地址分别指向两个不同的type_info静态数据内存地址。这样看来，每次我们使用指针取得class object类型描述器时，其实就是通过虚表指针去取得类信息地址，即如下：</p><pre><code class=\"language-c++\">((type_info)(pt-&gt;vptr[0]))-&gt;name(); //从虚表指针中的第一个槽位中取得类信息</code></pre><p>type_info object在C++标准下的定义为：</p><pre><code class=\"language-c++\">class type_info{public:\tvirtual ~type_info();\tbool operator==(const type_info&amp;) const;\tbool operator!=(const type_info&amp;) const;\tbool before(const type_info&amp;) consnt;\tconst char* name() const;\tconst char* raw_name() const;//返回类名称的编码字符串private:    void *_m_data;    char _m_d_name[1];\ttype_info(const type_info&amp;);\ttype_info&amp; operator=(const type_info&amp;);}</code></pre><p>有了类信息，我们在做向下转换时，就可以用根据类信息来判断是否可以转换，即如下代码：</p><pre><code class=\"language-c++\">Point2D pt2d = dynamic_cast&lt;Point2D&gt;(pt);</code></pre><p>相当于：</p><pre><code class=\"language-c++\">Point2D pt2d = NULL;type_info type_pt2d = typeid(Point2D);type_info type_pt = typeid(Point);if(type_pt2d == type_pt || type_pt.before(&amp;type_pt2d)){\tpt2d = (Point2D)pt;}return pt2d;</code></pre><h4 id=\"总结class内存分布由成员变量虚表指针组成布局大小会根据计算机的内存对齐方式不同而不同inline内联函数并不一样会真的内联跟编译器根据函数的复杂度判断是否可以内联的如果帧的内联了其优化会节省函数调用开始和计算次数开销template模板会根据template-class使用情况生成代码生成步骤是先判断是否有被使用-生成代码-去除重复想要有rtti执行期类型识别则必须有额外的信息空间支持即在c中我们必须有虚继承或基类有虚继承才能获得rtti的功能甚至我们可以自己写一个执行期类型识别功能来替代标准c有了执行期类型识别功能我们在向下转换时才更加安全即dynamic_cast调用时先判断是否类型一致或者是父类的情况再转换否则为null\">总结，class内存分布由成员变量+虚表指针组成，布局大小会根据计算机的内存对齐方式不同而不同。inline内联函数并不一样会真的内联，跟编译器根据函数的复杂度判断是否可以内联的，如果帧的内联了其优化会节省函数调用开始和计算次数开销。Template模板会根据template class使用情况生成代码，生成步骤是先判断是否有被使用-&gt;生成代码-&gt;去除重复。想要有RTTI执行期类型识别，则必须有额外的信息空间支持，即在C++中我们必须有虚继承或基类有虚继承才能获得RTTI的功能，甚至我们可以自己写一个执行期类型识别功能来替代标准C++，有了执行期类型识别功能，我们在向下转换时才更加安全，即dynamic_cast调用时先判断是否类型一致或者是父类的情况，再转换否则为NULL。</h4>",
            "url": "http://www.luzexi.com/2020/11/20/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B014",
            
            
            
            
            
            "date_published": "2020-11-20T00:00:00+08:00",
            "date_modified": "2020-11-20T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/11/13/%E5%AE%89%E5%8D%93%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7Simpleperf%E8%AF%A6%E8%A7%A3",
            "title": "安卓性能分析工具Simpleperf详解与应用",
            "summary": "unity3d gameplay 性能优化 总结",
            "content_text": "本文关注三个问题：Simpleperf的工作原始里是什么？Simpleperf该如何使用？它如何在Unity项目上使用？关注Simpleperf的缘由是，虽然一直使用Xcode Intruments 、 Unity profiler 、Perfdog、以及一些自制的工具（自定义打点+内存快照）来做性能分析，但一直缺少专门针对安卓设备的的函数耗时分析。偶尔间搜到Simpleperf这么好的分析工具，于是开始研究 Simpleperf，最后把它用到项目中去并且建立起日常性能监控流水线。Simpleperf是Android开源项目（AOSP）的一部分， 是一个 CPU 性能剖析工具，可以剖析 Android 客户端 Java 和 C++ 代码，是 Android NDK 工具的一部分。其包含两部分：Simpleperf可执行文件（命令行）和python脚本。python脚本整合了Simpleperf可执行文件（命令行）和adb的功能，让Simpleperf使用起来更加方便快捷。Simpleperf中可执行文件：Simpleperf中整合了命令行的Python脚本：Simpleper可执行文件支持安卓5.0及以上的系统，但python脚本只支持安卓7.0及以上的系统。这里的Python脚本不仅封装了命令行可执行文件的操作，同时提供了生成测试数据报告，线程消耗图，火焰调用图等功能。由于数据报告生成方面，Simpleperf命令行本身只支持文本数据报告的生成，因此要生成可视化的数据报告，还得依靠python。所以我把数据分析和数据报告生成给拆分开来，直接用可执行文件去执行性能分析的任务，让Simpleperf可以支持更低的安卓系统。性能分析完毕后，再用python脚本对所得的数据文件来生成可视化的数据报告，以及文本数据报告。其中，数据报告也分成两部分，一部分是文本数据报告，在生成文本数据报告后，对文本数据报告中的数据再加工和筛选，筛选出关键的信息上传到性能数据平台作为每日的性能日常报告，另一部分是火焰图和消耗图的数据报告，用于查看更细致的函数消耗分析。我用一个demo做实验，demo的程序就是每帧运行1000w次浮点数和随机数计算，作为实验性能分析数据：以下展示的是性能报告生成后的火焰图和文本数据报告：下面就来详细介绍一下，如何使用Simpleperf来做性能分析。功能概要Simpleperf主要功能分为事件摘要（stat），记录样本(record)和生成数据报告(report)三个功能。stat功能给出了在一个时间段内被分析的进程中发生了多少事件的摘要。record功能必须在Android系统中运行，当Simpleperf运行分析时会不断将数据写入到性能数据文件，所以它可以随时停止，随时拷贝分析数据文件。分析完毕后我们可以需要将输出数据文件拷贝到PC上，再使用report功能解析成数据报告。前提条件Simpleperf需要有权限去做性能采样，所以想要使用Simpleperf做性能分析，需要满足4个条件中的一个就够了。1.debug版本，即在manifest中设置了android::debuggable=”true”，并且允许JNI 测试，并且C/C++没有被编译器优化过。也就是Unity构建的Development Build版本。2.release版本，如果安卓10以上则需要manifest中加入就可以。3.release版本，如果是安卓8以上则在manifest中加入&lt;application android::debuggable=”true” …&gt;后，把wrap.sh 放入 lib/arch 文件夹中。 wrap.sh 会在没有debug标志给ART的情况下跑app。4.release版本，你的手机是root过的，有root权限Simpleperf就会畅通无阻。底层原理现代CPU具有一个硬件组件，称为性能监控单元(PMU)。PMU具有一些硬件计数器，计数一些诸如经历了多少次CPU周期，执行了多少条指令，或发生了多少次缓存未命中等事件。Linux内核将这些硬件计数器包装到硬件perf事件 (hardware perf events)中。此外，Linux内核还提供了独立于硬件的软件事件和跟踪点事件。Linux内核通过 perf_event_open 系统调用将这些都暴露给了用户空间，这正是simpleperf所使用的机制。linux系统在各个层都封装了一套性能接口。图中perf字样的接口主要位于CPU层，系统调用层，系统库层，调度层，内存层中。我们通过simpleperf list可以查看受支持的事件类型，有硬件事件类型和软件事件类型之分。硬件事件借助现代CPU中的PMU（性能监控单元）部件实现采样，比如cpu-cycle，cache-miss等硬件级数据，kernel会开启PMU的计数器去采集对应进程的数据。PMU是CPU中的部件，专门用于性能监控，CPU在运行时可以收集关于处理器和内存的各种统计信息。对于处理器来说这些统计信息中的事件非常有用，这样我们可以利用它们来调试或者剖析代码。软件事件则是系统内核kernel层自行实现，统计操作系统相关性能事件在各个功能模块中，如内存对齐断层事件、线程context-switch上下文切换事件、cpu时钟事件、cpu迁移事件、页断层事件等等。事实上SimplePerf就是通过linux系统的perf_event_open接口来获得这些perf数据。linux内核perf_event_open接口 https://www.man7.org/linux/man-pages/man2/perf_event_open.2.html那么stat和record是如何工作的呢？Stat命令给出时1.simpleperf调用linux系统接口启用perf分析。2.设置监控事件和周期。3.Linux 内核在调度到被分析进程时启用计数器。4.simpleperf从内核读取计数器，并报告计数器摘要。cmd_stat.cpp 471行 StatCommand::Runhttps://android.googlesource.com/platform/system/extras/+/master/simpleperf/cmd_stat.cppRecord 命令给出时1.Simpleperf通过对linux内核接口调用加入监控，锁定监控进程对象。2.调用linux系统接口启用perf分析。3.Simpleperf在simpleperf 和 linux 内核之间创建共享映射缓冲区。4.设置需要监控的事件和采样频率，告诉linux 内核将样本数据转储到映射缓冲区。5.开启线程不断监控共享映射缓冲区，从映射缓冲区读取数据并写入到数据文件。cmd_record.cpp 455行 RecordCommand::PrepareRecordinghttps://android.googlesource.com/platform/system/extras/+/master/simpleperf/cmd_record.cpp这里有2个重要的节点我们深入了解下，这两个重点能映射出Simpleperf是如何在Linux系统工作的？第一个，它是如何与Linux操作系统通信的？通常进程之间通信都是通过共享内存进行，Simpleperf通过创建映射缓冲区来与系统共享一块内存。那么它是怎么创建和映射的呢？我们来看看源码中的关键函数，CreateMappedBuffer创建映射缓冲区，其中mmap为Linux系统接口，调用它使得进程之间通过映射同一块内存(或文件)实现共享内存。Simpleperf调用mmap创建指定的共享内存大小，设置读写权限，设置共享标记，以及设置通道句柄。有了共享内存，接着Simpleperf需要告诉与系统把性能数据放入共享缓冲中去。其中ioctl为Linux系统接口，是设备驱动程序中对设备的I/O通道进行管理的函数。所谓对I/O通道进行管理，就是对设备的一些特性进行控制，例如串口的 传输波特率、马达的转速等等。Simpleperf调用ioctl告诉Linux系统将性能数据写入通道缓存。ioctl调用格式为：int ioctl(int fd, ind cmd, …)；我们可以通过ioctl的命令码(cmd)告诉Linux驱动程序我们想做什么，至于怎么解释这些命令和怎么实现这些命令，这都是驱动程序要做的事情。现在我们使用cmd命令码PERF_EVENT_IOC_SET_OUTPUT，告诉系统让内核把性能相关事件数据放入指定缓冲中。第二个，它是如何得到Linux操作系统的性能信息的？Simpleperf通过创建一个线程来监控数据并记录数据，它就是RecordReadThread。这个线程也会不断的接收用户的命令输入，来暂停和恢复数据记录。创建线程后，接着实例化需要监控的事件，并开始记录和监控。此线程不断循环监控共享内存的状况，同时记录性能数据：第一个问题中我们说，Simpleperf通过Linux系统接口mmap申请共享内存，再通过Linux系统接口ioctl告诉内核把性能监控的数据放在共享内存中。由于Linux系统在各个层都封装了一套perf性能接口，于是在接下来的程序运行中，Linux内核将这些perf事件 (perf events)数据放入Simpleperf设置的共享内存中。而Simpleperf又开启了一个线程来不断监控是否有数据加入，并将它们放入自己缓存中去，最后再通知主线程适当的时候将这些数据写入本地文件。执行性能分析record 命令行说明性能分析命令执行步骤现在我们用Simpleperf命令行的形式来对安卓系统进行C/C++的性能分析：1.将simpleperf可执行文件放入安卓系统adb push .\\ndk21\\simpleperf\\bin\\android\\arm64\\simpleperf /data/local/tmp2.将可执行文件设置为可执行文件adb shell chmod a+x /data/local/tmp/simpleperf3.开始执行分析，这里设定一个99秒的持续时间。也可以设定为99999秒，然后用杀进程的方式来终止分析。因为我们前面说过，simpleperf是逐步写入数据文件的，数据文件随时保持完整性。adb shell /data/local/tmp/simpleperf record -o /data/local/tmp/perf.data -g --app com.xxx.xxx --duration 99 -f 8004.停止分析adb shell pkill -l 2 simpleperf5.将分析数据文件拷贝出来adb pull /data/local/tmp/perf.data .\\report_data\\report\\perf.data生成数据报告步骤有了Simpleperf生成的性能数据后，我们就可以对这份性能数据文件进行分析并生成数据报告。生成报告前，我们首先需要准备符号表。为什么要准备符号表呢，因为这样就可以通过，分析数据中调用地址映射到具体的函数名。这些都由Simpleperf帮我们完成，只是我们需要为此准备这个带符号表的so。Unity引擎带符号表so的放在Unity的安装目录下打完apk包后带符号的il2cpp的so在项目的Temp目录下面：有了这些准备接下我们来开始讲生成数据报告的操作步骤：1.准备符号表把包地址打印出来，因为真正的包地址可能会在你知道的包名后面加些字符串adb shell pm path com.xxxx.xxx &gt; tmp_appinfo.txt把符号表拷贝过去到./binary_cache/data/app/com.xxx.xxxx/lib/arm(或者arm64)/里去python:cp_src1 = 'libil2cpp.so.debug'cp_target1 = './binary_cache/data/app/com.xxx.xxxx/lib/arm/libil2cpp.so'if os.path.exists(cp_src1):    shutil.copy(cp_src1, cp_target1)这里只拷贝了il2cpp的，至少还需要拷贝带符号的libunity.so。符号表是simpleperf用来查找调用函数名的。Simpleperf是怎么查到函数名的呢，它是通过调用地址与符号表中的函数名对应关系来获得所调用的函数名的。我们可以用Simpleperf解析后数据，打开文本数据获得调用地址，来查看到底是怎么回事。举个例子，我们查看数据报告中的88.31%的耗时占比函数调用库指令地址为83cb7c：在汇编工具IDA中加载libil2cpp带符号的so文件，查看到83cb7c地址恰好是在Random调用地址上：也就是说，有88.31%的消耗在Random.Range这个函数上。Simpleperf就是通过指令调用地址来获取符号表中的函数名的，通过调用地址和符号表上的函数名对齐后得到最终的函数名。2.生成普通数据报告python .\\ndk21\\simpleperf\\report.py -i .\\perf.data -o .\\report.txt -n --full-callgraph --symfs .\\binary_cache3.生成调用者耗时分布数据报告python .\\ndk21\\simpleperf\\report.py -i .\\perf.data -o .\\report.caller.txt -g caller --full-callgraph --symfs .\\binary_cache4.生成被调用者耗时分布数据报告python .\\ndk21\\simpleperf\\report.py -i .\\perf.data -o .\\report.callee.txt -g callee --full-callgraph --symfs .\\binary_cache最后生成的文本数据如下图：生成火焰图和消耗图1.用simpleperf提供的report_html.py生成可视图python .\\ndk21\\simpleperf\\report_html.py -i .\\perf.data -o .\\report.html --binary_filter .\\binary_cache2.拷贝可视图网页需要用到的js文件copy  \".\\ndk21\\simpleperf\\report_html.js\" \".\\report_html.js\"日常性能监控流程建设：那么我们是否可以将Simpleperf运用到日常性能监控中去呢？经过Simpleperf的性能分析后，我们得到了性能数据文本数据，我们可以对这个文本类型的数据文件再解析，然后将我们需要的重要的函数性能数据加入到后台数据库中，并在每日自动化性能测试报告中体现出来。我们来看看上图中，生成出来的性能数据格式。根据性能数据格式，百分比、采样次数、线程名、库文件名、调用函数名的格式，我们可以将数据解析到内存中，并用http的方式上传到web后台。web后台对数据加工后，可以用趋势图的形式在后台页面上展现出来。例如下面的样例图：参考文献：Simpleperf官方地址：https://android.googlesource.com/platform/system/extras/+/master/simpleperf/doc/README.md#executable-commands-referenceSimpleperf源码地址：https://android.googlesource.com/platform/system/extras/+/master/simpleperf/《SimplePerf 安卓客户端性能剖析及自动化性能测试》http://km.oa.com/articles/show/466087?kmref=search&amp;from_page=1&amp;no=1《Simpleperf介绍》https://blog.csdn.net/tq08g2z/article/details/77311712",
            "content_html": "<h3 id=\"本文关注三个问题simpleperf的工作原始里是什么simpleperf该如何使用它如何在unity项目上使用\">本文关注三个问题：Simpleperf的工作原始里是什么？Simpleperf该如何使用？它如何在Unity项目上使用？</h3><p>关注Simpleperf的缘由是，虽然一直使用Xcode Intruments 、 Unity profiler 、Perfdog、以及一些自制的工具（自定义打点+内存快照）来做性能分析，但一直缺少专门针对安卓设备的的函数耗时分析。偶尔间搜到Simpleperf这么好的分析工具，于是开始研究 Simpleperf，最后把它用到项目中去并且建立起日常性能监控流水线。</p><h4 id=\"simpleperf是android开源项目aosp的一部分-是一个-cpu-性能剖析工具可以剖析-android-客户端-java-和-c-代码是-android-ndk-工具的一部分其包含两部分simpleperf可执行文件命令行和python脚本\">Simpleperf是Android开源项目（AOSP）的一部分， 是一个 CPU 性能剖析工具，可以剖析 Android 客户端 Java 和 C++ 代码，是 Android NDK 工具的一部分。其包含两部分：Simpleperf可执行文件（命令行）和python脚本。</h4><p>python脚本整合了Simpleperf可执行文件（命令行）和adb的功能，让Simpleperf使用起来更加方便快捷。</p><p>Simpleperf中可执行文件：</p><p><img src=\"/assets/simpleperf/image7.png\" alt=\"1\" /><img src=\"/assets/simpleperf/image21.png\" alt=\"2\" /></p><p>Simpleperf中整合了命令行的Python脚本：</p><p><img src=\"/assets/simpleperf/image23.png\" alt=\"3\" /></p><h4 id=\"simpleper可执行文件支持安卓50及以上的系统但python脚本只支持安卓70及以上的系统\">Simpleper可执行文件支持安卓5.0及以上的系统，但python脚本只支持安卓7.0及以上的系统。</h4><p>这里的Python脚本不仅封装了命令行可执行文件的操作，同时提供了生成测试数据报告，线程消耗图，火焰调用图等功能。由于数据报告生成方面，Simpleperf命令行本身只支持文本数据报告的生成，因此要生成可视化的数据报告，还得依靠python。</p><h4 id=\"所以我把数据分析和数据报告生成给拆分开来直接用可执行文件去执行性能分析的任务让simpleperf可以支持更低的安卓系统性能分析完毕后再用python脚本对所得的数据文件来生成可视化的数据报告以及文本数据报告\">所以我把数据分析和数据报告生成给拆分开来，直接用可执行文件去执行性能分析的任务，让Simpleperf可以支持更低的安卓系统。性能分析完毕后，再用python脚本对所得的数据文件来生成可视化的数据报告，以及文本数据报告。</h4><h4 id=\"其中数据报告也分成两部分一部分是文本数据报告在生成文本数据报告后对文本数据报告中的数据再加工和筛选筛选出关键的信息上传到性能数据平台作为每日的性能日常报告另一部分是火焰图和消耗图的数据报告用于查看更细致的函数消耗分析\">其中，数据报告也分成两部分，一部分是文本数据报告，在生成文本数据报告后，对文本数据报告中的数据再加工和筛选，筛选出关键的信息上传到性能数据平台作为每日的性能日常报告，另一部分是火焰图和消耗图的数据报告，用于查看更细致的函数消耗分析。</h4><p>我用一个demo做实验，demo的程序就是每帧运行1000w次浮点数和随机数计算，作为实验性能分析数据：</p><p><img src=\"/assets/simpleperf/image3.png\" alt=\"4\" /></p><p>以下展示的是性能报告生成后的火焰图和文本数据报告：</p><p><img src=\"/assets/simpleperf/image19.png\" alt=\"5\" /></p><p><img src=\"/assets/simpleperf/image12.png\" alt=\"6\" /></p><p><img src=\"/assets/simpleperf/image9.png\" alt=\"7\" /></p><p>下面就来详细介绍一下，如何使用Simpleperf来做性能分析。</p><h3 id=\"功能概要\">功能概要</h3><p>Simpleperf主要功能分为事件摘要（stat），记录样本(record)和生成数据报告(report)三个功能。stat功能给出了在一个时间段内被分析的进程中发生了多少事件的摘要。record功能必须在Android系统中运行，当Simpleperf运行分析时会不断将数据写入到性能数据文件，所以它可以随时停止，随时拷贝分析数据文件。分析完毕后我们可以需要将输出数据文件拷贝到PC上，再使用report功能解析成数据报告。</p><h3 id=\"前提条件\">前提条件</h3><p>Simpleperf需要有权限去做性能采样，所以想要使用Simpleperf做性能分析，需要满足4个条件中的一个就够了。</p><p>1.debug版本，即在manifest中设置了android::debuggable=”true”，并且允许JNI 测试，并且C/C++没有被编译器优化过。也就是Unity构建的Development Build版本。</p><p>2.release版本，如果安卓10以上则需要manifest中加入<profileable android:shell=\"true\"></profileable>就可以。</p><p>3.release版本，如果是安卓8以上则在manifest中加入&lt;application android::debuggable=”true” …&gt;后，把wrap.sh 放入 lib/arch 文件夹中。 wrap.sh 会在没有debug标志给ART的情况下跑app。</p><p>4.release版本，你的手机是root过的，有root权限Simpleperf就会畅通无阻。</p><h3 id=\"底层原理\">底层原理</h3><p>现代CPU具有一个硬件组件，称为性能监控单元(PMU)。PMU具有一些硬件计数器，计数一些诸如经历了多少次CPU周期，执行了多少条指令，或发生了多少次缓存未命中等事件。</p><p>Linux内核将这些硬件计数器包装到硬件perf事件 (hardware perf events)中。此外，Linux内核还提供了独立于硬件的软件事件和跟踪点事件。Linux内核通过 perf_event_open 系统调用将这些都暴露给了用户空间，这正是simpleperf所使用的机制。</p><p><img src=\"/assets/simpleperf/image25.png\" alt=\"8\" /></p><p>linux系统在各个层都封装了一套性能接口。图中perf字样的接口主要位于CPU层，系统调用层，系统库层，调度层，内存层中。我们通过simpleperf list可以查看受支持的事件类型，有硬件事件类型和软件事件类型之分。</p><p><img src=\"/assets/simpleperf/image6.png\" alt=\"9\" /></p><p><img src=\"/assets/simpleperf/image1.png\" alt=\"10\" /></p><p>硬件事件借助现代CPU中的PMU（性能监控单元）部件实现采样，比如cpu-cycle，cache-miss等硬件级数据，kernel会开启PMU的计数器去采集对应进程的数据。</p><h5 id=\"pmu是cpu中的部件专门用于性能监控cpu在运行时可以收集关于处理器和内存的各种统计信息对于处理器来说这些统计信息中的事件非常有用这样我们可以利用它们来调试或者剖析代码\">PMU是CPU中的部件，专门用于性能监控，CPU在运行时可以收集关于处理器和内存的各种统计信息。对于处理器来说这些统计信息中的事件非常有用，这样我们可以利用它们来调试或者剖析代码。</h5><h5 id=\"软件事件则是系统内核kernel层自行实现统计操作系统相关性能事件在各个功能模块中如内存对齐断层事件线程context-switch上下文切换事件cpu时钟事件cpu迁移事件页断层事件等等\">软件事件则是系统内核kernel层自行实现，统计操作系统相关性能事件在各个功能模块中，如内存对齐断层事件、线程context-switch上下文切换事件、cpu时钟事件、cpu迁移事件、页断层事件等等。</h5><p>事实上SimplePerf就是通过linux系统的perf_event_open接口来获得这些perf数据。</p><p><img src=\"/assets/simpleperf/image17.png\" alt=\"11\" /></p><p>linux内核perf_event_open接口 https://www.man7.org/linux/man-pages/man2/perf_event_open.2.html</p><h3 id=\"那么stat和record是如何工作的呢\">那么stat和record是如何工作的呢？</h3><h4 id=\"stat命令给出时\">Stat命令给出时</h4><p>1.simpleperf调用linux系统接口启用perf分析。</p><p>2.设置监控事件和周期。</p><p>3.Linux 内核在调度到被分析进程时启用计数器。</p><p>4.simpleperf从内核读取计数器，并报告计数器摘要。</p><p>cmd_stat.cpp 471行 StatCommand::Run</p><p>https://android.googlesource.com/platform/system/extras/+/master/simpleperf/cmd_stat.cpp</p><h4 id=\"record-命令给出时\">Record 命令给出时</h4><p>1.Simpleperf通过对linux内核接口调用加入监控，锁定监控进程对象。</p><p>2.调用linux系统接口启用perf分析。</p><p>3.Simpleperf在simpleperf 和 linux 内核之间创建共享映射缓冲区。</p><p>4.设置需要监控的事件和采样频率，告诉linux 内核将样本数据转储到映射缓冲区。</p><p>5.开启线程不断监控共享映射缓冲区，从映射缓冲区读取数据并写入到数据文件。</p><p>cmd_record.cpp 455行 RecordCommand::PrepareRecording</p><p>https://android.googlesource.com/platform/system/extras/+/master/simpleperf/cmd_record.cpp</p><h3 id=\"这里有2个重要的节点我们深入了解下这两个重点能映射出simpleperf是如何在linux系统工作的\">这里有2个重要的节点我们深入了解下，这两个重点能映射出Simpleperf是如何在Linux系统工作的？</h3><h3 id=\"第一个它是如何与linux操作系统通信的\">第一个，它是如何与Linux操作系统通信的？</h3><p>通常进程之间通信都是通过共享内存进行，Simpleperf通过创建映射缓冲区来与系统共享一块内存。那么它是怎么创建和映射的呢？</p><p>我们来看看源码中的关键函数，CreateMappedBuffer创建映射缓冲区，其中mmap为Linux系统接口，调用它使得进程之间通过映射同一块内存(或文件)实现共享内存。Simpleperf调用mmap创建指定的共享内存大小，设置读写权限，设置共享标记，以及设置通道句柄。</p><p><img src=\"/assets/simpleperf/image13.png\" alt=\"12\" /></p><p>有了共享内存，接着Simpleperf需要告诉与系统把性能数据放入共享缓冲中去。</p><p>其中ioctl为Linux系统接口，是设备驱动程序中对设备的I/O通道进行管理的函数。所谓对I/O通道进行管理，就是对设备的一些特性进行控制，例如串口的 传输波特率、马达的转速等等。</p><p>Simpleperf调用ioctl告诉Linux系统将性能数据写入通道缓存。</p><p><img src=\"/assets/simpleperf/image2.png\" alt=\"13\" /></p><p>ioctl调用格式为：</p><pre><code class=\"language-c\">int ioctl(int fd, ind cmd, …)；</code></pre><p>我们可以通过ioctl的命令码(cmd)告诉Linux驱动程序我们想做什么，至于怎么解释这些命令和怎么实现这些命令，这都是驱动程序要做的事情。现在我们使用cmd命令码PERF_EVENT_IOC_SET_OUTPUT，告诉系统让内核把性能相关事件数据放入指定缓冲中。</p><p><img src=\"/assets/simpleperf/image20.png\" alt=\"14\" /></p><h3 id=\"第二个它是如何得到linux操作系统的性能信息的\">第二个，它是如何得到Linux操作系统的性能信息的？</h3><p>Simpleperf通过创建一个线程来监控数据并记录数据，它就是RecordReadThread。</p><p><img src=\"/assets/simpleperf/image11.png\" alt=\"14\" /></p><p>这个线程也会不断的接收用户的命令输入，来暂停和恢复数据记录。</p><p>创建线程后，接着实例化需要监控的事件，并开始记录和监控。</p><p><img src=\"/assets/simpleperf/image10.png\" alt=\"15\" /></p><p>此线程不断循环监控共享内存的状况，同时记录性能数据：</p><p><img src=\"/assets/simpleperf/image24.png\" alt=\"16\" /></p><h4 id=\"第一个问题中我们说simpleperf通过linux系统接口mmap申请共享内存再通过linux系统接口ioctl告诉内核把性能监控的数据放在共享内存中由于linux系统在各个层都封装了一套perf性能接口于是在接下来的程序运行中linux内核将这些perf事件-perf-events数据放入simpleperf设置的共享内存中而simpleperf又开启了一个线程来不断监控是否有数据加入并将它们放入自己缓存中去最后再通知主线程适当的时候将这些数据写入本地文件\">第一个问题中我们说，Simpleperf通过Linux系统接口mmap申请共享内存，再通过Linux系统接口ioctl告诉内核把性能监控的数据放在共享内存中。由于Linux系统在各个层都封装了一套perf性能接口，于是在接下来的程序运行中，Linux内核将这些perf事件 (perf events)数据放入Simpleperf设置的共享内存中。而Simpleperf又开启了一个线程来不断监控是否有数据加入，并将它们放入自己缓存中去，最后再通知主线程适当的时候将这些数据写入本地文件。</h4><h2 id=\"执行性能分析\">执行性能分析</h2><h3 id=\"record-命令行说明\">record 命令行说明</h3><p><img src=\"/assets/simpleperf/image16.png\" alt=\"17\" /></p><h3 id=\"性能分析命令执行步骤\">性能分析命令执行步骤</h3><p>现在我们用Simpleperf命令行的形式来对安卓系统进行C/C++的性能分析：</p><p>1.将simpleperf可执行文件放入安卓系统</p><pre><code class=\"language-sh\">adb push .\\ndk21\\simpleperf\\bin\\android\\arm64\\simpleperf /data/local/tmp</code></pre><p>2.将可执行文件设置为可执行文件</p><pre><code class=\"language-sh\">adb shell chmod a+x /data/local/tmp/simpleperf</code></pre><p>3.开始执行分析，这里设定一个99秒的持续时间。也可以设定为99999秒，然后用杀进程的方式来终止分析。因为我们前面说过，simpleperf是逐步写入数据文件的，数据文件随时保持完整性。</p><pre><code class=\"language-sh\">adb shell /data/local/tmp/simpleperf record -o /data/local/tmp/perf.data -g --app com.xxx.xxx --duration 99 -f 800</code></pre><p>4.停止分析</p><pre><code class=\"language-sh\">adb shell pkill -l 2 simpleperf</code></pre><p>5.将分析数据文件拷贝出来</p><pre><code class=\"language-sh\">adb pull /data/local/tmp/perf.data .\\report_data\\report\\perf.data</code></pre><h3 id=\"生成数据报告步骤\">生成数据报告步骤</h3><p>有了Simpleperf生成的性能数据后，我们就可以对这份性能数据文件进行分析并生成数据报告。</p><h4 id=\"生成报告前我们首先需要准备符号表\">生成报告前，我们首先需要准备符号表。</h4><h4 id=\"为什么要准备符号表呢因为这样就可以通过分析数据中调用地址映射到具体的函数名这些都由simpleperf帮我们完成只是我们需要为此准备这个带符号表的so\">为什么要准备符号表呢，因为这样就可以通过，分析数据中调用地址映射到具体的函数名。这些都由Simpleperf帮我们完成，只是我们需要为此准备这个带符号表的so。</h4><p>Unity引擎带符号表so的放在Unity的安装目录下</p><p><img src=\"/assets/simpleperf/image8.png\" alt=\"1\" /></p><p>打完apk包后带符号的il2cpp的so在项目的Temp目录下面：</p><p><img src=\"/assets/simpleperf/image5.png\" alt=\"1\" /></p><p>有了这些准备接下我们来开始讲生成数据报告的操作步骤：</p><p><img src=\"/assets/simpleperf/image14.png\" alt=\"1\" /></p><p>1.准备符号表</p><p>把包地址打印出来，因为真正的包地址可能会在你知道的包名后面加些字符串</p><pre><code class=\"language-sh\">adb shell pm path com.xxxx.xxx &gt; tmp_appinfo.txt</code></pre><p>把符号表拷贝过去到./binary_cache/data/app/com.xxx.xxxx/lib/arm(或者arm64)/里去</p><pre><code class=\"language-python\">python:cp_src1 = 'libil2cpp.so.debug'cp_target1 = './binary_cache/data/app/com.xxx.xxxx/lib/arm/libil2cpp.so'if os.path.exists(cp_src1):    shutil.copy(cp_src1, cp_target1)</code></pre><p>这里只拷贝了il2cpp的，至少还需要拷贝带符号的libunity.so。符号表是simpleperf用来查找调用函数名的。</p><h4 id=\"simpleperf是怎么查到函数名的呢它是通过调用地址与符号表中的函数名对应关系来获得所调用的函数名的我们可以用simpleperf解析后数据打开文本数据获得调用地址来查看到底是怎么回事\">Simpleperf是怎么查到函数名的呢，它是通过调用地址与符号表中的函数名对应关系来获得所调用的函数名的。我们可以用Simpleperf解析后数据，打开文本数据获得调用地址，来查看到底是怎么回事。</h4><p>举个例子，我们查看数据报告中的88.31%的耗时占比函数调用库指令地址为83cb7c：</p><p><img src=\"/assets/simpleperf/image18.png\" alt=\"1\" /></p><p>在汇编工具IDA中加载libil2cpp带符号的so文件，查看到83cb7c地址恰好是在Random调用地址上：</p><p><img src=\"/assets/simpleperf/image4.png\" alt=\"1\" /></p><h4 id=\"也就是说有8831的消耗在randomrange这个函数上simpleperf就是通过指令调用地址来获取符号表中的函数名的通过调用地址和符号表上的函数名对齐后得到最终的函数名\">也就是说，有88.31%的消耗在Random.Range这个函数上。Simpleperf就是通过指令调用地址来获取符号表中的函数名的，通过调用地址和符号表上的函数名对齐后得到最终的函数名。</h4><p>2.生成普通数据报告</p><pre><code class=\"language-sh\">python .\\ndk21\\simpleperf\\report.py -i .\\perf.data -o .\\report.txt -n --full-callgraph --symfs .\\binary_cache</code></pre><p>3.生成调用者耗时分布数据报告</p><pre><code class=\"language-shs\">python .\\ndk21\\simpleperf\\report.py -i .\\perf.data -o .\\report.caller.txt -g caller --full-callgraph --symfs .\\binary_cache</code></pre><p>4.生成被调用者耗时分布数据报告</p><pre><code class=\"language-sh\">python .\\ndk21\\simpleperf\\report.py -i .\\perf.data -o .\\report.callee.txt -g callee --full-callgraph --symfs .\\binary_cache</code></pre><p>最后生成的文本数据如下图：</p><p><img src=\"/assets/simpleperf/image9.png\" alt=\"1\" /></p><h3 id=\"生成火焰图和消耗图\">生成火焰图和消耗图</h3><p>1.用simpleperf提供的report_html.py生成可视图</p><pre><code class=\"language-sh\">python .\\ndk21\\simpleperf\\report_html.py -i .\\perf.data -o .\\report.html --binary_filter .\\binary_cache</code></pre><p>2.拷贝可视图网页需要用到的js文件</p><pre><code class=\"language-sh\">copy  \".\\ndk21\\simpleperf\\report_html.js\" \".\\report_html.js\"</code></pre><p><img src=\"/assets/simpleperf/image12.png\" alt=\"1\" /></p><h3 id=\"日常性能监控流程建设\">日常性能监控流程建设：</h3><p>那么我们是否可以将Simpleperf运用到日常性能监控中去呢？</p><p>经过Simpleperf的性能分析后，我们得到了性能数据文本数据，我们可以对这个文本类型的数据文件再解析，然后将我们需要的重要的函数性能数据加入到后台数据库中，并在每日自动化性能测试报告中体现出来。</p><p><img src=\"/assets/simpleperf/image22.png\" alt=\"1\" /></p><p>我们来看看上图中，生成出来的性能数据格式。根据性能数据格式，百分比、采样次数、线程名、库文件名、调用函数名的格式，我们可以将数据解析到内存中，并用http的方式上传到web后台。web后台对数据加工后，可以用趋势图的形式在后台页面上展现出来。例如下面的样例图：</p><p><img src=\"/assets/simpleperf/image15.png\" alt=\"1\" /></p><h3 id=\"参考文献\">参考文献：</h3><p>Simpleperf官方地址：</p><p>https://android.googlesource.com/platform/system/extras/+/master/simpleperf/doc/README.md#executable-commands-reference</p><p>Simpleperf源码地址：</p><p>https://android.googlesource.com/platform/system/extras/+/master/simpleperf/</p><p>《SimplePerf 安卓客户端性能剖析及自动化性能测试》</p><p>http://km.oa.com/articles/show/466087?kmref=search&amp;from_page=1&amp;no=1</p><p>《Simpleperf介绍》</p><p>https://blog.csdn.net/tq08g2z/article/details/77311712</p>",
            "url": "http://www.luzexi.com/2020/11/13/%E5%AE%89%E5%8D%93%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%B7%A5%E5%85%B7Simpleperf%E8%AF%A6%E8%A7%A3",
            
            
            
            "tags": ["Unity3D","前端技术"],
            
            "date_published": "2020-11-13T00:00:00+08:00",
            "date_modified": "2020-11-13T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/11/04/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B19",
            "title": "向内看自己(九) 慌乱的内心世界",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "来深圳快1年了，我以为我会适应的很快，但恰恰相反。我感觉自己像一个惊弓之鸟，被很多事情震惊到了，包括，今年的疫情、远离亲人、陌生的城市、周围很多牛人、项目重要而又紧迫、孩子们慢慢长大了、感觉自己肩负的责任又重了一些。好几次我都迫不及待的坐飞机回家看看老婆孩子，多休息几天跟她们多呆几天是几天，感觉自己在逃避。这让我想起了幼年时自己被送去武术学校的那段回忆。父母想给我一些锻炼的机会，他们打听到10公里外有个武术学校可以在暑假时间里收一些学生锻炼一下意志力，于是将我送去了那里。那段时间我很害怕，不知道为何，感觉自己被丢到了一个无人关心的地方，虽然后来我慢慢适应了，但两星期后还是忍不住逃了回来。这段回忆好像我现在的样子，恐慌不安，犹如惊弓之鸟，童年的阴影困住了我。所以有时我很苦恼，像是被自己所设的陷阱困住了。​长大后我才知道每个人都有这样那样大大小小的童年阴影，起先我一直责怪父母给我了一个不好的童年，自从自己当了父母，特别是看了《自卑与超越》之后，才明朗了些，才知道这些童年阴影无法避免，作为父母在这个社会生存，很多时候也是生不由己，没有人是容易的。现在轮到自己了，我成为了别人的父母。我已经在社会上独立了，但仍然被这个社会中的小事所很震惊，我想对于这种恐慌我的父母在我这个岁数时也有过同样的经历。想到这一层时，我对自己孩子的教育和关心有更加深刻的理解，我不想犯父母的错误，同时很多错误也无法避免。我该如何去补救和行动，我想我应该更努力的去关心她们，感受她们的心灵，并引导她们往好的方向发展。虽然我在很远的地方不能陪伴她们，但我想我也可以做些力所能及的事情作为补救。说到自己恐慌，大多数时候是因为压力导致的，压力导致焦虑，焦虑又破坏了我原本的行动准则，没有了行动准则就变得紊乱没有方向。其实都是自己的问题，是我忘了初心。​于是我深深的问了自己一下，我的初心是什么？第一反应给我的答案是，我的初心是学习，学习是我最大的愿望，我很享受学习的时间，包括学习如何学习，学习具体的知识和技能，以及学习如何运用所学到的。我希望自己不忘初心，不断学习，学习知识，学习心态，学习与他人交流，学习如何认识自己等等等等，这是我最终想要的。",
            "content_html": "<p>来深圳快1年了，我以为我会适应的很快，但恰恰相反。我感觉自己像一个惊弓之鸟，被很多事情震惊到了，包括，今年的疫情、远离亲人、陌生的城市、周围很多牛人、项目重要而又紧迫、孩子们慢慢长大了、感觉自己肩负的责任又重了一些。</p><p>好几次我都迫不及待的坐飞机回家看看老婆孩子，多休息几天跟她们多呆几天是几天，感觉自己在逃避。</p><p>这让我想起了幼年时自己被送去武术学校的那段回忆。父母想给我一些锻炼的机会，他们打听到10公里外有个武术学校可以在暑假时间里收一些学生锻炼一下意志力，于是将我送去了那里。那段时间我很害怕，不知道为何，感觉自己被丢到了一个无人关心的地方，虽然后来我慢慢适应了，但两星期后还是忍不住逃了回来。</p><p>这段回忆好像我现在的样子，恐慌不安，犹如惊弓之鸟，童年的阴影困住了我。所以有时我很苦恼，像是被自己所设的陷阱困住了。</p><p>​长大后我才知道每个人都有这样那样大大小小的童年阴影，起先我一直责怪父母给我了一个不好的童年，自从自己当了父母，特别是看了《自卑与超越》之后，才明朗了些，才知道这些童年阴影无法避免，作为父母在这个社会生存，很多时候也是生不由己，没有人是容易的。</p><p>现在轮到自己了，我成为了别人的父母。我已经在社会上独立了，但仍然被这个社会中的小事所很震惊，我想对于这种恐慌我的父母在我这个岁数时也有过同样的经历。</p><p>想到这一层时，我对自己孩子的教育和关心有更加深刻的理解，我不想犯父母的错误，同时很多错误也无法避免。我该如何去补救和行动，我想我应该更努力的去关心她们，感受她们的心灵，并引导她们往好的方向发展。虽然我在很远的地方不能陪伴她们，但我想我也可以做些力所能及的事情作为补救。</p><p>说到自己恐慌，大多数时候是因为压力导致的，压力导致焦虑，焦虑又破坏了我原本的行动准则，没有了行动准则就变得紊乱没有方向。</p><p>其实都是自己的问题，是我忘了初心。</p><p>​于是我深深的问了自己一下，我的初心是什么？第一反应给我的答案是，我的初心是学习，学习是我最大的愿望，我很享受学习的时间，包括学习如何学习，学习具体的知识和技能，以及学习如何运用所学到的。</p><p>我希望自己不忘初心，不断学习，学习知识，学习心态，学习与他人交流，学习如何认识自己等等等等，这是我最终想要的。</p>",
            "url": "http://www.luzexi.com/2020/11/04/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B19",
            
            
            
            
            
            "date_published": "2020-11-04T00:00:00+08:00",
            "date_modified": "2020-11-04T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/11/02/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A15",
            "title": "给女儿的信(五)",
            "summary": "女儿 教育 亲情",
            "content_text": "Hi Sharon Anne，又有1个月没见到你们，爸爸好想你们。爸爸最近工作很忙，也碰到了一些问题，想跟你们说说。爸爸的这家公司里有很多比爸爸厉害很多的人，每天他们都跟爸爸一起做事情。他们很厉害，懂的比爸爸多，爸爸有段时间很难受，因为爸爸觉得比不过他们，所以显得很垂头丧气的。一段时间后，慢慢地爸爸想明白了。其实你看，这个世界上比我厉害的人很多，我能遇上他们，并跟他们一起工作是爸爸的荣幸，所以爸爸要乘这个机会多向他们学习一下。现在爸爸常常跟他们交流，学习他们身上的优点，并且平时的时候自己也在努力的看书，为了巩固知识，也会写一些文章做一下总结。虽然现在爸爸还是没他们厉害，但爸爸相信我会慢慢赶上来的。Sharon，Anne，你们也会遇到很多比你们厉害的人，这个时候不要慌张哦，因为这是很正常的，要向爸爸这样，多向他们学习，并且自己也要努力看书学习哦，这样我们就能慢慢赶上他们。",
            "content_html": "<p>Hi Sharon Anne，又有1个月没见到你们，爸爸好想你们。</p><p>爸爸最近工作很忙，也碰到了一些问题，想跟你们说说。爸爸的这家公司里有很多比爸爸厉害很多的人，每天他们都跟爸爸一起做事情。</p><p>他们很厉害，懂的比爸爸多，爸爸有段时间很难受，因为爸爸觉得比不过他们，所以显得很垂头丧气的。</p><p>一段时间后，慢慢地爸爸想明白了。其实你看，这个世界上比我厉害的人很多，我能遇上他们，并跟他们一起工作是爸爸的荣幸，所以爸爸要乘这个机会多向他们学习一下。</p><p>现在爸爸常常跟他们交流，学习他们身上的优点，并且平时的时候自己也在努力的看书，为了巩固知识，也会写一些文章做一下总结。</p><p>虽然现在爸爸还是没他们厉害，但爸爸相信我会慢慢赶上来的。</p><p>Sharon，Anne，你们也会遇到很多比你们厉害的人，这个时候不要慌张哦，因为这是很正常的，要向爸爸这样，多向他们学习，并且自己也要努力看书学习哦，这样我们就能慢慢赶上他们。</p>",
            "url": "http://www.luzexi.com/2020/11/02/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A15",
            
            
            
            
            
            "date_published": "2020-11-02T00:00:00+08:00",
            "date_modified": "2020-11-02T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/11/01/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A854",
            "title": "思路探讨(五十四) 系统性的学习",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "前面很多文章对人生哲理的认知比较多，但对系统性的知识则却没有几篇。这也是最近几年犯的错误之一，忙于吸收一些零散的知识，却没有形成体系。把看别人写的文章当作吸收知识的重要来源，是我最近几年所犯的重要错误之一。我们写的文章大部分都是写给自己的总结（即使记者在撰写实时新闻时也会夹带有自己的观点和情绪），在写文章的同时总结了我们学到的知识，这些知识无论从书本上还是实践中的来，最后总结完毕后的文章第一个看的人是我们自己，所以从某种意义上来说我们写的文章都是我们写给自己看的，这使得我们可以让自己的知识在脑袋中有了一次整理和巩固的机会，然后这篇文章才顺带的分享给大家，让大家能够知道我们在这个学习过程中经历了什么，有什么样的体会，知识的重点是什么，这对于写文章的人帮助很大。对于看文章的人，其吸收的知识其实微乎其微。这句话我一开始也不是很明白，为什么我看别人写的精彩的技术文章就没什么用呢？为什么我看别人写的文章的时候，你怎么知道我吸收的知识就微乎其微了呢？后来我才慢慢发现，这些大部分文章无论是新闻还是技术相当于一种资讯，就像我们每天在xx新闻里看的文章那样，写的都是天下发生的事，可能你觉得新奇会去看一下，但其具体的知识无法进入到你的脑袋中。为什么呢？因为你没有系统性的去学习过它，你只是片面的从别人的口中知道了这么一件事。比如某个专家在文章中提到，xx编程语言效率低，你可能就记住了，但其实他讲了很多关于为什么这个语言是低效的内容，你却很难记住，因为这不是你的经历，你无法在这么短的文章中体会到他的所有成功和失败的经历。但当有人问你的时候，你也这么告诉他，就像专家那样。可是你一直没有去研究为什么这种编程语言效率低，没有去系统性的学习编程语言是怎么设计的，是怎样编译成机器码的，在执行时是怎么运行的。所以你的脑袋里只有这么一句话，xx编程语言是低效的。如果你没有从上到下，从底层到设计，系统性的去学习知识，我们可能会迷失在这个充满知识的海洋里。系统性学习和零散的看些文章的区别，本质上围绕的依然是高效。我们关注的是，“如何才能高效的学习？”和“如何学习才高效？”。答案可能很长，包括且不局限于，练习的技巧、精力管理、目标管理、阅读技巧、心态的调整、教导他人时的方法、自我总结的技巧、以及与他人交流方式等等等。有很多我们需要我们学习的东西，只是这么多东西如果我们抓不住重点，就会迷路。就如同我最近在健身中学到的那样，如果我们没有目标的去锻炼肌肉，则通常都是东锻炼一下西锻炼一下，很难形成有效的可见的成果，大部分人都在锻炼一阵后由于看不到成效放弃了健身。我也这样没有目标的锻炼了很久，直到最近我才开始反思，我在想“怎样才能让我锻炼的成果放大”。于是我开始系统性的学习人体的肌肉组成结构，肌肉增长的原理，塑形减脂的原理，慢慢的我去健身时也更加注重肌肉的局部锻炼，把有限的时间花费在几个重要的肌肉锻炼上，饮食上也更加注重搭配和克制，肌肉的增长效果显著。自己看到了成果，就会更加努力学习，向着目标前进。最后总结下，零散的知识用处小效率差误导多，我们需要系统性的学习某个领域的知识（从底层开始），因为系统性的知识能带领我们看透事物的本质和底层逻辑，这让我们进入一个新的世界，一个能抓住重点从而更加高效的世界。尽可能自己写文章，而不是期盼依靠别人的文章来获得知识。",
            "content_html": "<p>前面很多文章对人生哲理的认知比较多，但对系统性的知识则却没有几篇。这也是最近几年犯的错误之一，忙于吸收一些零散的知识，却没有形成体系。</p><h4 id=\"把看别人写的文章当作吸收知识的重要来源是我最近几年所犯的重要错误之一\">把看别人写的文章当作吸收知识的重要来源，是我最近几年所犯的重要错误之一。</h4><p>我们写的文章大部分都是写给自己的总结（即使记者在撰写实时新闻时也会夹带有自己的观点和情绪），在写文章的同时总结了我们学到的知识，这些知识无论从书本上还是实践中的来，最后总结完毕后的文章第一个看的人是我们自己，所以从某种意义上来说我们写的文章都是我们写给自己看的，这使得我们可以让自己的知识在脑袋中有了一次整理和巩固的机会，然后这篇文章才顺带的分享给大家，让大家能够知道我们在这个学习过程中经历了什么，有什么样的体会，知识的重点是什么，这对于写文章的人帮助很大。</p><p>对于看文章的人，其吸收的知识其实微乎其微。这句话我一开始也不是很明白，为什么我看别人写的精彩的技术文章就没什么用呢？为什么我看别人写的文章的时候，你怎么知道我吸收的知识就微乎其微了呢？后来我才慢慢发现，这些大部分文章无论是新闻还是技术相当于一种资讯，就像我们每天在xx新闻里看的文章那样，写的都是天下发生的事，可能你觉得新奇会去看一下，但其具体的知识无法进入到你的脑袋中。</p><p>为什么呢？因为你没有系统性的去学习过它，你只是片面的从别人的口中知道了这么一件事。比如某个专家在文章中提到，xx编程语言效率低，你可能就记住了，但其实他讲了很多关于为什么这个语言是低效的内容，你却很难记住，因为这不是你的经历，你无法在这么短的文章中体会到他的所有成功和失败的经历。但当有人问你的时候，你也这么告诉他，就像专家那样。可是你一直没有去研究为什么这种编程语言效率低，没有去系统性的学习编程语言是怎么设计的，是怎样编译成机器码的，在执行时是怎么运行的。所以你的脑袋里只有这么一句话，xx编程语言是低效的。</p><h4 id=\"如果你没有从上到下从底层到设计系统性的去学习知识我们可能会迷失在这个充满知识的海洋里\">如果你没有从上到下，从底层到设计，系统性的去学习知识，我们可能会迷失在这个充满知识的海洋里。</h4><p>系统性学习和零散的看些文章的区别，本质上围绕的依然是高效。我们关注的是，“如何才能高效的学习？”和“如何学习才高效？”。答案可能很长，包括且不局限于，练习的技巧、精力管理、目标管理、阅读技巧、心态的调整、教导他人时的方法、自我总结的技巧、以及与他人交流方式等等等。有很多我们需要我们学习的东西，只是这么多东西如果我们抓不住重点，就会迷路。</p><p>就如同我最近在健身中学到的那样，如果我们没有目标的去锻炼肌肉，则通常都是东锻炼一下西锻炼一下，很难形成有效的可见的成果，大部分人都在锻炼一阵后由于看不到成效放弃了健身。我也这样没有目标的锻炼了很久，直到最近我才开始反思，我在想“怎样才能让我锻炼的成果放大”。于是我开始系统性的学习人体的肌肉组成结构，肌肉增长的原理，塑形减脂的原理，慢慢的我去健身时也更加注重肌肉的局部锻炼，把有限的时间花费在几个重要的肌肉锻炼上，饮食上也更加注重搭配和克制，肌肉的增长效果显著。自己看到了成果，就会更加努力学习，向着目标前进。</p><h4 id=\"最后总结下零散的知识用处小效率差误导多我们需要系统性的学习某个领域的知识从底层开始因为系统性的知识能带领我们看透事物的本质和底层逻辑这让我们进入一个新的世界一个能抓住重点从而更加高效的世界尽可能自己写文章而不是期盼依靠别人的文章来获得知识\">最后总结下，零散的知识用处小效率差误导多，我们需要系统性的学习某个领域的知识（从底层开始），因为系统性的知识能带领我们看透事物的本质和底层逻辑，这让我们进入一个新的世界，一个能抓住重点从而更加高效的世界。尽可能自己写文章，而不是期盼依靠别人的文章来获得知识。</h4>",
            "url": "http://www.luzexi.com/2020/11/01/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A854",
            
            
            
            
            
            "date_published": "2020-11-01T00:00:00+08:00",
            "date_modified": "2020-11-01T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/10/25/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B18",
            "title": "向内看自己(八) 团队合作、冥想、精力",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "向内看自己，看自己内心的所思所想，找出问题并逐步纠正它。很佩服公司里很多同事，他们拥有很好的合作能力，知道如何更加有效的合作，让集体的力量放大很多倍。我知道自己有些许性格上的缺陷，这会使得我在平时的工作和生活中与他人合作起来会有障碍，从而导致了团队磨合期较长。这让我万分痛苦，因为年纪越大越知道团队的力量有多重要。团队凝聚的力量可以让大事情大难题分解成不同的小事情和小问题，每个小问题都由某成员来处理，综合起来就像，单车道变成了八车道那样并行处理和推进，让整个进度变得更快，让原本看似大的难题被团队良好的合作和分工，分解成了小问题并迅速消化掉。每个人擅长的领域不一样，将这些不同领域的人才聚集起来并且形成有效的合作才能迸发出巨大的创造力。团队中有些人擅长分解难题，有些人擅长某个领域的难题，有些人擅长在不同难题领域之间的衔接，难题被分解成各种小领域并在领域之间有人衔接，这是团队分工合作达成大目标的关键。​如果人没有合作意识，就会使得团体的效率大大降低，大事办不成，小事争执不断，一盘散沙。团队这个概念无处不在，除了公司里的团队外，我们还有，家庭、班级、球队、兴趣班等等。这些团队都需要我们认真对待，培养起自己良好的合作观念，如何配合队友，如何有效分工，如何衔接队友与队友之间的成果，以及如何培养团队感情。一辈子都要学习如何有效合作。前段时间压力很大，所以一直睡不着觉，精力也随之变差，工作效率也随之下降，形成了一个恶性循环。失眠一直是我的一个大问题，我相信也是所有在大城市拼搏的人的问题，为了解决这个难题，大家都尝试过很多种方法，我也是。我最近在看《十分钟冥想》（后面看完后会写个简版的笔记），这本书里面讲的些内容让我豁然开朗。他说我们睡不着的人大多数都是在想，今天发生的事，以前发生的事，明天即将发生的事，或者今天的困难、明天的困难，总之我们在睡觉时一直在想这想那，注意力不在睡觉上。这是睡不着的主要原因，想太多，脑袋和身体一直处于紧绷状态。到了后半夜当发现我们发现想的太多了，很累的时候想让自己睡觉，就拼命的去抗拒它，试图让脑袋不要去想。但大脑由不得我们，你越抗拒，就越被这种抗拒而不得的情绪折磨。于是在你脑袋中又多了一种运作程序，即抗拒。解决方法是，不要抗拒而选择旁观。你不要试图去控制它们，而是成为一个旁观者，就像你在公交站等车时看着路边来来往往的车，你不会有兴趣去挡住它们，你只是注视着它们来了走了，又来了又走了。当你成为这样一个傍观者时，你会发现这些来来往往的想法很无聊，于是慢慢的你的脑袋开始放空，最后宁静如水。这就是冥想的过程，做一个自己脑袋的旁观者，让心宁静如水，清澈见底。这个过程里有一些技巧，我会在后面的文章中详细解剖一下，我们如何掌握这些技巧，让自己可以随时保持宁静，排除噪音，去除烦恼。除了冥想，平时里由于事情太多太杂，特别是在有了孩子后，生活的复杂度上升了一个台阶。生活的复杂度压垮了我很多次，脑袋用不过来。于是我从老婆大人那里学了一个技巧，把自己脑袋里想的都记下来，为脑袋腾出更多空间干别的事。把事都记下来，那样就不会占用你的脑袋了，脑袋里的东西太多，需要有地方放，要么完结掉，要么存起来，我选择存起来，放在印象笔记里，等空了在翻开来想想怎么解决。前面有篇文章介绍《精力管理》的读书笔记，自己也在不断的践行中，最近又发现了很多问题。生活和工作中总有那么段时期是困难的时期，困难时期最需要我们用精力去支撑。但我发现，越是困难时期越容易对精力的节约和储备放松警惕，于是每次在困难时期都会胡乱的使用精力，去所谓的放松一下，比如玩游戏，ktv，抽烟喝酒等，其实这些反而消耗了精力，增加了负担。我也是一样，有段时间总会掉入这个陷阱，在最需要精力去面对困难时会选择去逃避一下，把精力浪费在“轻松一下”上，使得第二天的没有体力，进而使得困难更加难以对付，逐步形成恶性循环，越放松越没有精力去应对困难，事情就变得越来越糟糕。最近我试着学习这个克制的技巧，让自己在最困难的时候告诉自己要克制要保存体力，在关键时刻不能浪费精力，锻炼一下并早早睡觉把精力补充的满满的用到第二天去面对困难。自从用了这个方法，我的情绪变的好多了，事情也变得更加顺利了，困难也慢慢迎刃而解。每次遇到紧张、压力、焦虑的心情时要保存自己的精力，并设法补充下自己的精力，今天解决不了的事情，就补充下精力到第二天去解决，让自己能有更多保持专注的时间和保持专注的精力去面对困难，坚守理智，锻炼并补充精力以应对困难，而不是随意的浪费，让困难更难以对付。",
            "content_html": "<p>向内看自己，看自己内心的所思所想，找出问题并逐步纠正它。</p><p>很佩服公司里很多同事，他们拥有很好的合作能力，知道如何更加有效的合作，让集体的力量放大很多倍。</p><p>我知道自己有些许性格上的缺陷，这会使得我在平时的工作和生活中与他人合作起来会有障碍，从而导致了团队磨合期较长。这让我万分痛苦，因为年纪越大越知道团队的力量有多重要。</p><p>团队凝聚的力量可以让大事情大难题分解成不同的小事情和小问题，每个小问题都由某成员来处理，综合起来就像，单车道变成了八车道那样并行处理和推进，让整个进度变得更快，让原本看似大的难题被团队良好的合作和分工，分解成了小问题并迅速消化掉。</p><p>每个人擅长的领域不一样，将这些不同领域的人才聚集起来并且形成有效的合作才能迸发出巨大的创造力。团队中有些人擅长分解难题，有些人擅长某个领域的难题，有些人擅长在不同难题领域之间的衔接，难题被分解成各种小领域并在领域之间有人衔接，这是团队分工合作达成大目标的关键。</p><p>​如果人没有合作意识，就会使得团体的效率大大降低，大事办不成，小事争执不断，一盘散沙。</p><h4 id=\"团队这个概念无处不在除了公司里的团队外我们还有家庭班级球队兴趣班等等这些团队都需要我们认真对待培养起自己良好的合作观念如何配合队友如何有效分工如何衔接队友与队友之间的成果以及如何培养团队感情一辈子都要学习如何有效合作\">团队这个概念无处不在，除了公司里的团队外，我们还有，家庭、班级、球队、兴趣班等等。这些团队都需要我们认真对待，培养起自己良好的合作观念，如何配合队友，如何有效分工，如何衔接队友与队友之间的成果，以及如何培养团队感情。一辈子都要学习如何有效合作。</h4><hr /><p>前段时间压力很大，所以一直睡不着觉，精力也随之变差，工作效率也随之下降，形成了一个恶性循环。失眠一直是我的一个大问题，我相信也是所有在大城市拼搏的人的问题，为了解决这个难题，大家都尝试过很多种方法，我也是。我最近在看《十分钟冥想》（后面看完后会写个简版的笔记），这本书里面讲的些内容让我豁然开朗。</p><p>他说我们睡不着的人大多数都是在想，今天发生的事，以前发生的事，明天即将发生的事，或者今天的困难、明天的困难，总之我们在睡觉时一直在想这想那，注意力不在睡觉上。这是睡不着的主要原因，想太多，脑袋和身体一直处于紧绷状态。到了后半夜当发现我们发现想的太多了，很累的时候想让自己睡觉，就拼命的去抗拒它，试图让脑袋不要去想。但大脑由不得我们，你越抗拒，就越被这种抗拒而不得的情绪折磨。于是在你脑袋中又多了一种运作程序，即抗拒。</p><h4 id=\"解决方法是不要抗拒而选择旁观你不要试图去控制它们而是成为一个旁观者就像你在公交站等车时看着路边来来往往的车你不会有兴趣去挡住它们你只是注视着它们来了走了又来了又走了当你成为这样一个傍观者时你会发现这些来来往往的想法很无聊于是慢慢的你的脑袋开始放空最后宁静如水\">解决方法是，不要抗拒而选择旁观。你不要试图去控制它们，而是成为一个旁观者，就像你在公交站等车时看着路边来来往往的车，你不会有兴趣去挡住它们，你只是注视着它们来了走了，又来了又走了。当你成为这样一个傍观者时，你会发现这些来来往往的想法很无聊，于是慢慢的你的脑袋开始放空，最后宁静如水。</h4><p>这就是冥想的过程，做一个自己脑袋的旁观者，让心宁静如水，清澈见底。</p><p>这个过程里有一些技巧，我会在后面的文章中详细解剖一下，我们如何掌握这些技巧，让自己可以随时保持宁静，排除噪音，去除烦恼。</p><hr /><p>除了冥想，平时里由于事情太多太杂，特别是在有了孩子后，生活的复杂度上升了一个台阶。生活的复杂度压垮了我很多次，脑袋用不过来。于是我从老婆大人那里学了一个技巧，把自己脑袋里想的都记下来，为脑袋腾出更多空间干别的事。把事都记下来，那样就不会占用你的脑袋了，脑袋里的东西太多，需要有地方放，要么完结掉，要么存起来，我选择存起来，放在印象笔记里，等空了在翻开来想想怎么解决。</p><hr /><p>前面有篇文章介绍《精力管理》的读书笔记，自己也在不断的践行中，最近又发现了很多问题。</p><p>生活和工作中总有那么段时期是困难的时期，困难时期最需要我们用精力去支撑。但我发现，越是困难时期越容易对精力的节约和储备放松警惕，于是每次在困难时期都会胡乱的使用精力，去所谓的放松一下，比如玩游戏，ktv，抽烟喝酒等，其实这些反而消耗了精力，增加了负担。</p><p>我也是一样，有段时间总会掉入这个陷阱，在最需要精力去面对困难时会选择去逃避一下，把精力浪费在“轻松一下”上，使得第二天的没有体力，进而使得困难更加难以对付，逐步形成恶性循环，越放松越没有精力去应对困难，事情就变得越来越糟糕。</p><p>最近我试着学习这个克制的技巧，让自己在最困难的时候告诉自己要克制要保存体力，在关键时刻不能浪费精力，锻炼一下并早早睡觉把精力补充的满满的用到第二天去面对困难。</p><p>自从用了这个方法，我的情绪变的好多了，事情也变得更加顺利了，困难也慢慢迎刃而解。每次遇到紧张、压力、焦虑的心情时要保存自己的精力，并设法补充下自己的精力，今天解决不了的事情，就补充下精力到第二天去解决，让自己能有更多保持专注的时间和保持专注的精力去面对困难，</p><h4 id=\"坚守理智锻炼并补充精力以应对困难而不是随意的浪费让困难更难以对付\">坚守理智，锻炼并补充精力以应对困难，而不是随意的浪费，让困难更难以对付。</h4>",
            "url": "http://www.luzexi.com/2020/10/25/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B18",
            
            
            
            
            
            "date_published": "2020-10-25T00:00:00+08:00",
            "date_modified": "2020-10-25T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/10/18/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B012",
            "title": "读书笔记(十二) 《汇编语言》",
            "summary": "读书 书 看书 读后感",
            "content_text": "两个月前看完王爽著的《汇编语言》经过一段时间的休整，今天再次翻开来又有另一番滋味，趁着最近对底层原理这股热情，对书本的内容进行一些整理。我的初衷是希望更多的理解程序集在计算机中执行的原理，我中意《深度探索C++对象模型》里作者说的一句话，他说“我的经验告诉我，如果一个程序员了解底层实现模型，他就能够写出效率较高的代码，自信心也比较高。一个人不应该用猜的方式，或是等待某大师的宣判，才确定”何时提供一个copy constructor 而何时不需要“，这类问题的解答应该来自于我们自身对对象模型的了解”。我们很多时候由于不了解底层的执行原来，导致我们在写代码的时候基本都靠猜，我们自认为的程序在计算机中的执行方式是这样的或是那样的。以前我猜过很长一段时间，但现在我不想猜了，我想了解所有关于计算机底层的执行原理，包括计算机设备的体系结构，计算机机器码的执行原理，面向对象模型的布局和执行原理。以下是我对书本内容的记录和理解我把这本书的理解分为，基础知识、总线、寄存器、寻址、跳转、中断，6个部分。书中写了很多案例，总53万字，我把这些知识精简一下，并说出我自己的理解。基础知识我们知道机器指令是一列0和1构成二进制数字，为什么是0和1呢，因为它可以在设备中用高低电平表示。高低电平就是一个晶体管的两个状态，即有电流和没电流。一列010101二进制数字如果用数字电路来表示的话，就是一排晶体管。这排晶体管假如要做逻辑判断或计算的话，就需要涉及到逻辑门（即电流的走向逻辑），我们常接触到的逻辑门有，与（and）、非（not）、或（or）这三种逻辑门，除了这三种还有，与非门、或非门、反相器、异或门，通过这六种基础的逻辑门的组合，我们可以制造出很多很多复杂的逻辑门电路，比如加法数字电路、乘法数字电路等，计算器就是由众多逻辑门组合而成的，输入一排电流后得到一排电流的结果。由于0101形式的机器码，太难记忆，所以人们发明了汇编，它其实就是机器码的助记符，即某个10101的指令用一个英文符号来表示。因此汇编指令与机器指令的差别在于表示方式上，汇编是机器指令便于记忆的一种书写格式。我们程序员用汇编写出程序后，用汇编编译器将其翻译成机器码，再交由计算机执行。反过来也是一样，翻译完成的机器码（即一个可执行文件）也可以反过来翻译成汇编语言符号。我们常用的cpu处理器的发展过程，从8080到奔腾4的过程是，8080、8086/8088、80186、80286、80386、80486、奔腾、奔腾2、奔腾3、奔腾4.其中8086/8088开始被使用在了微机上，即我们现在的个人电脑。80386开始在微机上可以做多任务操作，一台个人电脑中的操作系统可以同时处理多项任务。虽然80286也具备了对多任务系统的支持，但它对8086/8088的兼容性支持比较差，所以过度非常困难，于是就有了80386，它既有多任务系统的功能也兼容了8086/8088。总线CPU是计算机的核心，要让CPU工作就必须向它提供指令和数据，指令和数据存放在内存，因此内存的作用仅次于CPU。而磁盘则不同与内存，磁盘上的数据或程序集如果不读到内存中就无法被CPU使用，所以对CPU来说，磁盘其实是外部设备。计算机设备中除了CPU芯片外，其他设备中也有属于自己的芯片，比如内存芯片、磁盘芯片、键盘芯片、显卡芯片、网络芯片等等，这些芯片都有自己的寄存器，CPU可以通过这些寄存器与其他芯片进行交流。设备与CPU之间的交流都是数据交流（也就是不同高低平的电流），CPU在读写数据时要指明，它要对哪一个器件进行操作，进行哪种操作，是从中读出数据还是写入数据。那么CPU是通过什么将数据传到其他设备的芯片中去的呢？在计算机中有专门连接CPU和其他芯片的导线（电线或电流线），我们称它为总线。总线又分为3类，地址总线、控制总线、数据总线。这3根总线的分类职责不同，地址总线用于指定内存单元地址，控制总线用于传输指令，数据总线用于传输数据。我们来举个例子，CPU要读取内存中3号单元的数据，CPU先通过地址线将地址信息3发给内存芯片，再通过控制总线发出读取内存的指令，指令中选中存储芯片，并通知它将要从中读取数据，最后内存芯片将3号单元中的数据通过数据线送入CPU。反过来，写的步骤也是类似，先通过地址总线将地址信息3发给内存芯片，再通过控制总线向内存芯片发出写入命令，最后通过数据总线将数据传入内心芯片。我们现在知道了，地址总线能传输多少个二进制信息，CPU就可以对多少个单元地址进行寻址。数据总线也是一样，有多少根决定了一次可传二进制数据的大小。控制总线是个总称，是一些不同控制线的集合，有多少根控制总线就意味着CPU提供了对外部器件的多少种控制。现在我们一台机子上有很多存储器，包括随机存储器（RAM）、只读存储器（ROM）、显存RAM、网卡ROM等，这些存储器在物理上是独立的器件，它们都与CPU总线相连。CPU在地址传输的时候是怎么去识别到底传给哪个存储器的呢？CPU在操控它们的时候，把它们总的当作一个整体的内存空间来看待，相当于若干个存储器排列组成了一个逻辑存储器，每个存储器的存储地址与前一个是紧密连接的，我们称这整个存储空间为，内存地址空间。举个例子，假如所有存储器地址加起来为从64KB的空间，即总共0～FFFF的地址，那么主随机存储器的地址空间可能为32KB即 0～7FFF，显存地址空间可能为8KB即 8000～9FFF，其他各个ROM的地址空间为24KB 即 A000～FFFF。如果CPU向内存地址为1000的地址发送数据，就是向主随机存储器发送数据，如果向9000地址写入数据，则为显存空间。这里所说的都是外部总线，是CPU连接外部器件的导线集合。其实CPU内部也是有总线把各个部件连接起来的，一个CPU由运算器、控制器、寄存器等器件构成，这些器件就是靠内部总线相连，它们之间相互进行数据传输。寄存器现代的CPU寄存器由很多种，我们拿最常用的一些来讲，即8086的14个寄存器，AX、BX、CX、DX、SI、DI、SP、BP、IP、CS、SS、DS、ES、PSW。通用寄存器有4个，AX、BX、CX、DX，它们可以存放一般性数据，可以看作是平时程序中的变量。它们中又有高低位寄存器来指向它们的高位和低位，即AH和AL为AX的高8位和低8位，BH和BL为BX的高8位和低8位，CH和CL为CX的高8位和低8位，DH和DL为DX的高8位和低8位。8086中可以一次性处理8位和16位数据，即字节（byte）和字（word）。即我们可以向AX中传数据也可以向AH和AL上传数据。我们来举个例子：\tmov ax,18 将18送入AX寄存器\tmov ah,78 将78送入AH寄存器\tadd ax,8 将AX中的值加上8后覆盖AX\t现在ax中的值为86在汇编代码中寄存器的用法有习惯性用法的讲究，比如AX寄存器就是存放临时数据的，BX则存放偏移地址数据，CX存放的是循环计数数据，DX则通常用来存放要访问的数据段地址。而SI、DI与BX的作用一样，存放的是内存偏移地址，只是它们不能拆分为高低位。除了通用寄存器外，还有段寄存器，标志寄存器，也是汇编中重要的寄存器。段寄存器用于存放，段内存的起始地址和偏移地址。它们包括，CS、IP、SS、SP、BP、DS。其中CS和IP就是代码段寄存器，CS指向代码段在内存中的起点，IP则指向当前执行指令在内存起点中的偏移位置，IP指向的地址就是程序要执行的指令位置。SS、SP和BP是内存栈的段寄存器，其中SS指向栈内存段起点地址，SP则指向当前栈顶偏移地址，BP有点特殊，它和SP联合使用作为SP校准使用，因为SP要指向栈顶不能乱动，所以SP把地址传给BP，由BP来做栈内的寻址。对于栈操作，计算机有push和pop指令可以使用，即我们先定义号SS和SP好地址后用push和pop操作：\tmov ax, 123H ;给一个地址\tmov ss, ax ;段寄存器必须用寄存器操作数值\tmov sp, 100H ;设置栈顶，就是设置栈总大小\tpush bp ;保存bp指针\tmov bp, sp ;把栈顶置针给bp，这时候如果函数有参数，则[bp + 2*4]就是第一个参数位置，[bp + 3*4]就是第二个参数位置，以此类推。\tmov ax, 22 ;把22给ax\tpush ax ;ax中的值推入栈\tpop bx ;把栈中的值推出给bx\t现在bx中数据为22最后是DS，DS则是静态数据段的寄存器，指向静态数据段的起始地址，所有在程序中的常量、静态变量都被放在静态数据段中，有DS数据段地址指向。有了指令内存地址，栈内存地址，静态数据内存地址，我们就可以根据数据执行指令，控制栈顶保存函数临时变量。标志寄存器则对各种标志位存储，它包括ZF（零标志）、OF（溢出标志）、DF（方向标志）、CF（进位标志）、PF（奇偶标志）、SF（符号标志）、TF（中断标志）、IF（屏蔽标志）等。\tZF 结果是否为0\tOF 加法是否溢出\tDF si、di的增减方向\tCF 进行无符号运算时记录最高有效位的进位值。\tPF 结果是否为偶数\tSF 结果是否为负\tTF 是否有中断程序\tIF 是否屏蔽中断这些标志位都是被动被计算机赋值的，只有当我们结束某个操作指令后才会需要去查看它们。寻址绝大部分机器指令都是进行数据处理的指令，处理大致可分为3类：读取、写入、运算。在机器指令这一层来讲，并不关心数据的值是多少，而关心指令执行前一刻，它将要处理的数据所在的位置。指令在执行前，所要处理的数据可以在3个地方，分别是：CPU内部、内存、端口。我们知道CPU通过内存来获得数据，在访问内存时要给出内存的地址，通过地址总线送入存储器芯片必须是一个内存单元的物理地址，于是CPU可访问的内存大小就受到地址总线的限制。8086CPU是16位结构的CPU，也就是说8086内部职能一次性处理和传输总长16位的信息，如果将地址从内部简单发出，那么它只能送出16位地址，即只能访问0～FF之间的地址，表现出的寻址能力时64K。这样的寻址能力太少，于是CPU采用了一种内部用两个地址合成一个地址的方法来增加寻址能力，即“段地址+偏移地址 = 物理地址”，这样就一下子增加了1倍的寻址能力，如果地址总线够宽的话。可惜8086只有20根总线，因此最大寻址能力只能提高到1MB。我们现代计算机中也运用了同样的寻址方式，但是现代计算机中地址总线只有32条和40条，即32位CPU处理器原本只能处理4G内存，64位CPU处理器原本只能处理1T内存（而且还要受到其他地址总线的限制，比如内部总线）。段地址是重要的标记位置，是一段内存的起点，因此在程序中有专门的寄存器来存储它们，就是我们前面说的，CS、IP、SS、SP、BP、DS、ES。寻址方式分，直接寻址、间接寻址、基址变址寻址，即如下：例子1，数据段寻址：\tmov bx, 1000H ;将1000数据送入bx\tmov ds, bx ;将bx里的数据送入ds\tmov al, [0] ;将ds段地址加上0得到的1000H:0，在该内存地址单元中的数据送入al寄存器\tmov [0], bx ;将bx的数据送入1000H:0内存地址单元中例子2，寄存器寻址：\tmov bx, 1000H ;将1000H送入bx\tmov ax, [bx] ;根据bx中的值去内存中的单元地址中的值，传送给ax\tmov ax, [bx + 123] ;根据bx+123得到的值去内存中的单元地址中取值，传送给ax\tmov ax, [bx + si] ;根据bx + si的到的值去内存中取值，传送给ax\tmov ax, [bx + si + 123] ;根据bx + si + 123得到的值去内存中的单元地址中取值，传送给ax例子3，段地址寻址：\tmov bx, 1000H ;将1000H送入bx\tmov cs, bx ;将bx的值送入cs代码段寄存器\tmov ax, 0 ;将0送入ax\tadd ax, cs:[bx] ;用段地址+偏移地址的方式获得cs+bx地址，并从该地址上取得数值送入ax例子4，不同类型的数据放入不同的段：\tassume cs:code, ds:data, ss:stack\tdata segment ; 定义data内容\t\tdw 0123h, 0456h, 0789h, 0abch, 0defh, 0fedh ;dw为字内容即2个byte\tdata ends\tstack segment ; 定义stack内容\t\tdw 0,0,0,0,0,0\tstack ends\tcode segment ; 定义code内容\t\tmov ax, statck ; 将statck地址送入ax\t\tmov ss, ax ; 将ax内容送入ss栈段寄存器\t\tmov sp, 20h ; 将栈顶定义为20h大小\t\tmov ax, data ; 将data定义为\t\tmov ds, ax ; 将ax数据传入ds数据段寄存器\t\tmov bx, 0 ; 将0传入bx\tcode ends\tend start跳转计算机执行机器指令时是顺序的并且根据代码段指针在没有跳转的情况下依次执行下去，这个指针就是IP寄存器。因此跳转就是将原本IP寄存器指向的地址改为我们指定的地址，这样计算机根据IP指针指向的机器指令可以随意操控了。最常用的跳转就是loop。计算机在执行loop指令时每次都会在先将cx中的值减1，再判断cx是否为0，如果不为零则跳转到指定地址：\tmov cx, 11 ; 将11传送给cx\tmov ax, 1 ; 将1传送给ax\ts: add ax, ax ; 将ax加上ax的值传入ax\t   loop s  ; 先做cx=cx-1操作，再判断cx是否为零，如果不是零则跳转到 s位置，如果是零则继续下一条除了修改IP来实现跳转外，我们也可以通过就该CS代码段地址来实现跳转。只修改IP实现的跳转，我们称为段内跳转，也称短跳转，因为跳转范围在一个寄存器大小范围内。而同时修改CS和IP实现的跳转，我们称为段间跳转，也称为长跳转。常用的跳转指令有：\t无条件跳转 jmp\t有条件跳转 je(相等就跳转)，jcxz（判断cx为0就跳转）\t循环跳转   loop\t调用跳转 call，ret（使用栈中数据修改IP内容实现近跳转），retf（用栈中数据修改CS和IP实现远跳转）\t中断跳转   int前面有些一般形式的跳转我们都会理解的比较快，比如jmp，je，jcxz，和loop，都是通过寻址地址跳转，或先做某个判断再跳转。和我们平时写的代码中的，if…else，goto，for循环，switch有很多相似之处，因此理解起来相对比较容易，最多也只是多了一个远近的跳转，也好理解，近跳转只修改IP，远跳转修改了CS和IP。call、ret、retf和我们平时编写的函数有紧密的联系。当call被调用时，它先将当前IP或CS和IP推入到栈中，再进行转移。执行call时相当于：\tpush IP\tjmp 某寄存器而ret和retf在执行时，会先从栈中推出一个数据传送给IP，或推出2个数据传送给CS与IP。ret相当于：\tpop IPretf相当于\tpop IP\tpop CS这两个指令很像我们代码中的函数调用function call 和 return时的作用。我们来看看这两个指令配合起来是如何运作的：\tmov ax, 1 ;将1传送给ax\tmov cx, 3 ;将3传送给cx\tcall s ;先push IP 并且 jump s，指令跳到s段地址上\tmov bx, ax ;将ax的值传送给bx\tmov ax, 4c00h ;将4c00h传送给ax\tint 21h ;中断调用，结束\ts: add ax, ax ;将ax值相加传送给ax\t   loop s ;先cx减去1传送给cx，再判断cx是否为0，如果不为0条转到s，如果为0则继续下一个\t   ret ;pop IP，从栈中取的前面call时推入的地址给IP，实现跳转到 call s 那句指令下\t最后结束前，bx为8，loop了跳转了3次，ax从1自增到了8，call跳转到了s做了循环，做完循环ret又回到了call s下。有了function和ret的概念，我们就可以传递更多参数到栈中，在function里去取出栈中的值进行计算，在汇编里会变得如何呢，我们来看看：\tmov ax 1000 ;将1000传入ax\tmov ds ax ;通过ax设置数据内存单元\tmov [101] 10 ;将10传送到数据内存101地址单元上\tmov [102] 20 ;将20传送到数据内存102地址单元上\tpush [101] ;将101数据内存地址单元上的数据推入栈中\tpush [102] ;将102数据内存地址单元上的数据推入栈中\tmov ax, 1 ;将1传入ax\tcall s ;先push IP，再将IP设置为 s段地址上\tmov bx, ax ;将ax中的数值传送给bx\tmov ax 4c00h ;将4c00h传送给ax\tint 21h ;中断调用，结束\ts: pop bx ;从栈中推出数据给bx，其实就是IP值\t   pop dx ;从栈中推出数据给dx，其实就是[102]的值\t   add ax dx ;将ax和dx相加传送给ax\t   pop dx ;从栈中推出数据给dx，其实就是[101]的值\t   add ax dx ;将ax和dx相加传送给ax\t   jmp bx ;直接跳转到call s的位置上述程序利用了栈传递数据，在调用 call s之前，在栈中推入了内存地址101和102的值，到s中执行计算时分别推出了IP和两个数据，做完加法后跳转到call s的原位置下，继续执行直到结束。中断中断分内部中断和外部中断，中断的意思是CPU不再接着向下执行，而是转去处理特殊的信息。CPU具备一种能力，可以在执行完当前正在执行的指令后检测到从CPU外部发过来的或者内部产生的一种特殊信息，并立即处理接收到的信息，这就是中断信息。内部中断比如CPU在除法时溢出就会触发内部的中断程序，外部中断比如收到键盘的输入数据时会触发中断程序。用来处理中断信息的程序被称中断处理程序，一般来说，需要对不同的中断信息编写不同的处理程序。每个中断程序都有一个中断码，通过中断码我们可以找到中断程序。在计算机内存中有一块内存是专门存放中断码和对应的中断程序地址的，我们称为中断向量表：\t0号 -&gt; 中断程序入口地址\t1号 -&gt; 中断程序入口地址\t...当程序引发中断时过程如下，我们假设发生了除法溢出错误，产生了0号中断信息：\t1.除法溢出，产生中断信息，取得中断码\t2.标志寄存器的值入栈（因为在中断过程中要改变标志寄存器值）\t3.设置标志寄存器TF和IF的值为0\t4.CS和IP入栈\t5.根据中断码从中断向量表中取出中断处理程序的入口地址中断程序编写的方法和子程序相似：\t1.保存用到的寄存器\t2.处理中断\t3.恢复用到的寄存器\t4.调用iret指令返回iret指令功能可描述为：\tpop IP ;推出地址给指令指针IP\tpop CS ;推出地址给指令段地址给CS\tpopf ;推出标志寄存器除了系统自带的中断程序外，我们也可以自己安装中断程序，例如我们常用的Try cache 和 throw 就是利用安装中断程序来做抓异常的功能的。我们来看看，安装中断程序时如何做的：\tmov ax, cs ;将cs地址传入ax\tmov ds, ax ;将ax地址传入ds，为后面拷贝做准备\tmov si, offset ss ;设置ds:si指向地址\tmov ax, 0 ;将0传入ax\tmov es, ax ;将ax传入es\tmov di, 200h ;设置es:di指向目的地址\tmov cx, offset sqrend-offset ss ;设置ss中断程序长度\tcld ;设置传输方向为正\trep movsb ; 拷贝ds:si到es:di\tmov ax, 0 ; 设置ax为0\tmov es, ax ; 将ax的0传入es\tmov word ptr es:[7ch*4], 200h ; 修改中断编码7ch的中断程序入口地址\tmov word ptr es:[7ch*4 + 2], 0 ; 修改中断编码7ch的中断程序入口地址\tmov ax, 4c00h ;设置ax\tint 21h ; 结束中断\tss: mul ax ;中断程序，ax乘以ax传入ax\t    iret ;恢复中断我们将ss这段程序放入了中断向量表7ch中去，当我们执行 int 7ch 时就执行了ss段程序，虽然这个程序执行完毕后就没有在内存了，但ss这段指令已经被拷贝到了内存中。我们来看看BIOS和DOS在启动时时如何安装它们的中断程序的。1.开机后，CPU一加电，初始化(CS)=0FFFFh，(IP)=0，自动从FFFF:0单元开始执行程序。FFFF:0出油一条跳转指令，CPU执行该指令后转去执行BIOS中的硬件系统检测和初始化程序。2.初始化程序将建立BIOS所支持的中断向量表，将BIOS提供的中断程序的入口地址登记在中断向量中。3.硬件系统检测和初始化完成后，调用 int 19h 进行操作系统的引导。从此将计算机交由操作系统控制，DOS开始初始化程序。4.DOS启动后，除完成其他工作外，还将它所提供的中断程序装入内存，并添加到相应的中断向量表中。外部中断前面说CPU总线连接了很多芯片，这些芯片都有一组可以由CPU读写的寄存器，虽然这些寄存器都在不同的芯片中，但它们都与总线相连，CPU可以通过控制总线对它们进行读写。从CPU的角度看，将这些寄存器都当作端口，对它们进行统一编址，从而建立了一个统一的端口地址空间。每个端口在地址空间中都有一个地址。在访问端口时，CPU通过端口地址来定位端口，端口地址范围为0～65535。访问端口与访问内存略有不同，访问内存使用mov ax, ds:[8]，将内存地址数据段中的8单元地址上的数据传送到ax，而端口则是 in al, 60h，从60h号端口读入1个字节的数据送入al，out 20h, al 将al上的数据传入到20h端口。CPU有了与外部芯片通信的机制，就可以接受外部中断信息。比如，外设的输入到达时，相关芯片就会向CPU发出相应的中断信息。CPU在执行完当前指令后，检测到发过来的中断信息，引发了中断过程，跳转到中断程序处理外设的输入数据。我们来看看计算机时如何处理键盘输入中断的：1.键盘上每个键都相当于一个开关，键盘中有一个芯片对键盘上的每个键的开关状态进行扫描。2.按下一个键时，开关接通，该芯片就产生了一个扫描码，扫描码被送入主板上的接口芯片(usb接口)的寄存器中，该寄存器的端口地址通常为60h。3.松开按下的键时，也会产生一个扫描码，也同样被送入主板上的接口芯片(usb接口)的寄存器中。4.当键盘的输入到达60h端口时，接口芯片就会向CPU发送中断码。CPU检测到该中断信息后，如果IF=1则认为是不可屏蔽中断，接着响应中断引发中断过程，转去执行int 9的中断程序。5.BIOS提供了int 9的中断程序，读出60h端口中的扫描码，并送入到内存的键盘缓存中，如果是Ctrl之类的控制键则写入内存中存储状态字节单元，接收完成后向接口芯片发出应答信息。6.CPU继续根据内存中键盘缓存中的数据执行相关程序，响应键盘的输入。除了键盘外，磁盘也是外部设备的一种，也同样需要通过端口和中断的形式处理相关程序。BIOS和操作系统都提供了访问磁盘的中断程序。当需要向磁盘访问数据时，会先在寄存器和内存上设置访问的地址和大小，再发起中断，中断程序会根据设置在寄存器和内存上的信息从磁盘上传输到内存，传输完毕后结束中断。下面这个写入数据到3.5英寸软盘为例：\tmov ax, 0\tmov es, ax\tmov bx, 200h ; ex:bx指向写入磁盘的数据\tmov al, 1 ; 读取的扇区数\tmov ch, 0 ; 磁道号\tmov cl, 1 ; 扇区号\tmov dl, 0 ; 驱动器号\tmov dh, 0 ; 磁头号\tmov ah, 3 ; 表示写入\tint 13h ; 执行磁盘写入中断CPU首先需要告诉磁盘设备，写入还是读取，接着要告诉磁盘写入的内容，以及写入的地址，中断程序在执行完毕写入操作后，结束中断并返回原地址。总结，汇编其实就是机器码的助记符，它有很多个寄存器，每个寄存器都有不同的用途，内存分为几个段，不同的内存段有不同的用途，通常包括有静态数据段、代码段、栈空间段，我们通过指令可以在内存中寻址，也可以在不同的段之间跳转。CPU和设备之间用总线连接在一起，总线又分为地址总线，数据总线，控制总线，每个设备又都有自己的芯片，它们与CPU的通信方式就是通过自己的寄存器，CPU统一称它们为端口并为它们做了统一的编号。除内存外，设备与CPU之间的通信通常使用中断来进行，中断程序执行完毕后会跳转到原位置继续执行下面的程序指令。",
            "content_html": "<p>两个月前看完王爽著的《汇编语言》经过一段时间的休整，今天再次翻开来又有另一番滋味，趁着最近对底层原理这股热情，对书本的内容进行一些整理。</p><h4 id=\"我的初衷是希望更多的理解程序集在计算机中执行的原理我中意深度探索c对象模型里作者说的一句话他说我的经验告诉我如果一个程序员了解底层实现模型他就能够写出效率较高的代码自信心也比较高一个人不应该用猜的方式或是等待某大师的宣判才确定何时提供一个copy-constructor-而何时不需要这类问题的解答应该来自于我们自身对对象模型的了解\">我的初衷是希望更多的理解程序集在计算机中执行的原理，我中意《深度探索C++对象模型》里作者说的一句话，他说“我的经验告诉我，如果一个程序员了解底层实现模型，他就能够写出效率较高的代码，自信心也比较高。一个人不应该用猜的方式，或是等待某大师的宣判，才确定”何时提供一个copy constructor 而何时不需要“，这类问题的解答应该来自于我们自身对对象模型的了解”。</h4><p>我们很多时候由于不了解底层的执行原来，导致我们在写代码的时候基本都靠猜，我们自认为的程序在计算机中的执行方式是这样的或是那样的。以前我猜过很长一段时间，但现在我不想猜了，我想了解所有关于计算机底层的执行原理，包括计算机设备的体系结构，计算机机器码的执行原理，面向对象模型的布局和执行原理。</p><h4 id=\"以下是我对书本内容的记录和理解\">以下是我对书本内容的记录和理解</h4><p>我把这本书的理解分为，基础知识、总线、寄存器、寻址、跳转、中断，6个部分。书中写了很多案例，总53万字，我把这些知识精简一下，并说出我自己的理解。</p><h3 id=\"基础知识\">基础知识</h3><p>我们知道机器指令是一列0和1构成二进制数字，为什么是0和1呢，因为它可以在设备中用高低电平表示。高低电平就是一个晶体管的两个状态，即有电流和没电流。</p><p>一列010101二进制数字如果用数字电路来表示的话，就是一排晶体管。这排晶体管假如要做逻辑判断或计算的话，就需要涉及到逻辑门（即电流的走向逻辑），我们常接触到的逻辑门有，与（and）、非（not）、或（or）这三种逻辑门，除了这三种还有，与非门、或非门、反相器、异或门，通过这六种基础的逻辑门的组合，我们可以制造出很多很多复杂的逻辑门电路，比如加法数字电路、乘法数字电路等，计算器就是由众多逻辑门组合而成的，输入一排电流后得到一排电流的结果。</p><p>由于0101形式的机器码，太难记忆，所以人们发明了汇编，它其实就是机器码的助记符，即某个10101的指令用一个英文符号来表示。因此汇编指令与机器指令的差别在于表示方式上，汇编是机器指令便于记忆的一种书写格式。我们程序员用汇编写出程序后，用汇编编译器将其翻译成机器码，再交由计算机执行。反过来也是一样，翻译完成的机器码（即一个可执行文件）也可以反过来翻译成汇编语言符号。</p><p>我们常用的cpu处理器的发展过程，从8080到奔腾4的过程是，8080、8086/8088、80186、80286、80386、80486、奔腾、奔腾2、奔腾3、奔腾4.</p><p>其中8086/8088开始被使用在了微机上，即我们现在的个人电脑。80386开始在微机上可以做多任务操作，一台个人电脑中的操作系统可以同时处理多项任务。虽然80286也具备了对多任务系统的支持，但它对8086/8088的兼容性支持比较差，所以过度非常困难，于是就有了80386，它既有多任务系统的功能也兼容了8086/8088。</p><h3 id=\"总线\">总线</h3><p>CPU是计算机的核心，要让CPU工作就必须向它提供指令和数据，指令和数据存放在内存，因此内存的作用仅次于CPU。而磁盘则不同与内存，磁盘上的数据或程序集如果不读到内存中就无法被CPU使用，所以对CPU来说，磁盘其实是外部设备。计算机设备中除了CPU芯片外，其他设备中也有属于自己的芯片，比如内存芯片、磁盘芯片、键盘芯片、显卡芯片、网络芯片等等，这些芯片都有自己的寄存器，CPU可以通过这些寄存器与其他芯片进行交流。</p><p>设备与CPU之间的交流都是数据交流（也就是不同高低平的电流），CPU在读写数据时要指明，它要对哪一个器件进行操作，进行哪种操作，是从中读出数据还是写入数据。</p><h4 id=\"那么cpu是通过什么将数据传到其他设备的芯片中去的呢在计算机中有专门连接cpu和其他芯片的导线电线或电流线我们称它为总线总线又分为3类地址总线控制总线数据总线\">那么CPU是通过什么将数据传到其他设备的芯片中去的呢？在计算机中有专门连接CPU和其他芯片的导线（电线或电流线），我们称它为总线。总线又分为3类，地址总线、控制总线、数据总线。</h4><p>这3根总线的分类职责不同，地址总线用于指定内存单元地址，控制总线用于传输指令，数据总线用于传输数据。</p><p>我们来举个例子，CPU要读取内存中3号单元的数据，CPU先通过地址线将地址信息3发给内存芯片，再通过控制总线发出读取内存的指令，指令中选中存储芯片，并通知它将要从中读取数据，最后内存芯片将3号单元中的数据通过数据线送入CPU。反过来，写的步骤也是类似，先通过地址总线将地址信息3发给内存芯片，再通过控制总线向内存芯片发出写入命令，最后通过数据总线将数据传入内心芯片。</p><h4 id=\"我们现在知道了地址总线能传输多少个二进制信息cpu就可以对多少个单元地址进行寻址数据总线也是一样有多少根决定了一次可传二进制数据的大小控制总线是个总称是一些不同控制线的集合有多少根控制总线就意味着cpu提供了对外部器件的多少种控制\">我们现在知道了，地址总线能传输多少个二进制信息，CPU就可以对多少个单元地址进行寻址。数据总线也是一样，有多少根决定了一次可传二进制数据的大小。控制总线是个总称，是一些不同控制线的集合，有多少根控制总线就意味着CPU提供了对外部器件的多少种控制。</h4><p>现在我们一台机子上有很多存储器，包括随机存储器（RAM）、只读存储器（ROM）、显存RAM、网卡ROM等，这些存储器在物理上是独立的器件，它们都与CPU总线相连。</p><p>CPU在地址传输的时候是怎么去识别到底传给哪个存储器的呢？CPU在操控它们的时候，把它们总的当作一个整体的内存空间来看待，相当于若干个存储器排列组成了一个逻辑存储器，每个存储器的存储地址与前一个是紧密连接的，我们称这整个存储空间为，内存地址空间。</p><p>举个例子，假如所有存储器地址加起来为从64KB的空间，即总共0～FFFF的地址，那么主随机存储器的地址空间可能为32KB即 0～7FFF，显存地址空间可能为8KB即 8000～9FFF，其他各个ROM的地址空间为24KB 即 A000～FFFF。如果CPU向内存地址为1000的地址发送数据，就是向主随机存储器发送数据，如果向9000地址写入数据，则为显存空间。</p><p>这里所说的都是外部总线，是CPU连接外部器件的导线集合。其实CPU内部也是有总线把各个部件连接起来的，一个CPU由运算器、控制器、寄存器等器件构成，这些器件就是靠内部总线相连，它们之间相互进行数据传输。</p><h3 id=\"寄存器\">寄存器</h3><p>现代的CPU寄存器由很多种，我们拿最常用的一些来讲，即8086的14个寄存器，AX、BX、CX、DX、SI、DI、SP、BP、IP、CS、SS、DS、ES、PSW。</p><p>通用寄存器有4个，AX、BX、CX、DX，它们可以存放一般性数据，可以看作是平时程序中的变量。它们中又有高低位寄存器来指向它们的高位和低位，即AH和AL为AX的高8位和低8位，BH和BL为BX的高8位和低8位，CH和CL为CX的高8位和低8位，DH和DL为DX的高8位和低8位。</p><p>8086中可以一次性处理8位和16位数据，即字节（byte）和字（word）。即我们可以向AX中传数据也可以向AH和AL上传数据。</p><p>我们来举个例子：</p><pre><code>\tmov ax,18 将18送入AX寄存器\tmov ah,78 将78送入AH寄存器\tadd ax,8 将AX中的值加上8后覆盖AX\t现在ax中的值为86</code></pre><h4 id=\"在汇编代码中寄存器的用法有习惯性用法的讲究比如ax寄存器就是存放临时数据的bx则存放偏移地址数据cx存放的是循环计数数据dx则通常用来存放要访问的数据段地址而sidi与bx的作用一样存放的是内存偏移地址只是它们不能拆分为高低位\">在汇编代码中寄存器的用法有习惯性用法的讲究，比如AX寄存器就是存放临时数据的，BX则存放偏移地址数据，CX存放的是循环计数数据，DX则通常用来存放要访问的数据段地址。而SI、DI与BX的作用一样，存放的是内存偏移地址，只是它们不能拆分为高低位。</h4><p>除了通用寄存器外，还有段寄存器，标志寄存器，也是汇编中重要的寄存器。</p><p>段寄存器用于存放，段内存的起始地址和偏移地址。它们包括，CS、IP、SS、SP、BP、DS。</p><h4 id=\"其中cs和ip就是代码段寄存器cs指向代码段在内存中的起点ip则指向当前执行指令在内存起点中的偏移位置ip指向的地址就是程序要执行的指令位置\">其中CS和IP就是代码段寄存器，CS指向代码段在内存中的起点，IP则指向当前执行指令在内存起点中的偏移位置，IP指向的地址就是程序要执行的指令位置。</h4><h4 id=\"sssp和bp是内存栈的段寄存器其中ss指向栈内存段起点地址sp则指向当前栈顶偏移地址bp有点特殊它和sp联合使用作为sp校准使用因为sp要指向栈顶不能乱动所以sp把地址传给bp由bp来做栈内的寻址\">SS、SP和BP是内存栈的段寄存器，其中SS指向栈内存段起点地址，SP则指向当前栈顶偏移地址，BP有点特殊，它和SP联合使用作为SP校准使用，因为SP要指向栈顶不能乱动，所以SP把地址传给BP，由BP来做栈内的寻址。</h4><p>对于栈操作，计算机有push和pop指令可以使用，即我们先定义号SS和SP好地址后用push和pop操作：</p><pre><code>\tmov ax, 123H ;给一个地址\tmov ss, ax ;段寄存器必须用寄存器操作数值\tmov sp, 100H ;设置栈顶，就是设置栈总大小\tpush bp ;保存bp指针\tmov bp, sp ;把栈顶置针给bp，这时候如果函数有参数，则[bp + 2*4]就是第一个参数位置，[bp + 3*4]就是第二个参数位置，以此类推。\tmov ax, 22 ;把22给ax\tpush ax ;ax中的值推入栈\tpop bx ;把栈中的值推出给bx\t现在bx中数据为22</code></pre><h4 id=\"最后是dsds则是静态数据段的寄存器指向静态数据段的起始地址所有在程序中的常量静态变量都被放在静态数据段中有ds数据段地址指向\">最后是DS，DS则是静态数据段的寄存器，指向静态数据段的起始地址，所有在程序中的常量、静态变量都被放在静态数据段中，有DS数据段地址指向。</h4><p>有了指令内存地址，栈内存地址，静态数据内存地址，我们就可以根据数据执行指令，控制栈顶保存函数临时变量。</p><p>标志寄存器则对各种标志位存储，它包括ZF（零标志）、OF（溢出标志）、DF（方向标志）、CF（进位标志）、PF（奇偶标志）、SF（符号标志）、TF（中断标志）、IF（屏蔽标志）等。</p><pre><code>\tZF 结果是否为0\tOF 加法是否溢出\tDF si、di的增减方向\tCF 进行无符号运算时记录最高有效位的进位值。\tPF 结果是否为偶数\tSF 结果是否为负\tTF 是否有中断程序\tIF 是否屏蔽中断</code></pre><p>这些标志位都是被动被计算机赋值的，只有当我们结束某个操作指令后才会需要去查看它们。</p><h3 id=\"寻址\">寻址</h3><h4 id=\"绝大部分机器指令都是进行数据处理的指令处理大致可分为3类读取写入运算在机器指令这一层来讲并不关心数据的值是多少而关心指令执行前一刻它将要处理的数据所在的位置指令在执行前所要处理的数据可以在3个地方分别是cpu内部内存端口\">绝大部分机器指令都是进行数据处理的指令，处理大致可分为3类：读取、写入、运算。在机器指令这一层来讲，并不关心数据的值是多少，而关心指令执行前一刻，它将要处理的数据所在的位置。指令在执行前，所要处理的数据可以在3个地方，分别是：CPU内部、内存、端口。</h4><p>我们知道CPU通过内存来获得数据，在访问内存时要给出内存的地址，通过地址总线送入存储器芯片必须是一个内存单元的物理地址，于是CPU可访问的内存大小就受到地址总线的限制。</p><p>8086CPU是16位结构的CPU，也就是说8086内部职能一次性处理和传输总长16位的信息，如果将地址从内部简单发出，那么它只能送出16位地址，即只能访问0～FF之间的地址，表现出的寻址能力时64K。</p><h4 id=\"这样的寻址能力太少于是cpu采用了一种内部用两个地址合成一个地址的方法来增加寻址能力即段地址偏移地址--物理地址这样就一下子增加了1倍的寻址能力如果地址总线够宽的话可惜8086只有20根总线因此最大寻址能力只能提高到1mb\">这样的寻址能力太少，于是CPU采用了一种内部用两个地址合成一个地址的方法来增加寻址能力，即“段地址+偏移地址 = 物理地址”，这样就一下子增加了1倍的寻址能力，如果地址总线够宽的话。可惜8086只有20根总线，因此最大寻址能力只能提高到1MB。</h4><p>我们现代计算机中也运用了同样的寻址方式，但是现代计算机中地址总线只有32条和40条，即32位CPU处理器原本只能处理4G内存，64位CPU处理器原本只能处理1T内存（而且还要受到其他地址总线的限制，比如内部总线）。</p><p>段地址是重要的标记位置，是一段内存的起点，因此在程序中有专门的寄存器来存储它们，就是我们前面说的，CS、IP、SS、SP、BP、DS、ES。</p><p>寻址方式分，直接寻址、间接寻址、基址变址寻址，即如下：</p><h4 id=\"例子1数据段寻址\">例子1，数据段寻址：</h4><pre><code>\tmov bx, 1000H ;将1000数据送入bx\tmov ds, bx ;将bx里的数据送入ds\tmov al, [0] ;将ds段地址加上0得到的1000H:0，在该内存地址单元中的数据送入al寄存器\tmov [0], bx ;将bx的数据送入1000H:0内存地址单元中</code></pre><h4 id=\"例子2寄存器寻址\">例子2，寄存器寻址：</h4><pre><code>\tmov bx, 1000H ;将1000H送入bx\tmov ax, [bx] ;根据bx中的值去内存中的单元地址中的值，传送给ax\tmov ax, [bx + 123] ;根据bx+123得到的值去内存中的单元地址中取值，传送给ax\tmov ax, [bx + si] ;根据bx + si的到的值去内存中取值，传送给ax\tmov ax, [bx + si + 123] ;根据bx + si + 123得到的值去内存中的单元地址中取值，传送给ax</code></pre><h4 id=\"例子3段地址寻址\">例子3，段地址寻址：</h4><pre><code>\tmov bx, 1000H ;将1000H送入bx\tmov cs, bx ;将bx的值送入cs代码段寄存器\tmov ax, 0 ;将0送入ax\tadd ax, cs:[bx] ;用段地址+偏移地址的方式获得cs+bx地址，并从该地址上取得数值送入ax</code></pre><h4 id=\"例子4不同类型的数据放入不同的段\">例子4，不同类型的数据放入不同的段：</h4><pre><code>\tassume cs:code, ds:data, ss:stack\tdata segment ; 定义data内容\t\tdw 0123h, 0456h, 0789h, 0abch, 0defh, 0fedh ;dw为字内容即2个byte\tdata ends\tstack segment ; 定义stack内容\t\tdw 0,0,0,0,0,0\tstack ends\tcode segment ; 定义code内容\t\tmov ax, statck ; 将statck地址送入ax\t\tmov ss, ax ; 将ax内容送入ss栈段寄存器\t\tmov sp, 20h ; 将栈顶定义为20h大小\t\tmov ax, data ; 将data定义为\t\tmov ds, ax ; 将ax数据传入ds数据段寄存器\t\tmov bx, 0 ; 将0传入bx\tcode ends\tend start</code></pre><h3 id=\"跳转\">跳转</h3><p>计算机执行机器指令时是顺序的并且根据代码段指针在没有跳转的情况下依次执行下去，这个指针就是IP寄存器。因此跳转就是将原本IP寄存器指向的地址改为我们指定的地址，这样计算机根据IP指针指向的机器指令可以随意操控了。</p><p>最常用的跳转就是loop。计算机在执行loop指令时每次都会在先将cx中的值减1，再判断cx是否为0，如果不为零则跳转到指定地址：</p><pre><code>\tmov cx, 11 ; 将11传送给cx\tmov ax, 1 ; 将1传送给ax\ts: add ax, ax ; 将ax加上ax的值传入ax\t   loop s  ; 先做cx=cx-1操作，再判断cx是否为零，如果不是零则跳转到 s位置，如果是零则继续下一条</code></pre><p>除了修改IP来实现跳转外，我们也可以通过就该CS代码段地址来实现跳转。</p><h4 id=\"只修改ip实现的跳转我们称为段内跳转也称短跳转因为跳转范围在一个寄存器大小范围内而同时修改cs和ip实现的跳转我们称为段间跳转也称为长跳转\">只修改IP实现的跳转，我们称为段内跳转，也称短跳转，因为跳转范围在一个寄存器大小范围内。而同时修改CS和IP实现的跳转，我们称为段间跳转，也称为长跳转。</h4><p>常用的跳转指令有：</p><pre><code>\t无条件跳转 jmp\t有条件跳转 je(相等就跳转)，jcxz（判断cx为0就跳转）\t循环跳转   loop\t调用跳转 call，ret（使用栈中数据修改IP内容实现近跳转），retf（用栈中数据修改CS和IP实现远跳转）\t中断跳转   int</code></pre><p>前面有些一般形式的跳转我们都会理解的比较快，比如jmp，je，jcxz，和loop，都是通过寻址地址跳转，或先做某个判断再跳转。和我们平时写的代码中的，if…else，goto，for循环，switch有很多相似之处，因此理解起来相对比较容易，最多也只是多了一个远近的跳转，也好理解，近跳转只修改IP，远跳转修改了CS和IP。</p><h4 id=\"callretretf和我们平时编写的函数有紧密的联系\">call、ret、retf和我们平时编写的函数有紧密的联系。</h4><p>当call被调用时，它先将当前IP或CS和IP推入到栈中，再进行转移。执行call时相当于：</p><pre><code>\tpush IP\tjmp 某寄存器</code></pre><p>而ret和retf在执行时，会先从栈中推出一个数据传送给IP，或推出2个数据传送给CS与IP。</p><p>ret相当于：</p><pre><code>\tpop IP</code></pre><p>retf相当于</p><pre><code>\tpop IP\tpop CS</code></pre><h4 id=\"这两个指令很像我们代码中的函数调用function-call-和-return时的作用我们来看看这两个指令配合起来是如何运作的\">这两个指令很像我们代码中的函数调用function call 和 return时的作用。我们来看看这两个指令配合起来是如何运作的：</h4><pre><code>\tmov ax, 1 ;将1传送给ax\tmov cx, 3 ;将3传送给cx\tcall s ;先push IP 并且 jump s，指令跳到s段地址上\tmov bx, ax ;将ax的值传送给bx\tmov ax, 4c00h ;将4c00h传送给ax\tint 21h ;中断调用，结束\ts: add ax, ax ;将ax值相加传送给ax\t   loop s ;先cx减去1传送给cx，再判断cx是否为0，如果不为0条转到s，如果为0则继续下一个\t   ret ;pop IP，从栈中取的前面call时推入的地址给IP，实现跳转到 call s 那句指令下\t最后结束前，bx为8，loop了跳转了3次，ax从1自增到了8，call跳转到了s做了循环，做完循环ret又回到了call s下。</code></pre><h4 id=\"有了function和ret的概念我们就可以传递更多参数到栈中在function里去取出栈中的值进行计算在汇编里会变得如何呢我们来看看\">有了function和ret的概念，我们就可以传递更多参数到栈中，在function里去取出栈中的值进行计算，在汇编里会变得如何呢，我们来看看：</h4><pre><code>\tmov ax 1000 ;将1000传入ax\tmov ds ax ;通过ax设置数据内存单元\tmov [101] 10 ;将10传送到数据内存101地址单元上\tmov [102] 20 ;将20传送到数据内存102地址单元上\tpush [101] ;将101数据内存地址单元上的数据推入栈中\tpush [102] ;将102数据内存地址单元上的数据推入栈中\tmov ax, 1 ;将1传入ax\tcall s ;先push IP，再将IP设置为 s段地址上\tmov bx, ax ;将ax中的数值传送给bx\tmov ax 4c00h ;将4c00h传送给ax\tint 21h ;中断调用，结束\ts: pop bx ;从栈中推出数据给bx，其实就是IP值\t   pop dx ;从栈中推出数据给dx，其实就是[102]的值\t   add ax dx ;将ax和dx相加传送给ax\t   pop dx ;从栈中推出数据给dx，其实就是[101]的值\t   add ax dx ;将ax和dx相加传送给ax\t   jmp bx ;直接跳转到call s的位置</code></pre><p>上述程序利用了栈传递数据，在调用 call s之前，在栈中推入了内存地址101和102的值，到s中执行计算时分别推出了IP和两个数据，做完加法后跳转到call s的原位置下，继续执行直到结束。</p><h2 id=\"中断\">中断</h2><p>中断分内部中断和外部中断，中断的意思是CPU不再接着向下执行，而是转去处理特殊的信息。</p><p>CPU具备一种能力，可以在执行完当前正在执行的指令后检测到从CPU外部发过来的或者内部产生的一种特殊信息，并立即处理接收到的信息，这就是中断信息。</p><p>内部中断比如CPU在除法时溢出就会触发内部的中断程序，外部中断比如收到键盘的输入数据时会触发中断程序。</p><p>用来处理中断信息的程序被称中断处理程序，一般来说，需要对不同的中断信息编写不同的处理程序。</p><p>每个中断程序都有一个中断码，通过中断码我们可以找到中断程序。在计算机内存中有一块内存是专门存放中断码和对应的中断程序地址的，我们称为中断向量表：</p><pre><code>\t0号 -&gt; 中断程序入口地址\t1号 -&gt; 中断程序入口地址\t...</code></pre><p>当程序引发中断时过程如下，我们假设发生了除法溢出错误，产生了0号中断信息：</p><pre><code>\t1.除法溢出，产生中断信息，取得中断码\t2.标志寄存器的值入栈（因为在中断过程中要改变标志寄存器值）\t3.设置标志寄存器TF和IF的值为0\t4.CS和IP入栈\t5.根据中断码从中断向量表中取出中断处理程序的入口地址</code></pre><p>中断程序编写的方法和子程序相似：</p><pre><code>\t1.保存用到的寄存器\t2.处理中断\t3.恢复用到的寄存器\t4.调用iret指令返回</code></pre><p>iret指令功能可描述为：</p><pre><code>\tpop IP ;推出地址给指令指针IP\tpop CS ;推出地址给指令段地址给CS\tpopf ;推出标志寄存器</code></pre><h4 id=\"除了系统自带的中断程序外我们也可以自己安装中断程序例如我们常用的try-cache-和-throw-就是利用安装中断程序来做抓异常的功能的\">除了系统自带的中断程序外，我们也可以自己安装中断程序，例如我们常用的Try cache 和 throw 就是利用安装中断程序来做抓异常的功能的。</h4><p>我们来看看，安装中断程序时如何做的：</p><pre><code>\tmov ax, cs ;将cs地址传入ax\tmov ds, ax ;将ax地址传入ds，为后面拷贝做准备\tmov si, offset ss ;设置ds:si指向地址\tmov ax, 0 ;将0传入ax\tmov es, ax ;将ax传入es\tmov di, 200h ;设置es:di指向目的地址\tmov cx, offset sqrend-offset ss ;设置ss中断程序长度\tcld ;设置传输方向为正\trep movsb ; 拷贝ds:si到es:di\tmov ax, 0 ; 设置ax为0\tmov es, ax ; 将ax的0传入es\tmov word ptr es:[7ch*4], 200h ; 修改中断编码7ch的中断程序入口地址\tmov word ptr es:[7ch*4 + 2], 0 ; 修改中断编码7ch的中断程序入口地址\tmov ax, 4c00h ;设置ax\tint 21h ; 结束中断\tss: mul ax ;中断程序，ax乘以ax传入ax\t    iret ;恢复中断</code></pre><p>我们将ss这段程序放入了中断向量表7ch中去，当我们执行 int 7ch 时就执行了ss段程序，虽然这个程序执行完毕后就没有在内存了，但ss这段指令已经被拷贝到了内存中。</p><h4 id=\"我们来看看bios和dos在启动时时如何安装它们的中断程序的\">我们来看看BIOS和DOS在启动时时如何安装它们的中断程序的。</h4><p>1.开机后，CPU一加电，初始化(CS)=0FFFFh，(IP)=0，自动从FFFF:0单元开始执行程序。FFFF:0出油一条跳转指令，CPU执行该指令后转去执行BIOS中的硬件系统检测和初始化程序。</p><p>2.初始化程序将建立BIOS所支持的中断向量表，将BIOS提供的中断程序的入口地址登记在中断向量中。</p><p>3.硬件系统检测和初始化完成后，调用 int 19h 进行操作系统的引导。从此将计算机交由操作系统控制，DOS开始初始化程序。</p><p>4.DOS启动后，除完成其他工作外，还将它所提供的中断程序装入内存，并添加到相应的中断向量表中。</p><h4 id=\"外部中断\">外部中断</h4><p>前面说CPU总线连接了很多芯片，这些芯片都有一组可以由CPU读写的寄存器，虽然这些寄存器都在不同的芯片中，但它们都与总线相连，CPU可以通过控制总线对它们进行读写。</p><p>从CPU的角度看，将这些寄存器都当作端口，对它们进行统一编址，从而建立了一个统一的端口地址空间。每个端口在地址空间中都有一个地址。</p><p>在访问端口时，CPU通过端口地址来定位端口，端口地址范围为0～65535。</p><p>访问端口与访问内存略有不同，访问内存使用mov ax, ds:[8]，将内存地址数据段中的8单元地址上的数据传送到ax，而端口则是 in al, 60h，从60h号端口读入1个字节的数据送入al，out 20h, al 将al上的数据传入到20h端口。</p><p>CPU有了与外部芯片通信的机制，就可以接受外部中断信息。比如，外设的输入到达时，相关芯片就会向CPU发出相应的中断信息。CPU在执行完当前指令后，检测到发过来的中断信息，引发了中断过程，跳转到中断程序处理外设的输入数据。</p><h4 id=\"我们来看看计算机时如何处理键盘输入中断的\">我们来看看计算机时如何处理键盘输入中断的：</h4><p>1.键盘上每个键都相当于一个开关，键盘中有一个芯片对键盘上的每个键的开关状态进行扫描。</p><p>2.按下一个键时，开关接通，该芯片就产生了一个扫描码，扫描码被送入主板上的接口芯片(usb接口)的寄存器中，该寄存器的端口地址通常为60h。</p><p>3.松开按下的键时，也会产生一个扫描码，也同样被送入主板上的接口芯片(usb接口)的寄存器中。</p><p>4.当键盘的输入到达60h端口时，接口芯片就会向CPU发送中断码。CPU检测到该中断信息后，如果IF=1则认为是不可屏蔽中断，接着响应中断引发中断过程，转去执行int 9的中断程序。</p><p>5.BIOS提供了int 9的中断程序，读出60h端口中的扫描码，并送入到内存的键盘缓存中，如果是Ctrl之类的控制键则写入内存中存储状态字节单元，接收完成后向接口芯片发出应答信息。</p><p>6.CPU继续根据内存中键盘缓存中的数据执行相关程序，响应键盘的输入。</p><h4 id=\"除了键盘外磁盘也是外部设备的一种也同样需要通过端口和中断的形式处理相关程序\">除了键盘外，磁盘也是外部设备的一种，也同样需要通过端口和中断的形式处理相关程序。</h4><p>BIOS和操作系统都提供了访问磁盘的中断程序。当需要向磁盘访问数据时，会先在寄存器和内存上设置访问的地址和大小，再发起中断，中断程序会根据设置在寄存器和内存上的信息从磁盘上传输到内存，传输完毕后结束中断。</p><p>下面这个写入数据到3.5英寸软盘为例：</p><pre><code>\tmov ax, 0\tmov es, ax\tmov bx, 200h ; ex:bx指向写入磁盘的数据\tmov al, 1 ; 读取的扇区数\tmov ch, 0 ; 磁道号\tmov cl, 1 ; 扇区号\tmov dl, 0 ; 驱动器号\tmov dh, 0 ; 磁头号\tmov ah, 3 ; 表示写入\tint 13h ; 执行磁盘写入中断</code></pre><p>CPU首先需要告诉磁盘设备，写入还是读取，接着要告诉磁盘写入的内容，以及写入的地址，中断程序在执行完毕写入操作后，结束中断并返回原地址。</p><h4 id=\"总结汇编其实就是机器码的助记符它有很多个寄存器每个寄存器都有不同的用途内存分为几个段不同的内存段有不同的用途通常包括有静态数据段代码段栈空间段我们通过指令可以在内存中寻址也可以在不同的段之间跳转cpu和设备之间用总线连接在一起总线又分为地址总线数据总线控制总线每个设备又都有自己的芯片它们与cpu的通信方式就是通过自己的寄存器cpu统一称它们为端口并为它们做了统一的编号除内存外设备与cpu之间的通信通常使用中断来进行中断程序执行完毕后会跳转到原位置继续执行下面的程序指令\">总结，汇编其实就是机器码的助记符，它有很多个寄存器，每个寄存器都有不同的用途，内存分为几个段，不同的内存段有不同的用途，通常包括有静态数据段、代码段、栈空间段，我们通过指令可以在内存中寻址，也可以在不同的段之间跳转。CPU和设备之间用总线连接在一起，总线又分为地址总线，数据总线，控制总线，每个设备又都有自己的芯片，它们与CPU的通信方式就是通过自己的寄存器，CPU统一称它们为端口并为它们做了统一的编号。除内存外，设备与CPU之间的通信通常使用中断来进行，中断程序执行完毕后会跳转到原位置继续执行下面的程序指令。</h4>",
            "url": "http://www.luzexi.com/2020/10/18/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B012",
            
            
            
            
            
            "date_published": "2020-10-18T00:00:00+08:00",
            "date_modified": "2020-10-18T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/10/11/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B011",
            "title": "读书笔记(十一) 《精力管理》",
            "summary": "读书 书 看书 读后感",
            "content_text": "前面有一段时间，对时间管理着迷，想着能不能通过自我管理的方式去实现更高效率的学习与工作。2019年初，大概有几个月的时间，我用时间限制的方式去履行自己的计划。这段时间非常痛苦，后来我接触了《精力管理》，2019年10月时看完了这本书，发现精力管理比时间管理要好的多，原因是精力管理并不是泯灭人性的，它顺从人性，以精力为基础来告诉我，怎样才能保持活力，扩充精力，打破了时间上的局限。去执行时间管理的这段时间，其实没有白跑，给了很多启示和感悟，我也一直在不断调整自己的作息、生活、工作方式。我接触精力管理后虽然认同，但仍然没有完全放弃时间管理，因为我一直认为时间是比较重要的因素，从那时到现在我尝试了，每日任务、时间块记录、时间限制、打卡表的方式去管理我每日的精力。虽然嘴上说着精力管理，但其实对时间管理的相当严格。在坚持对时间把控的这段时间，其实出了很多问题，我过分关注时间，过分关注自律，导致我的效率虽然提升了些许，但没有像想象的那么好，情绪上也有过反抗和厌弃。我隐隐的知道对精力管理的理解犯了很多错误，似乎我的行动和计划有点偏离了轨道。“肯定是我理解错了”，我这样告诉我自己。我想要的是更高效率的学习、工作和生活，但为什么看似把所有时间利用的很紧凑，也主动去调节自己的情绪和身体的状态，但效率很难提上来，于是我再次阅读了这本书，这次我想把它的弄的明白些。我秉持着不完全相信别人的话的原则去审视这些内容，再次看完后我仍然认为这本书上所讲的值得我们深度参考。我现在是怎么想的呢？我认为人应该从各个方面去扩充自己的精力，并且不是每件事都要竭尽全力去完成的，找出最重要的、最关键的、性价比最高的事情，把精力投入进去，现在的我又加入了一个参考事项，即自己最感兴趣的事，当我发现我对某件事特别感兴趣事（感兴趣的程度非常强烈才算），我会投入大量精力去做去学习，此时的学习效率是最高的，因为我对这件事很好奇很喜欢也很开心去做。短期的最重要和长期的最重要又是不同的，积跬步至千里很必要，给自己一个长期的目标和计划去执行，每天都做一些自己认为对自己长期计划有用的事（比如看书、锻炼、写作），这些事最好能在早上完成，对于一天的开始，我们就能信心满满的去面对，每一天的好的开始是一天成功的一半。下面是我对全书的记录和理解全书着重强调的一点是：精力，而非时间，是高效表现的基础。它说我们做每件事都需要精力，不管是与同事互动、作出每个决定、陪伴家人都需要精力。有技巧的精力管理是高度表现、健康和幸福的基础。事实确实是这样，很多时候我们仅仅希望竭尽所能去完成工作或为生活做出尽可能多的努力，但事实上我们会为眼前的现状作出临时的决策来透支自己，短期这会让现状运作良好，而负面效应却往往在长期的过程中慢慢浮现。面对工作和生活的无尽索取，我们会变得暴躁、易怒，注意力也难以集中，于是结束漫长的一天，我们疲惫的回到家，发现家庭也不再是欢乐和力量的源泉，它成为了超负荷运转的一项负担。我们常常会通过减少睡眠、点外卖填饱肚子、用咖啡提神、用酒精和安眠药放松身心等，短期透支自己的方式来确保自己能够完成短期目标。短期完成目标确实很重要，但我们每天都很忙，我们总是为一个接一个的短期目标不断的透支自己，停不下来，这是问题的根本。我们人的精力有四个来源，体能精力、情感精力、思维精力、意志精力。通过对这4个来源的调整和训练，我们可以掌握精力使用和拓展技巧。体能精力从生理学的角度看，精力来源于氧气和血糖的化学反应。从实际生活来看，精力储备取决于我们的呼吸模式、进食的内容和时间、睡眠的长短和质量、白天间隙恢复的程度以及健康程度。因此建立起体能消耗和恢复的节奏性平衡，能够确保精力储备保持在相对稳定的水平。而走出舒适区，然后等待恢复，则是拓展体力的方法，适用于体力无法满足要求的情况。为了能让体能精力有用良好的表现，我们需要对自己生活中的体能消耗、恢复、拓展做些调整。第一就是调整饮食方式。由于任何一顿丰富的食物都不足以维持4-8小时高效表现，因此我们最好一天内吃5-6餐低热量高营养的食物，少吃多餐并且是低热量高营养，少一些碳水化物和油腻食物，多一些高蛋白食物。进食也需要讲究一下，其一不要让自己感到饥饿才去进食，此时精力早已耗尽。其二不要去追求饱腹感，吃后会感到撑胀，这样会额外消耗一部分我们的精力，补充精力不充分。其三要多喝水，水是调节身体内部运转的有力催化剂。第二，调整生理周期和睡眠。充足的睡眠是活力的保障，思维能力，即反应时间、专注力、记忆力、逻辑分析和辩证能力，会随着睡眠不足而衰退。我们人每晚需要7-8小时的睡眠才能在第二天运转良好。除了充足的睡眠，小息也是一种精力恢复的手段，睡眠研究员、心理学家发现每4个小时小睡20-30分钟仍可以保持超过24小时的惊人高效和敏锐。第三，增加体能训练。体力丧失是机体衰老和能力下降的显著特征，随着年龄的增长，新陈代谢速度减慢，过了40岁如果没有日常的力量训练，人们将平均每年失去0.5磅的肌肉重量。力量训练可以全面增强精力、加速新陈代谢、强健心脏。精力消耗和再生都是活跃的生理过程，从经验上看，体能、情感、思维、意志精力的单线化消耗都不利于最优表现，甚至会随着时间出现潜在的危害。因此我们需要注意在消耗精力的同时加入更多的，补充饮食、小息、锻炼，以恢复和拓展精力。情感精力情感精力可以将威胁转化为挑战，为了发挥出最佳水平，我们必须调动积极愉悦的感情：喜悦的、爱挑战的、爱冒险的，这样才能保持正面积极的精力。在实际应用中，自信、自控、社交技巧及共情能够牵动积极情感的肌肉。若要调动情感肌肉塑造最佳表现，也同样要创造定期使用和间歇恢复的平衡，以及拓展情感肌肉。说实在的，这比起体力层面要困难的多。压力和负面情绪是消耗情感肌肉的主要途径，那么如何恢复呢？答案是获得正面情感。正面情感可以更有效地支配个人表现，它对团体也有积极的影响。第一就是兴趣活动。由于我们人的兴趣各异，这些兴趣可以激发出我们的正面情绪，即享受、满足和安全感。有些人可能喜欢唱歌、园艺、跳舞、亲热、练瑜伽、读书、体育活动、听音乐会，或仅仅静坐自省。这其中的关键是要表达出你对这些兴趣活动的重视，并将投入在它们上面的时间视为神圣不可侵犯。这些活动对你的吸引力越大，程度越丰富，生动性越强，对情感再生的深度和质量也越好。不仅快乐本身便是奖赏，从更实际的角度看，快乐也是维持最佳表现的重要因素。第二，让人际关系促进精力再生。一段健康的友谊可以带来积极的情感精力，例如在工作环境中交一位好友，与好友有丰富的互动，包括付出与回报、倾诉与倾听、珍视他人和被人同等珍视。不仅如此，在家中与妻子的亲密互动，与孩子们的亲密互动，在学校中与同学们以及亲密好友的交头接耳，都可以认为是从人际关系角度促进精力再生的方式。这给我们带来了情感上的滋润、放松、享受。第三，积极扩充情感容量。我们可以通过一些仪式习惯来达成，比如定期与同事有深入的交流，定期与家人有一段亲密的互动，定期去做些公益活动，定期去上语言和心理学课程等。情感容量的最高境界是接纳不同情感的能力，我们很容易重视某些情绪技巧而忽略了另外一些。比如我们可能过于看重强硬而藐视温和，也可能恰恰相反。其实两种品质对情感肌肉同等重要。还有很多相互对立的品质，例如自控与积极，坦率与感伤，慷慨与节俭，开放与审慎，激情与淡漠，耐心与急迫，谨慎与鲁莽，自信与谦逊等。只有接受那些看似相反的品质，不逼自己在其间二选一，才有可能获得最深刻最丰富的情感能力。思维精力思维精力可以让我们保持专注。为了发挥出最好的水平，我们必须保持专注，在整体方向和局部目标之间灵活游走，一方面我们要看清事物的本质，另一方面我们还要朝着目标成果积极努力。而缺乏思维精力会让我们注意力涣散，过于悲观，思维固化，眼光狭窄。体能、情感、思维，三方面的精力是相辅相成的，身体层面睡眠少或亚健康导致的疲倦，会使得注意力难以集中；感情层面的焦虑、挫败、愤怒的情绪也会干扰注意力，损害乐观心态，尤其是面临高强度压力的情况时。那么怎么来优化思维精力呢？第一，在放松中思考。世界上绝大多数工作环境都充斥着一条或明显或隐晦的错误信息，长时间连续工作是高产出的最佳途径，按时休息不会受到奖励，白天抽时间活动不会得到赞扬等等。这些都错误的认知，只有在放松中思考（或者说间歇性休整）才能真正迸发出创造力。《如何像达芬奇一样思考》一书中提出了颇为深意的问题“什么场合你会获得最佳灵感？”，经过多年的收集，最普遍的答案是：沐浴的时候、躺床上的时候、在自然中散步的时候、听音乐的时候、慢跑的时候、冥想的时候、做梦和海边度假的时候等等。达芬奇也曾说过“最伟大的天才，有时工作越少成果越出色。时不时离开工作放松一下是个非常好的习惯，当你回到工作时，做出的判断会更加准确。”。精神外科专家罗杰用科学的方式解释了这种现象，大脑左半球有语言神经，有条理、按次序地工作，通过逻辑推演得出结论，右半球更擅长视觉化和空间概念，有更强的全局观，能将事物的部分与整体联系起来。间隙地让右大脑主持大局，可以让我们从占据我们多数工作时间的左脑理性分析模式中脱离出来，得到有效恢复。因此为了能够有更多的创造力，我们应该间隙的调动左右半脑交替思考。第二，重塑大脑。我们要重点强调的是，积极使用大脑能够提升其运转能力，反之使用不足则会萎缩。不管你处于什么年龄段，都可以持续优化大脑，大脑会因为使用而日益敏锐，越磨越锋利。年轻人的思维具有很强的可塑性，学习一门新语言之类的复杂过程都轻而易举。随着年龄的增长，思维肌肉的调动越来越少，学习新语言或新技能就变得更加困难，带来了加倍的挫折感。为了避免不适感（有时是避免丢脸），人们很容易放弃，结果导致本可避免的大脑退化进一步加重。其实每当人们学习新的事物时，都会建立起大脑细胞新的联结。即使你已经出现老化的征兆，甚至部分大脑细胞受损，你仍然可以依靠这些新的联结完就部分脑细胞。学习新的体育活动可以帮助我们打造新的肌肉，学习新的电脑技能，新的课程，新的语言和单词，能够帮助我们锻炼大脑，塑造思维肌肉。意志精力这里需要解释一下，书中的意志精力并不是我们理解的“意志力”或“毅力”。他想表达的是，精神层面的动力，即热情、愿景、意义。本质上说，意志精力是一股掌管所有维度行为的独特力量，它是动机最丰富的源泉，通向最深层的价值取向和超越个人利益的意图。意志精力能让我们活出人生的意义：我们究竟为了什么而活下去，为了什么而工作，知晓生命的意义，方能忍耐一切。一个人如果有自己的人生目标，他的勇气和信念，即使面对艰难困苦时，会展现出更加积极的一面，这就时意志精力饱满的体现。但是人们往往在悲剧发生后才会意识到意志精力的重要性。著名演员克里斯托佛1995年骑马时摔下来不幸瘫痪，绝望的情绪笼罩着他，甚至有过自杀的念头。但他找到了自己的意志精力的来源，想要继续陪伴家人、继续为这个世界贡献力量。这种强烈的意愿帮助他振作起来，在体能严重不足、极易产生脆弱绝望情绪的情况下，最终依靠希望、乐观恢复了专注和清晰的思维。实际上意志精力的更新来源于价值观和使命感的启发和带领。价值观和使命感也不是那么容易找到，其实我们过分关注了自身的利益，这导致我们的思维受到局限，使得我们往往被自身的生存和不安全感打败，陷入狭隘。人们往往认为自身需求迫在眉睫，注意力一旦转移，便会发生原始的生存恐惧。如果我把精力用在别人身上，谁来关照我？但具有讽刺意味的是，自私自利反而会削弱精力，妨碍表现。我们越是被自己的恐惧和担忧掌控，越难调动精力做出正确的举措。将个人利益置后起初会让人倍感不安，但实际上这样做回报颇丰，你通过帮助他人提升个人价值，同时也丰富人生意义。因此我们应该更多的想着怎么去帮助他人会更好（不是盲目的帮，要从本质上帮助他们在未来摆脱困境，而不是暂时的摆脱），在帮助他人的同时，我们能学到和得到比个人利益更大的东西，比如人生的意义，社会的本质，以及群体的利益。因此意志精力在深层的价值取向所带来的生活方式是生活的主心骨，而且能帮助我们更好地应对各种挑战。",
            "content_html": "<p>前面有一段时间，对时间管理着迷，想着能不能通过自我管理的方式去实现更高效率的学习与工作。</p><p>2019年初，大概有几个月的时间，我用时间限制的方式去履行自己的计划。这段时间非常痛苦，后来我接触了《精力管理》，2019年10月时看完了这本书，发现精力管理比时间管理要好的多，原因是精力管理并不是泯灭人性的，它顺从人性，以精力为基础来告诉我，怎样才能保持活力，扩充精力，打破了时间上的局限。</p><p>去执行时间管理的这段时间，其实没有白跑，给了很多启示和感悟，我也一直在不断调整自己的作息、生活、工作方式。我接触精力管理后虽然认同，但仍然没有完全放弃时间管理，因为我一直认为时间是比较重要的因素，从那时到现在我尝试了，每日任务、时间块记录、时间限制、打卡表的方式去管理我每日的精力。虽然嘴上说着精力管理，但其实对时间管理的相当严格。</p><p>在坚持对时间把控的这段时间，其实出了很多问题，我过分关注时间，过分关注自律，导致我的效率虽然提升了些许，但没有像想象的那么好，情绪上也有过反抗和厌弃。我隐隐的知道对精力管理的理解犯了很多错误，似乎我的行动和计划有点偏离了轨道。“肯定是我理解错了”，我这样告诉我自己。</p><p>我想要的是更高效率的学习、工作和生活，但为什么看似把所有时间利用的很紧凑，也主动去调节自己的情绪和身体的状态，但效率很难提上来，于是我再次阅读了这本书，这次我想把它的弄的明白些。我秉持着不完全相信别人的话的原则去审视这些内容，再次看完后我仍然认为这本书上所讲的值得我们深度参考。</p><p>我现在是怎么想的呢？我认为人应该从各个方面去扩充自己的精力，并且不是每件事都要竭尽全力去完成的，找出最重要的、最关键的、性价比最高的事情，把精力投入进去，现在的我又加入了一个参考事项，即自己最感兴趣的事，当我发现我对某件事特别感兴趣事（感兴趣的程度非常强烈才算），我会投入大量精力去做去学习，此时的学习效率是最高的，因为我对这件事很好奇很喜欢也很开心去做。短期的最重要和长期的最重要又是不同的，积跬步至千里很必要，给自己一个长期的目标和计划去执行，每天都做一些自己认为对自己长期计划有用的事（比如看书、锻炼、写作），这些事最好能在早上完成，对于一天的开始，我们就能信心满满的去面对，每一天的好的开始是一天成功的一半。</p><h3 id=\"下面是我对全书的记录和理解\">下面是我对全书的记录和理解</h3><p>全书着重强调的一点是：精力，而非时间，是高效表现的基础。</p><p>它说我们做每件事都需要精力，不管是与同事互动、作出每个决定、陪伴家人都需要精力。有技巧的精力管理是高度表现、健康和幸福的基础。</p><p>事实确实是这样，很多时候我们仅仅希望竭尽所能去完成工作或为生活做出尽可能多的努力，但事实上我们会为眼前的现状作出临时的决策来透支自己，短期这会让现状运作良好，而负面效应却往往在长期的过程中慢慢浮现。面对工作和生活的无尽索取，我们会变得暴躁、易怒，注意力也难以集中，于是结束漫长的一天，我们疲惫的回到家，发现家庭也不再是欢乐和力量的源泉，它成为了超负荷运转的一项负担。</p><p>我们常常会通过减少睡眠、点外卖填饱肚子、用咖啡提神、用酒精和安眠药放松身心等，短期透支自己的方式来确保自己能够完成短期目标。</p><p>短期完成目标确实很重要，但我们每天都很忙，我们总是为一个接一个的短期目标不断的透支自己，停不下来，这是问题的根本。</p><h3 id=\"我们人的精力有四个来源体能精力情感精力思维精力意志精力\">我们人的精力有四个来源，体能精力、情感精力、思维精力、意志精力。</h3><p>通过对这4个来源的调整和训练，我们可以掌握精力使用和拓展技巧。</p><h4 id=\"体能精力\">体能精力</h4><p>从生理学的角度看，精力来源于氧气和血糖的化学反应。从实际生活来看，精力储备取决于我们的呼吸模式、进食的内容和时间、睡眠的长短和质量、白天间隙恢复的程度以及健康程度。</p><p>因此建立起体能消耗和恢复的节奏性平衡，能够确保精力储备保持在相对稳定的水平。而走出舒适区，然后等待恢复，则是拓展体力的方法，适用于体力无法满足要求的情况。</p><p>为了能让体能精力有用良好的表现，我们需要对自己生活中的体能消耗、恢复、拓展做些调整。</p><p>第一就是调整饮食方式。由于任何一顿丰富的食物都不足以维持4-8小时高效表现，因此我们最好一天内吃5-6餐低热量高营养的食物，少吃多餐并且是低热量高营养，少一些碳水化物和油腻食物，多一些高蛋白食物。进食也需要讲究一下，其一不要让自己感到饥饿才去进食，此时精力早已耗尽。其二不要去追求饱腹感，吃后会感到撑胀，这样会额外消耗一部分我们的精力，补充精力不充分。其三要多喝水，水是调节身体内部运转的有力催化剂。</p><p>第二，调整生理周期和睡眠。充足的睡眠是活力的保障，思维能力，即反应时间、专注力、记忆力、逻辑分析和辩证能力，会随着睡眠不足而衰退。我们人每晚需要7-8小时的睡眠才能在第二天运转良好。除了充足的睡眠，小息也是一种精力恢复的手段，睡眠研究员、心理学家发现每4个小时小睡20-30分钟仍可以保持超过24小时的惊人高效和敏锐。</p><p>第三，增加体能训练。体力丧失是机体衰老和能力下降的显著特征，随着年龄的增长，新陈代谢速度减慢，过了40岁如果没有日常的力量训练，人们将平均每年失去0.5磅的肌肉重量。力量训练可以全面增强精力、加速新陈代谢、强健心脏。</p><h4 id=\"精力消耗和再生都是活跃的生理过程从经验上看体能情感思维意志精力的单线化消耗都不利于最优表现甚至会随着时间出现潜在的危害因此我们需要注意在消耗精力的同时加入更多的补充饮食小息锻炼以恢复和拓展精力\">精力消耗和再生都是活跃的生理过程，从经验上看，体能、情感、思维、意志精力的单线化消耗都不利于最优表现，甚至会随着时间出现潜在的危害。因此我们需要注意在消耗精力的同时加入更多的，补充饮食、小息、锻炼，以恢复和拓展精力。</h4><h4 id=\"情感精力\">情感精力</h4><p>情感精力可以将威胁转化为挑战，为了发挥出最佳水平，我们必须调动积极愉悦的感情：喜悦的、爱挑战的、爱冒险的，这样才能保持正面积极的精力。在实际应用中，自信、自控、社交技巧及共情能够牵动积极情感的肌肉。</p><p>若要调动情感肌肉塑造最佳表现，也同样要创造定期使用和间歇恢复的平衡，以及拓展情感肌肉。说实在的，这比起体力层面要困难的多。</p><p>压力和负面情绪是消耗情感肌肉的主要途径，那么如何恢复呢？答案是获得正面情感。正面情感可以更有效地支配个人表现，它对团体也有积极的影响。</p><p>第一就是兴趣活动。由于我们人的兴趣各异，这些兴趣可以激发出我们的正面情绪，即享受、满足和安全感。有些人可能喜欢唱歌、园艺、跳舞、亲热、练瑜伽、读书、体育活动、听音乐会，或仅仅静坐自省。</p><h4 id=\"这其中的关键是要表达出你对这些兴趣活动的重视并将投入在它们上面的时间视为神圣不可侵犯这些活动对你的吸引力越大程度越丰富生动性越强对情感再生的深度和质量也越好不仅快乐本身便是奖赏从更实际的角度看快乐也是维持最佳表现的重要因素\">这其中的关键是要表达出你对这些兴趣活动的重视，并将投入在它们上面的时间视为神圣不可侵犯。这些活动对你的吸引力越大，程度越丰富，生动性越强，对情感再生的深度和质量也越好。不仅快乐本身便是奖赏，从更实际的角度看，快乐也是维持最佳表现的重要因素。</h4><p>第二，让人际关系促进精力再生。一段健康的友谊可以带来积极的情感精力，例如在工作环境中交一位好友，与好友有丰富的互动，包括付出与回报、倾诉与倾听、珍视他人和被人同等珍视。不仅如此，在家中与妻子的亲密互动，与孩子们的亲密互动，在学校中与同学们以及亲密好友的交头接耳，都可以认为是从人际关系角度促进精力再生的方式。这给我们带来了情感上的滋润、放松、享受。</p><p>第三，积极扩充情感容量。我们可以通过一些仪式习惯来达成，比如定期与同事有深入的交流，定期与家人有一段亲密的互动，定期去做些公益活动，定期去上语言和心理学课程等。</p><h4 id=\"情感容量的最高境界是接纳不同情感的能力我们很容易重视某些情绪技巧而忽略了另外一些比如我们可能过于看重强硬而藐视温和也可能恰恰相反其实两种品质对情感肌肉同等重要还有很多相互对立的品质例如自控与积极坦率与感伤慷慨与节俭开放与审慎激情与淡漠耐心与急迫谨慎与鲁莽自信与谦逊等\">情感容量的最高境界是接纳不同情感的能力，我们很容易重视某些情绪技巧而忽略了另外一些。比如我们可能过于看重强硬而藐视温和，也可能恰恰相反。其实两种品质对情感肌肉同等重要。还有很多相互对立的品质，例如自控与积极，坦率与感伤，慷慨与节俭，开放与审慎，激情与淡漠，耐心与急迫，谨慎与鲁莽，自信与谦逊等。</h4><h4 id=\"只有接受那些看似相反的品质不逼自己在其间二选一才有可能获得最深刻最丰富的情感能力\">只有接受那些看似相反的品质，不逼自己在其间二选一，才有可能获得最深刻最丰富的情感能力。</h4><h3 id=\"思维精力\">思维精力</h3><p>思维精力可以让我们保持专注。为了发挥出最好的水平，我们必须保持专注，在整体方向和局部目标之间灵活游走，一方面我们要看清事物的本质，另一方面我们还要朝着目标成果积极努力。而缺乏思维精力会让我们注意力涣散，过于悲观，思维固化，眼光狭窄。</p><p>体能、情感、思维，三方面的精力是相辅相成的，身体层面睡眠少或亚健康导致的疲倦，会使得注意力难以集中；感情层面的焦虑、挫败、愤怒的情绪也会干扰注意力，损害乐观心态，尤其是面临高强度压力的情况时。</p><p>那么怎么来优化思维精力呢？</p><p>第一，在放松中思考。世界上绝大多数工作环境都充斥着一条或明显或隐晦的错误信息，长时间连续工作是高产出的最佳途径，按时休息不会受到奖励，白天抽时间活动不会得到赞扬等等。这些都错误的认知，只有在放松中思考（或者说间歇性休整）才能真正迸发出创造力。</p><p>《如何像达芬奇一样思考》一书中提出了颇为深意的问题“什么场合你会获得最佳灵感？”，经过多年的收集，最普遍的答案是：沐浴的时候、躺床上的时候、在自然中散步的时候、听音乐的时候、慢跑的时候、冥想的时候、做梦和海边度假的时候等等。</p><p>达芬奇也曾说过“最伟大的天才，有时工作越少成果越出色。时不时离开工作放松一下是个非常好的习惯，当你回到工作时，做出的判断会更加准确。”。</p><h4 id=\"精神外科专家罗杰用科学的方式解释了这种现象大脑左半球有语言神经有条理按次序地工作通过逻辑推演得出结论右半球更擅长视觉化和空间概念有更强的全局观能将事物的部分与整体联系起来间隙地让右大脑主持大局可以让我们从占据我们多数工作时间的左脑理性分析模式中脱离出来得到有效恢复\">精神外科专家罗杰用科学的方式解释了这种现象，大脑左半球有语言神经，有条理、按次序地工作，通过逻辑推演得出结论，右半球更擅长视觉化和空间概念，有更强的全局观，能将事物的部分与整体联系起来。间隙地让右大脑主持大局，可以让我们从占据我们多数工作时间的左脑理性分析模式中脱离出来，得到有效恢复。</h4><p>因此为了能够有更多的创造力，我们应该间隙的调动左右半脑交替思考。</p><p>第二，重塑大脑。我们要重点强调的是，积极使用大脑能够提升其运转能力，反之使用不足则会萎缩。不管你处于什么年龄段，都可以持续优化大脑，大脑会因为使用而日益敏锐，越磨越锋利。</p><h4 id=\"年轻人的思维具有很强的可塑性学习一门新语言之类的复杂过程都轻而易举随着年龄的增长思维肌肉的调动越来越少学习新语言或新技能就变得更加困难带来了加倍的挫折感为了避免不适感有时是避免丢脸人们很容易放弃结果导致本可避免的大脑退化进一步加重\">年轻人的思维具有很强的可塑性，学习一门新语言之类的复杂过程都轻而易举。随着年龄的增长，思维肌肉的调动越来越少，学习新语言或新技能就变得更加困难，带来了加倍的挫折感。为了避免不适感（有时是避免丢脸），人们很容易放弃，结果导致本可避免的大脑退化进一步加重。</h4><h4 id=\"其实每当人们学习新的事物时都会建立起大脑细胞新的联结即使你已经出现老化的征兆甚至部分大脑细胞受损你仍然可以依靠这些新的联结完就部分脑细胞学习新的体育活动可以帮助我们打造新的肌肉学习新的电脑技能新的课程新的语言和单词能够帮助我们锻炼大脑塑造思维肌肉\">其实每当人们学习新的事物时，都会建立起大脑细胞新的联结。即使你已经出现老化的征兆，甚至部分大脑细胞受损，你仍然可以依靠这些新的联结完就部分脑细胞。学习新的体育活动可以帮助我们打造新的肌肉，学习新的电脑技能，新的课程，新的语言和单词，能够帮助我们锻炼大脑，塑造思维肌肉。</h4><h3 id=\"意志精力\">意志精力</h3><p>这里需要解释一下，书中的意志精力并不是我们理解的“意志力”或“毅力”。他想表达的是，精神层面的动力，即热情、愿景、意义。</p><p>本质上说，意志精力是一股掌管所有维度行为的独特力量，它是动机最丰富的源泉，通向最深层的价值取向和超越个人利益的意图。</p><p>意志精力能让我们活出人生的意义：我们究竟为了什么而活下去，为了什么而工作，知晓生命的意义，方能忍耐一切。一个人如果有自己的人生目标，他的勇气和信念，即使面对艰难困苦时，会展现出更加积极的一面，这就时意志精力饱满的体现。</p><p>但是人们往往在悲剧发生后才会意识到意志精力的重要性。著名演员克里斯托佛1995年骑马时摔下来不幸瘫痪，绝望的情绪笼罩着他，甚至有过自杀的念头。但他找到了自己的意志精力的来源，想要继续陪伴家人、继续为这个世界贡献力量。这种强烈的意愿帮助他振作起来，在体能严重不足、极易产生脆弱绝望情绪的情况下，最终依靠希望、乐观恢复了专注和清晰的思维。</p><p>实际上意志精力的更新来源于价值观和使命感的启发和带领。</p><p>价值观和使命感也不是那么容易找到，其实我们过分关注了自身的利益，这导致我们的思维受到局限，使得我们往往被自身的生存和不安全感打败，陷入狭隘。</p><p>人们往往认为自身需求迫在眉睫，注意力一旦转移，便会发生原始的生存恐惧。如果我把精力用在别人身上，谁来关照我？但具有讽刺意味的是，自私自利反而会削弱精力，妨碍表现。我们越是被自己的恐惧和担忧掌控，越难调动精力做出正确的举措。</p><h4 id=\"将个人利益置后起初会让人倍感不安但实际上这样做回报颇丰你通过帮助他人提升个人价值同时也丰富人生意义因此我们应该更多的想着怎么去帮助他人会更好不是盲目的帮要从本质上帮助他们在未来摆脱困境而不是暂时的摆脱在帮助他人的同时我们能学到和得到比个人利益更大的东西比如人生的意义社会的本质以及群体的利益\">将个人利益置后起初会让人倍感不安，但实际上这样做回报颇丰，你通过帮助他人提升个人价值，同时也丰富人生意义。因此我们应该更多的想着怎么去帮助他人会更好（不是盲目的帮，要从本质上帮助他们在未来摆脱困境，而不是暂时的摆脱），在帮助他人的同时，我们能学到和得到比个人利益更大的东西，比如人生的意义，社会的本质，以及群体的利益。</h4><h6 id=\"因此意志精力在深层的价值取向所带来的生活方式是生活的主心骨而且能帮助我们更好地应对各种挑战\">因此意志精力在深层的价值取向所带来的生活方式是生活的主心骨，而且能帮助我们更好地应对各种挑战。</h6>",
            "url": "http://www.luzexi.com/2020/10/11/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B011",
            
            
            
            
            
            "date_published": "2020-10-11T00:00:00+08:00",
            "date_modified": "2020-10-11T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/09/20/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A852",
            "title": "思路探讨(五十二) 无题",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "很多时候我们应该付出行动去实践，去打破现有的笼子，而不是光靠脑子想，因为大部分时候脑子想出来的很实际情况是完全不一样的。积极的行动和开朗的笑容可以打破现实中的困局，是不可多得的良药，虽然这不是万能的，但我们不应该因为害怕失败而退缩，害怕爱而选择不爱，害怕比赛而不参加，害怕与人比较而避而远之。不要害怕，没什么东西是一定及肯定的，我们要努力去接受不确定性，去选择勇敢的面对失败。世界上也没有完美的东西，你可能有些知识但没有钱，你可能有点钱但没有好看的皮囊。接受这个世界的不完美，没有一个人是容易的，不要太在意，但我们可以持续的去努力。如果你太在意很可能扰乱了你的心智，会掉入更大的深渊，不要掉进那个坑。《做时间的朋友》里有一句话说到点子上了。“如果你行为上散发着快乐，心理上就不可能存放的了忧郁。有时候即使是装着的，装着装着，也就真的回到了快乐点线上。强迫自己回到快乐，在现实中是可行的。”这就是快速从悲伤中走出来的最好办法。失败不可怕，实际上它占据了我们生活的大部分时间，无论是谁都是一样的。我们更应该关注失败后的调整，不管是心态调整还是对这事上的策略的调整，谁能更快的调整过来，谁能更好的从失败中反思到真正的重点，那么谁就会能更快的走出失败的阴影。不过走出失败并不一定代表走向成功，也许只是试错的更快了，但这也让我们更加接近最终的成功，每个人都不一样，试错的长度和速度也不同。不要看到别人失败就幸灾乐祸，“专注于吸取教训，而不是幸灾乐祸”，这件事本身都不容易做到，是反人类的行为。人类毕竟是动物，很多时候都不太理智，我们应该时刻想着如何控制自己的脑袋做些更加有意义的事情。大部分上面所说的包括积极的行动、开朗的笑容、勇于面对、专注于吸取教训，对大脑来说都是相当困难的，它们都是逆大脑正常运作方向的，这使得它们会损耗大脑许多能量，因此很多时候我们做着做着就做不下去了。唯一的办法就是让它变成一种习惯，在大脑中建立起一个链路，由于习惯就是大脑中的一条链路，没有链路时做起来很生疏也很难受，只要链路建立起来，在执行时脑力就能畅通，这使得我们损耗的能量就会减少许多，就不会那么痛苦了。这根链路就是习惯性积极行动、习惯性乐观开朗、习惯性面对困难、习惯性吸取教训。实际上轻松的学习是无效的，就像人家说什么你就信什么那样，完全是错误的，只有经过自己的仔细思考和分析，才能将知识真正的消耗到自己脑袋里。《做时间的朋友》说，与其关注成功者，不如反其道而行之，努力从失败者身上汲取经验。不要说模仿成功者，就算观察成功者也很困难，成功者很多，但是，我们身边真正的成功者却很少。成功背后的东西很难看清楚，所谓成功的真实性也很难判断，成功者们又会有意无意地美化和包装他们的经验，而这一切都在干扰我们的判断。不过，观察失败者却相对容易得多，因为失败者的失败往往是明显的、确定的、失败的真正原因也往往很容易查实。并且我们身边失败者的数量显然要多于成功者的数量。如此，我们也就有了更多的观察机会。很多时候，不仅归纳经验需要很长时间，通过演绎论证归纳出来的经验可能需要更长的时间，所以一定要保持足够的耐心。要知道有些阶段是无法跨越，很多人不懂等待的必要性，最终的结局是，同样等了，因为心急如焚但不得不等，最终等来的结果却是另外一个，反正不是通过耐心等待应该获得的那个。",
            "content_html": "<p>很多时候我们应该付出行动去实践，去打破现有的笼子，而不是光靠脑子想，因为大部分时候脑子想出来的很实际情况是完全不一样的。</p><p>积极的行动和开朗的笑容可以打破现实中的困局，是不可多得的良药，虽然这不是万能的，但我们不应该因为害怕失败而退缩，害怕爱而选择不爱，害怕比赛而不参加，害怕与人比较而避而远之。不要害怕，没什么东西是一定及肯定的，我们要努力去接受不确定性，去选择勇敢的面对失败。</p><p>世界上也没有完美的东西，你可能有些知识但没有钱，你可能有点钱但没有好看的皮囊。接受这个世界的不完美，没有一个人是容易的，不要太在意，但我们可以持续的去努力。如果你太在意很可能扰乱了你的心智，会掉入更大的深渊，不要掉进那个坑。</p><p>《做时间的朋友》里有一句话说到点子上了。“如果你行为上散发着快乐，心理上就不可能存放的了忧郁。有时候即使是装着的，装着装着，也就真的回到了快乐点线上。强迫自己回到快乐，在现实中是可行的。”这就是快速从悲伤中走出来的最好办法。</p><p>失败不可怕，实际上它占据了我们生活的大部分时间，无论是谁都是一样的。我们更应该关注失败后的调整，不管是心态调整还是对这事上的策略的调整，谁能更快的调整过来，谁能更好的从失败中反思到真正的重点，那么谁就会能更快的走出失败的阴影。不过走出失败并不一定代表走向成功，也许只是试错的更快了，但这也让我们更加接近最终的成功，每个人都不一样，试错的长度和速度也不同。</p><p>不要看到别人失败就幸灾乐祸，“专注于吸取教训，而不是幸灾乐祸”，这件事本身都不容易做到，是反人类的行为。人类毕竟是动物，很多时候都不太理智，我们应该时刻想着如何控制自己的脑袋做些更加有意义的事情。</p><p>大部分上面所说的包括积极的行动、开朗的笑容、勇于面对、专注于吸取教训，对大脑来说都是相当困难的，它们都是逆大脑正常运作方向的，这使得它们会损耗大脑许多能量，因此很多时候我们做着做着就做不下去了。唯一的办法就是让它变成一种习惯，在大脑中建立起一个链路，由于习惯就是大脑中的一条链路，没有链路时做起来很生疏也很难受，只要链路建立起来，在执行时脑力就能畅通，这使得我们损耗的能量就会减少许多，就不会那么痛苦了。这根链路就是习惯性积极行动、习惯性乐观开朗、习惯性面对困难、习惯性吸取教训。</p><p>实际上轻松的学习是无效的，就像人家说什么你就信什么那样，完全是错误的，只有经过自己的仔细思考和分析，才能将知识真正的消耗到自己脑袋里。</p><p>《做时间的朋友》说，与其关注成功者，不如反其道而行之，努力从失败者身上汲取经验。不要说模仿成功者，就算观察成功者也很困难，成功者很多，但是，我们身边真正的成功者却很少。成功背后的东西很难看清楚，所谓成功的真实性也很难判断，成功者们又会有意无意地美化和包装他们的经验，而这一切都在干扰我们的判断。不过，观察失败者却相对容易得多，因为失败者的失败往往是明显的、确定的、失败的真正原因也往往很容易查实。并且我们身边失败者的数量显然要多于成功者的数量。如此，我们也就有了更多的观察机会。</p><p>很多时候，不仅归纳经验需要很长时间，通过演绎论证归纳出来的经验可能需要更长的时间，所以一定要保持足够的耐心。要知道有些阶段是无法跨越，很多人不懂等待的必要性，最终的结局是，同样等了，因为心急如焚但不得不等，最终等来的结果却是另外一个，反正不是通过耐心等待应该获得的那个。</p>",
            "url": "http://www.luzexi.com/2020/09/20/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A852",
            
            
            
            
            
            "date_published": "2020-09-20T00:00:00+08:00",
            "date_modified": "2020-09-20T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/09/06/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A853",
            "title": "思路探讨(五十三) 生活的原理",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "近几年一直追寻各种原理，觉得人这一生对原理的理解特别重要，人能理解多少原理并且能够融会贯通是能够好好活在这个世界上比较关键的事。这与看清本质有些许相似，但比它更广泛，也更务实些。1.例如工作，我一直追寻它的底层原理。即，我为什么要工作，人类工作的原理是什么。其实资本论已经告诉我们了，工作就是出卖脑力和体力给资本家。我们都需要钱，怎么赚钱最容易呢，就是给资本家打工。深推一步，我们打工仔就可以认为是一个资源，资本家需要资源帮助它实现梦想，我们就是这些资源。资源供大于求则价格会比较便宜，供不应求则会比较贵。因此打工的工资多与少，取决于你的稀缺度，以及需求量。因此我们会看到，需求大但人才稀缺(通常都是门槛高：知识深度门槛、思维多样化门槛、包容力门槛、交际圈门槛等)的职位工资通常比较高。这是供需平衡决定的。我们除了出卖体力和脑力来换钱外，不要忘了工作也让我们得到了锻炼、学到了新的知识，前提是你真的得到了锻炼和学习到了新的知识，而不是天天瞎混或只做些重复的劳动。为了能让自己更稀缺，我们应该走不寻常的路，只有不寻常才会让我们成为稀缺的人。这在整个社会也是同样的原理，生活中，我们要做到稀缺。做别人做不到的，做别人不敢做的，以及做别人想不到的。这也是为什么我常常鼓励自己试着反相操作的本质，我同你们一样，不想平庸。2.我也进一步学习和思考了，做事的原理。无论做什么事，我们平时包括自己的工作、学习、家庭、朋友、事业，会有非常多的事需要我们去做。我们应该如何处理？做事的原理是什么？我在32岁左右才终于明白了事情是做不完的这个道理，生活会不断的冒出很多事情让我们来做，因此很重要的一点是事情的顺序，做事情的顺序决定了我们效率。效率有多重要呢，如果你每天的效率比别人高1%，那么365天后你拉开了与别人34.5倍的效率差距，3、5年下来你能将别人与自己拉开几个层级，让你变得“稀缺”。“要事优先”就是最高效的做事方式。什么事情是最重要的，要先做。先想“什么事情是最重要的”，再做或把重要的精力放在最重要的事情上。看上去简单的手法执行起来却相当困难。为什么呢？首先是我们很难分清楚，“什么是重要的事情”。不知你是否能体会到，我们大部分时候，认为的重要的事情其实并不重要，这也是导致我们努力白费的主要原因。“什么事情最重要”如果我们没有弄明白这一点，我们做的都是无用功。其次通常摆在我们眼前的有，近期最重要的事情，近期最紧急的事情，长期最重要的事情，以及近期次重要的事情，近期次紧急的事情，长期次重要的事情。很多人常会一直处于处理紧急的事情当中极度焦虑，另一些人则徘徊在近期最紧急与近期最重要的事情之间无法自拔。而很少有人能从近期紧急的事情中抽离出来，做近期最重要的事情，同时能兼顾长期最重要的事情。这种人很稀缺。3.快感的原理我一直在探索大脑的运作方式，前面探索了几年大脑与习惯之间的联系，发现习惯是大脑中的连接体，它可以通过每天一点点的练习来建立连接，从而建立好的习惯。人类快感的原理，也是大脑的运作方式之一。我们生活中有很多追求快感的场景，例如，美食、性爱、刺激、冒险、视觉盛宴等等都是快感之一。这是因为人类大脑中分泌的多巴胺。多巴胺，让大脑产生快感，所以称它为快乐激素。除了产生快乐，多巴胺还可以帮助大脑更好的指挥肌肉和提高人体协调性，让人类可以做更多精细化的运动，同时帮助大脑记忆和学习更多东西，因此我们需要更多的多巴胺来让大脑高效运作。从某种程度上说，大脑对快感的追求推动了人类文明的进步。我们对美食的追求，对冒险的挑战，对未知的探索，对工具的制作都是快感直接或间接推动的结果。运动、聊天、打游戏、看电影、刷抖音、喝酒、抽烟都会分泌多巴胺。但大脑更倾向与更简单的方式获得快感，吸烟、喝酒、刷抖音就是最简单获得快感的方式，我们称它们为垃圾快感。垃圾快感的特点是容易获得，与垃圾食品一样快速有效，只要我们拿起手机就能刷抖音享受视觉盛宴，美食塞进嘴巴里就能获得快感，点上只烟就能飘飘欲仙，喝杯酒就能醉生梦死，大脑左右了我们，明知道垃圾快感会对我们产生危害，它却欺骗我们说，由于不会马上产生危害，那就“先获得快感，等危害真的来了再说”。于是这些人在大脑的自我欺骗中吞云吐雾、纵情狂欢，人的健康和智慧在经年累月后逐渐瓦解。无法抵制诱惑，是我们诸多痛苦的来源之一。于是相对的，另一种快感并不这么容易获得，它也会分泌多巴胺，而且分泌的还不少，只是没有这么容易。规律的运动、积极或激烈的讨论、达成新的目标、完成某件事、充足的睡眠饱满的精力，都会分泌多巴胺带来快感。快感会推动我们继续去寻找更多的快感，这是大脑享受后的反应。如果我们能自律的放弃垃圾快感，转而追求对长期更有益的快感来推动我们前进的话，我们的成就、能力、智慧就会被快感带领着走向巅峰。那么怎样才能控制自己的快感，让它在更有益的方向上释放呢？靠的就是自律和延迟满足，为了让多巴胺每天都分泌多一些，我们每天都要有充足的睡眠、规律的运动、制定一些小目标、积极的分享和交流。为了不让自己及时行乐，我们推崇延迟满足，让自己在积累后从成就中得到更大的快乐。就这样慢慢地我们的成就会越来越大，智慧会越来越多，多巴胺也不断在分泌，不断推动着我们继续向前，形成了一个良性的循环。",
            "content_html": "<p>近几年一直追寻各种原理，觉得人这一生对原理的理解特别重要，人能理解多少原理并且能够融会贯通是能够好好活在这个世界上比较关键的事。这与看清本质有些许相似，但比它更广泛，也更务实些。</p><h3 id=\"1例如工作我一直追寻它的底层原理\">1.例如工作，我一直追寻它的底层原理。</h3><p>即，我为什么要工作，人类工作的原理是什么。其实资本论已经告诉我们了，工作就是出卖脑力和体力给资本家。我们都需要钱，怎么赚钱最容易呢，就是给资本家打工。</p><p>深推一步，我们打工仔就可以认为是一个资源，资本家需要资源帮助它实现梦想，我们就是这些资源。资源供大于求则价格会比较便宜，供不应求则会比较贵。因此打工的工资多与少，取决于你的稀缺度，以及需求量。因此我们会看到，需求大但人才稀缺(通常都是门槛高：知识深度门槛、思维多样化门槛、包容力门槛、交际圈门槛等)的职位工资通常比较高。这是供需平衡决定的。</p><p>我们除了出卖体力和脑力来换钱外，不要忘了工作也让我们得到了锻炼、学到了新的知识，前提是你真的得到了锻炼和学习到了新的知识，而不是天天瞎混或只做些重复的劳动。</p><h3 id=\"为了能让自己更稀缺我们应该走不寻常的路只有不寻常才会让我们成为稀缺的人这在整个社会也是同样的原理生活中我们要做到稀缺做别人做不到的做别人不敢做的以及做别人想不到的这也是为什么我常常鼓励自己试着反相操作的本质我同你们一样不想平庸\">为了能让自己更稀缺，我们应该走不寻常的路，只有不寻常才会让我们成为稀缺的人。这在整个社会也是同样的原理，生活中，我们要做到稀缺。做别人做不到的，做别人不敢做的，以及做别人想不到的。这也是为什么我常常鼓励自己试着反相操作的本质，我同你们一样，不想平庸。</h3><h3 id=\"2我也进一步学习和思考了做事的原理\">2.我也进一步学习和思考了，做事的原理。</h3><p>无论做什么事，我们平时包括自己的工作、学习、家庭、朋友、事业，会有非常多的事需要我们去做。我们应该如何处理？做事的原理是什么？</p><p>我在32岁左右才终于明白了事情是做不完的这个道理，生活会不断的冒出很多事情让我们来做，因此很重要的一点是事情的顺序，做事情的顺序决定了我们效率。</p><p>效率有多重要呢，如果你每天的效率比别人高1%，那么365天后你拉开了与别人34.5倍的效率差距，3、5年下来你能将别人与自己拉开几个层级，让你变得“稀缺”。</p><p>“要事优先”就是最高效的做事方式。什么事情是最重要的，要先做。先想“什么事情是最重要的”，再做或把重要的精力放在最重要的事情上。</p><p>看上去简单的手法执行起来却相当困难。为什么呢？</p><h3 id=\"首先是我们很难分清楚什么是重要的事情不知你是否能体会到我们大部分时候认为的重要的事情其实并不重要这也是导致我们努力白费的主要原因什么事情最重要如果我们没有弄明白这一点我们做的都是无用功\">首先是我们很难分清楚，“什么是重要的事情”。不知你是否能体会到，我们大部分时候，认为的重要的事情其实并不重要，这也是导致我们努力白费的主要原因。“什么事情最重要”如果我们没有弄明白这一点，我们做的都是无用功。</h3><h3 id=\"其次通常摆在我们眼前的有近期最重要的事情近期最紧急的事情长期最重要的事情以及近期次重要的事情近期次紧急的事情长期次重要的事情\">其次通常摆在我们眼前的有，近期最重要的事情，近期最紧急的事情，长期最重要的事情，以及近期次重要的事情，近期次紧急的事情，长期次重要的事情。</h3><p>很多人常会一直处于处理紧急的事情当中极度焦虑，另一些人则徘徊在近期最紧急与近期最重要的事情之间无法自拔。而很少有人能从近期紧急的事情中抽离出来，做近期最重要的事情，同时能兼顾长期最重要的事情。这种人很稀缺。</p><h3 id=\"3快感的原理\">3.快感的原理</h3><p>我一直在探索大脑的运作方式，前面探索了几年大脑与习惯之间的联系，发现习惯是大脑中的连接体，它可以通过每天一点点的练习来建立连接，从而建立好的习惯。</p><p>人类快感的原理，也是大脑的运作方式之一。我们生活中有很多追求快感的场景，例如，美食、性爱、刺激、冒险、视觉盛宴等等都是快感之一。</p><p>这是因为人类大脑中分泌的多巴胺。多巴胺，让大脑产生快感，所以称它为快乐激素。除了产生快乐，多巴胺还可以帮助大脑更好的指挥肌肉和提高人体协调性，让人类可以做更多精细化的运动，同时帮助大脑记忆和学习更多东西，因此我们需要更多的多巴胺来让大脑高效运作。</p><p>从某种程度上说，大脑对快感的追求推动了人类文明的进步。我们对美食的追求，对冒险的挑战，对未知的探索，对工具的制作都是快感直接或间接推动的结果。</p><p>运动、聊天、打游戏、看电影、刷抖音、喝酒、抽烟都会分泌多巴胺。但大脑更倾向与更简单的方式获得快感，吸烟、喝酒、刷抖音就是最简单获得快感的方式，我们称它们为垃圾快感。</p><h3 id=\"垃圾快感的特点是容易获得与垃圾食品一样快速有效只要我们拿起手机就能刷抖音享受视觉盛宴美食塞进嘴巴里就能获得快感点上只烟就能飘飘欲仙喝杯酒就能醉生梦死大脑左右了我们明知道垃圾快感会对我们产生危害它却欺骗我们说由于不会马上产生危害那就先获得快感等危害真的来了再说于是这些人在大脑的自我欺骗中吞云吐雾纵情狂欢人的健康和智慧在经年累月后逐渐瓦解\">垃圾快感的特点是容易获得，与垃圾食品一样快速有效，只要我们拿起手机就能刷抖音享受视觉盛宴，美食塞进嘴巴里就能获得快感，点上只烟就能飘飘欲仙，喝杯酒就能醉生梦死，大脑左右了我们，明知道垃圾快感会对我们产生危害，它却欺骗我们说，由于不会马上产生危害，那就“先获得快感，等危害真的来了再说”。于是这些人在大脑的自我欺骗中吞云吐雾、纵情狂欢，人的健康和智慧在经年累月后逐渐瓦解。</h3><p>无法抵制诱惑，是我们诸多痛苦的来源之一。于是相对的，另一种快感并不这么容易获得，它也会分泌多巴胺，而且分泌的还不少，只是没有这么容易。</p><h3 id=\"规律的运动积极或激烈的讨论达成新的目标完成某件事充足的睡眠饱满的精力都会分泌多巴胺带来快感\">规律的运动、积极或激烈的讨论、达成新的目标、完成某件事、充足的睡眠饱满的精力，都会分泌多巴胺带来快感。</h3><h3 id=\"快感会推动我们继续去寻找更多的快感这是大脑享受后的反应如果我们能自律的放弃垃圾快感转而追求对长期更有益的快感来推动我们前进的话我们的成就能力智慧就会被快感带领着走向巅峰\">快感会推动我们继续去寻找更多的快感，这是大脑享受后的反应。如果我们能自律的放弃垃圾快感，转而追求对长期更有益的快感来推动我们前进的话，我们的成就、能力、智慧就会被快感带领着走向巅峰。</h3><h3 id=\"那么怎样才能控制自己的快感让它在更有益的方向上释放呢靠的就是自律和延迟满足为了让多巴胺每天都分泌多一些我们每天都要有充足的睡眠规律的运动制定一些小目标积极的分享和交流为了不让自己及时行乐我们推崇延迟满足让自己在积累后从成就中得到更大的快乐就这样慢慢地我们的成就会越来越大智慧会越来越多多巴胺也不断在分泌不断推动着我们继续向前形成了一个良性的循环\">那么怎样才能控制自己的快感，让它在更有益的方向上释放呢？靠的就是自律和延迟满足，为了让多巴胺每天都分泌多一些，我们每天都要有充足的睡眠、规律的运动、制定一些小目标、积极的分享和交流。为了不让自己及时行乐，我们推崇延迟满足，让自己在积累后从成就中得到更大的快乐。就这样慢慢地我们的成就会越来越大，智慧会越来越多，多巴胺也不断在分泌，不断推动着我们继续向前，形成了一个良性的循环。</h3>",
            "url": "http://www.luzexi.com/2020/09/06/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A853",
            
            
            
            
            
            "date_published": "2020-09-06T00:00:00+08:00",
            "date_modified": "2020-09-06T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/08/31/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A851",
            "title": "思路探讨(五十一) 回顾自律",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "趁着最近休息，回顾一下最近大半年自己做的事情。自律仍然是我的主旋律，我用每日打卡的方式，让自己不忘记每天需要做的事。我为自己列了一个表，这个表上每天都有自己要做的事情，虽然量不是很大，但足以提醒自己每天要完成的任务，毕竟我还有工作要做，而且最近半年的工作压力也特别的大。来看看打卡的记录：[办公室打卡图][宿舍打卡图]我把打卡分成办公室打卡和宿舍打卡，分别贴在公司的座位上和宿舍的墙上，让自己无论在公司还是在宿舍都能清楚的知道自己除了工作还有什么事情需要做。打卡的目的是坚持和培养习惯，这是我自从看过《微习惯》后，从书中领悟到的东西。即，我要的是一个长期的东西，这个东西能不断地积累并带给我越来越多的好处，可能它一开始几年会慢一些，效果很不明显，但随着年份的积累，它会形成一条像护城河那样的壁垒，让我成为人群中的佼佼者，逐渐与他人拉开差距。强壮的身体、良好的习惯和优秀的思维方式，就是我所追寻的那个能带给我无尽好处的长期的东西，它无法靠一时的冲刺来拉近距离。[滴答清单]虽然我最近3年一直坚持着这个理念，但最初那一年并没有想的很明白。那时我不明白的还有很多，包括我要成为什么样的人，我究竟想要什么，我活着的意义是什么，等等。即使在现在也依旧有些模糊，但这并不妨碍我继续前进。庆幸的是我开始逐渐有了自己独特的见解，与众人观察到的有所区别，是完全属于自己的理念和体系。这对我来说是比较关键的一个突破，这使得我可以经营自己的理念，即使它不怎么样我也可以通过不断改善来完善自己的体系，从而让它变得更加契合这个世界并带着我走在世界的更前头。[时间块]所有的这些都跟时间有关，我控制着时间，也被时间控制着，这是个相互作用的过程。我并没有使用时间管理，因为这不符合人性，但我也不排斥使用时间管理，它有其长处，我们不应该带有偏见的眼光看待它。这些记录都只是我希望能更好的控制我自己去达到自己想要达到的旅途中的一些过程和记录​。我知道很多厉害的家伙已经习惯把时间按掐的很准确而没有一丝心理反抗，而我还不行，我只能把每天的时间分成很多个15分钟，每个15分钟我都会记录下这15分钟里做了什么。这样我每天结束时就能知道今天做了什么，或者今天的效率如何。第二天我可以知道前一天或前一段时间的做事的效率和自律执行的情况，从而不断调整自己的状态。这些对时间的理解我都是跟《跟时间做朋友》学的，这本书给了我很多启发。包括下面这段话，我刚又从我的笔记中翻出来看了一遍，觉得自己应该更多的向这方面靠拢。去更多的帮助别人、鼓励别人，我们在帮助和鼓励别人的同时，自己的能力、视野得到了进一步的提升。“当我们不停地鼓励所有人的时候，最大的受益者其实是我们自己，因为最终我们会发现，自己开始进入一种他人无法想象的状态，成为一个不需要他人鼓励的人。这一点很重要，原因就在于他们是必须获得别人的鼓励才敢于行动的人。可以，我们却能成为另一种人，不需要别人鼓励就能不断前进的人，这是一种境界。”我仍然在很多事情上做的不够，特别是在长期重要的事情和短期重要的事情中，我时常搞不清楚到底谁比较重要，这使得我常疲于应付手头上紧急的事情而忽略了长期重要的事情，过后我又常常自责，没有好好守护自己的原则。这也是我时常为自己无法看清这个世界而痛苦的原因。这也激励着我继续前进，失败是很平常的，成功只是偶然。我希望我们能够坚持积累，当质变到来时，我们就会有更大的成就感。",
            "content_html": "<p>趁着最近休息，回顾一下最近大半年自己做的事情。</p><p>自律仍然是我的主旋律，我用每日打卡的方式，让自己不忘记每天需要做的事。我为自己列了一个表，这个表上每天都有自己要做的事情，虽然量不是很大，但足以提醒自己每天要完成的任务，毕竟我还有工作要做，而且最近半年的工作压力也特别的大。</p><p>来看看打卡的记录：</p><p>[办公室打卡图]</p><p>[宿舍打卡图]</p><p>我把打卡分成办公室打卡和宿舍打卡，分别贴在公司的座位上和宿舍的墙上，让自己无论在公司还是在宿舍都能清楚的知道自己除了工作还有什么事情需要做。</p><h3 id=\"打卡的目的是坚持和培养习惯这是我自从看过微习惯后从书中领悟到的东西即我要的是一个长期的东西这个东西能不断地积累并带给我越来越多的好处可能它一开始几年会慢一些效果很不明显但随着年份的积累它会形成一条像护城河那样的壁垒让我成为人群中的佼佼者逐渐与他人拉开差距强壮的身体良好的习惯和优秀的思维方式就是我所追寻的那个能带给我无尽好处的长期的东西它无法靠一时的冲刺来拉近距离\">打卡的目的是坚持和培养习惯，这是我自从看过《微习惯》后，从书中领悟到的东西。即，我要的是一个长期的东西，这个东西能不断地积累并带给我越来越多的好处，可能它一开始几年会慢一些，效果很不明显，但随着年份的积累，它会形成一条像护城河那样的壁垒，让我成为人群中的佼佼者，逐渐与他人拉开差距。强壮的身体、良好的习惯和优秀的思维方式，就是我所追寻的那个能带给我无尽好处的长期的东西，它无法靠一时的冲刺来拉近距离。</h3><p>[滴答清单]</p><p>虽然我最近3年一直坚持着这个理念，但最初那一年并没有想的很明白。那时我不明白的还有很多，包括我要成为什么样的人，我究竟想要什么，我活着的意义是什么，等等。即使在现在也依旧有些模糊，但这并不妨碍我继续前进。</p><p>庆幸的是我开始逐渐有了自己独特的见解，与众人观察到的有所区别，是完全属于自己的理念和体系。</p><h3 id=\"这对我来说是比较关键的一个突破这使得我可以经营自己的理念即使它不怎么样我也可以通过不断改善来完善自己的体系从而让它变得更加契合这个世界并带着我走在世界的更前头\">这对我来说是比较关键的一个突破，这使得我可以经营自己的理念，即使它不怎么样我也可以通过不断改善来完善自己的体系，从而让它变得更加契合这个世界并带着我走在世界的更前头。</h3><p>[时间块]</p><p>所有的这些都跟时间有关，我控制着时间，也被时间控制着，这是个相互作用的过程。我并没有使用时间管理，因为这不符合人性，但我也不排斥使用时间管理，它有其长处，我们不应该带有偏见的眼光看待它。这些记录都只是我希望能更好的控制我自己去达到自己想要达到的旅途中的一些过程和记录​。</p><p>我知道很多厉害的家伙已经习惯把时间按掐的很准确而没有一丝心理反抗，而我还不行，我只能把每天的时间分成很多个15分钟，每个15分钟我都会记录下这15分钟里做了什么。这样我每天结束时就能知道今天做了什么，或者今天的效率如何。第二天我可以知道前一天或前一段时间的做事的效率和自律执行的情况，从而不断调整自己的状态。</p><h3 id=\"这些对时间的理解我都是跟跟时间做朋友学的这本书给了我很多启发包括下面这段话我刚又从我的笔记中翻出来看了一遍觉得自己应该更多的向这方面靠拢去更多的帮助别人鼓励别人我们在帮助和鼓励别人的同时自己的能力视野得到了进一步的提升\">这些对时间的理解我都是跟《跟时间做朋友》学的，这本书给了我很多启发。包括下面这段话，我刚又从我的笔记中翻出来看了一遍，觉得自己应该更多的向这方面靠拢。去更多的帮助别人、鼓励别人，我们在帮助和鼓励别人的同时，自己的能力、视野得到了进一步的提升。</h3><p>“当我们不停地鼓励所有人的时候，最大的受益者其实是我们自己，因为最终我们会发现，自己开始进入一种他人无法想象的状态，成为一个不需要他人鼓励的人。这一点很重要，原因就在于他们是必须获得别人的鼓励才敢于行动的人。可以，我们却能成为另一种人，不需要别人鼓励就能不断前进的人，这是一种境界。”</p><h3 id=\"我仍然在很多事情上做的不够特别是在长期重要的事情和短期重要的事情中我时常搞不清楚到底谁比较重要这使得我常疲于应付手头上紧急的事情而忽略了长期重要的事情过后我又常常自责没有好好守护自己的原则这也是我时常为自己无法看清这个世界而痛苦的原因\">我仍然在很多事情上做的不够，特别是在长期重要的事情和短期重要的事情中，我时常搞不清楚到底谁比较重要，这使得我常疲于应付手头上紧急的事情而忽略了长期重要的事情，过后我又常常自责，没有好好守护自己的原则。这也是我时常为自己无法看清这个世界而痛苦的原因。</h3><h3 id=\"这也激励着我继续前进失败是很平常的成功只是偶然我希望我们能够坚持积累当质变到来时我们就会有更大的成就感\">这也激励着我继续前进，失败是很平常的，成功只是偶然。我希望我们能够坚持积累，当质变到来时，我们就会有更大的成就感。</h3>",
            "url": "http://www.luzexi.com/2020/08/31/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A851",
            
            
            
            
            
            "date_published": "2020-08-31T00:00:00+08:00",
            "date_modified": "2020-08-31T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/08/28/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A850",
            "title": "思路探讨(五十) 去同质化",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "由于我们从小到大的经历了不同，所以我们每个人的个性都不一样，但在对待工作和学习时却总是趋于同质化。年轻时我们都喜欢让自己特别些，喜欢穿些稀奇古怪的搭配，从不拘泥于传统，嘴里总是挂着“我可不是普通人”、“好酷啊”。成年后，我们被社会打磨的没有了棱角，特别是在对待工作和学习这两个问题上，大家都特别的小心，以至于小心得过了头，没有了自己的主见，鲜少的深入思考。我们这样小心翼翼的的原因可以有很多，这样的借口我自己都能找出很多，例如有房贷压力、有家庭需要养活、经济萧条工作不好找等等。这些都是我们自己束缚自己的借口，自己给自己设了一个笼子。其根源是我们人不想改变，对改变有恐惧感，所以想在舒适区里多待会。如果你想成为高人，想让自己有所成，就得直面这些困难，主动出击，而不是躲躲藏藏被动受敌。说的简单点，就是让自己变得特别些。当你变得特别时，你才有可能突破重围，至少你能被大家记住，而不像其他人那样一转身就被人忘得一干二净。问题是我们被同质化太久，已经忘记了什么是特别。同质化使得我们发现不了我所处的位置。例如我是一个程序员，作为以写程序为生的程序员，无论是普通的还是资深的还是专家，大部分都只是整个工作流水线上的一个节点，开发着功能和组件。如果大家都是流水线上的节点，那么谁来制造流水线呢？让自己特别些，去发现和创造新的流水线，让自己成为流水线的创造者，而不是维护者。大部分程序员都用一门语言搞定工作，一个IDE，一个操作系统，一种类型项目，一个引擎从头用到尾。我们不如做的特别些，多学几门语言，多用几个IDE，多做几种类型的项目，多学习几种类型的引擎和操作系统。做得特别些，这能让我们的视野更加开阔，也很容易能让别人记住我们的才华。同质化使得我们一直沿着某个方向行走而学不会拐弯。这就像脑筋急转弯里的问题，“老王没有头发却为什么每天都去理发店？”，题目暗示了‘老王’去理发，因为我们的脑袋被同质化了，通常去理发店都是理发，谁能想到老王其实是理发师呢。工作中和生活中，我们常常陷入别人给我们的暗示，例如队友告诉你出Bug的原因，上级告诉你工作的方向，老师告诉你学习要努力，妈妈告诉你和她不可能结婚等等。根据我的经验，别人给出的方向通常使得我们走更多的弯路。不如做的特别些，甚至不妨往反相走一走，不按队友给出的套路查Bug，上级给出的方向当作次要方向自己再想一个更重要的方向去突破，不死记硬背劳逸结合多维度开发兴趣，来个“曲线救国”让不可能成为可能，逆水行舟可能是很难，但也有可能是最近的捷径，不要被他人的提示所局限。同质化使我们远离危险却离危机更近环境会被我们习惯，无论是工作环境还是生活坏境，都渐渐趋向于平稳和熟悉，舒适区是真的舒服，它看起来让我们远离危险，实际上却离危机越来越近。当真正危机来临时，没有与危险相处习惯的我们会很受伤。不如做的特别些，当大家都在安逸时，我们多走一步，多折腾一把，很可能就是另一番天地。时刻保持警惕，烫水不可怕，烫伤了我们可以缩回来治疗，最怕的是温水煮青蛙，当明白过来时可能我们已无力回天。",
            "content_html": "<p>由于我们从小到大的经历了不同，所以我们每个人的个性都不一样，但在对待工作和学习时却总是趋于同质化。</p><p>年轻时我们都喜欢让自己特别些，喜欢穿些稀奇古怪的搭配，从不拘泥于传统，嘴里总是挂着“我可不是普通人”、“好酷啊”。</p><p>成年后，我们被社会打磨的没有了棱角，特别是在对待工作和学习这两个问题上，大家都特别的小心，以至于小心得过了头，没有了自己的主见，鲜少的深入思考。</p><p>我们这样小心翼翼的的原因可以有很多，这样的借口我自己都能找出很多，例如有房贷压力、有家庭需要养活、经济萧条工作不好找等等。这些都是我们自己束缚自己的借口，自己给自己设了一个笼子。其根源是我们人不想改变，对改变有恐惧感，所以想在舒适区里多待会。</p><p>如果你想成为高人，想让自己有所成，就得直面这些困难，主动出击，而不是躲躲藏藏被动受敌。</p><p>说的简单点，就是让自己变得特别些。当你变得特别时，你才有可能突破重围，至少你能被大家记住，而不像其他人那样一转身就被人忘得一干二净。</p><p>问题是我们被同质化太久，已经忘记了什么是特别。</p><h3 id=\"同质化使得我们发现不了我所处的位置\">同质化使得我们发现不了我所处的位置。</h3><p>例如我是一个程序员，作为以写程序为生的程序员，无论是普通的还是资深的还是专家，大部分都只是整个工作流水线上的一个节点，开发着功能和组件。如果大家都是流水线上的节点，那么谁来制造流水线呢？</p><p>让自己特别些，去发现和创造新的流水线，让自己成为流水线的创造者，而不是维护者。</p><p>大部分程序员都用一门语言搞定工作，一个IDE，一个操作系统，一种类型项目，一个引擎从头用到尾。我们不如做的特别些，多学几门语言，多用几个IDE，多做几种类型的项目，多学习几种类型的引擎和操作系统。</p><p>做得特别些，这能让我们的视野更加开阔，也很容易能让别人记住我们的才华。</p><h3 id=\"同质化使得我们一直沿着某个方向行走而学不会拐弯\">同质化使得我们一直沿着某个方向行走而学不会拐弯。</h3><p>这就像脑筋急转弯里的问题，“老王没有头发却为什么每天都去理发店？”，题目暗示了‘老王’去理发，因为我们的脑袋被同质化了，通常去理发店都是理发，谁能想到老王其实是理发师呢。</p><p>工作中和生活中，我们常常陷入别人给我们的暗示，例如队友告诉你出Bug的原因，上级告诉你工作的方向，老师告诉你学习要努力，妈妈告诉你和她不可能结婚等等。</p><p>根据我的经验，别人给出的方向通常使得我们走更多的弯路。不如做的特别些，甚至不妨往反相走一走，不按队友给出的套路查Bug，上级给出的方向当作次要方向自己再想一个更重要的方向去突破，不死记硬背劳逸结合多维度开发兴趣，来个“曲线救国”让不可能成为可能，逆水行舟可能是很难，但也有可能是最近的捷径，不要被他人的提示所局限。</p><h3 id=\"同质化使我们远离危险却离危机更近\">同质化使我们远离危险却离危机更近</h3><p>环境会被我们习惯，无论是工作环境还是生活坏境，都渐渐趋向于平稳和熟悉，舒适区是真的舒服，它看起来让我们远离危险，实际上却离危机越来越近。当真正危机来临时，没有与危险相处习惯的我们会很受伤。</p><p>不如做的特别些，当大家都在安逸时，我们多走一步，多折腾一把，很可能就是另一番天地。时刻保持警惕，烫水不可怕，烫伤了我们可以缩回来治疗，最怕的是温水煮青蛙，当明白过来时可能我们已无力回天。</p>",
            "url": "http://www.luzexi.com/2020/08/28/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A850",
            
            
            
            
            
            "date_published": "2020-08-28T00:00:00+08:00",
            "date_modified": "2020-08-28T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/08/24/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A14",
            "title": "给女儿的信(四)",
            "summary": "女儿 教育 亲情",
            "content_text": "Hi Sharon and Anne, 爸爸周四回来了，爸爸有5天的假期来陪你们，爸爸想你们也很爱你们。最近爸爸在学习上知道了一件事，想跟你们说一说。爸爸最近几年学了很多东西，在脑子里装满了知识，但有时学过了的知识总是忘记，特别是要用到的时候总是记不起来。有些知识爸爸在书里看到过的，或者从别人嘴里听到过的，甚至自己还背过，总是不能在该用到的时候记起来。爸爸琢磨了很久，为什么自己学过的知识，总是忘记呢。后来爸爸发现了，原来自己从书里看过的，从别人嘴里听过的知识，是无法在脑袋里留下深刻的印象的，因为我们只是看过或者听过。于是爸爸琢磨着，怎么才能让这些学过的知识和听过的知识，有更深刻的印象。爸爸找到了一个很好的方法，那就是讲给别人听。当爸爸把自己知道的知识和事情讲给别人听的时候，这些知识和事情就深深的留在了爸爸的脑袋里，爸爸讲的次数越多，知识在脑袋里留下的印象越深刻。这个方法让爸爸的学习的效率倍增。于是爸爸每次遇到别人聊起某个知识时，爸爸就会滔滔不绝的跟他讲爸爸所有知道的事情。有时候爸爸讲的并不好，于是爸爸就回去查资料，看书，把不知道的部分再补充一下，下次再遇到他或者其他人聊起这个知识时，爸爸就再跟他们讲一次。可能跟别人讲自己知道的知识机会很难得，所以爸爸每次都要好好把握好好讲。除了教别人知识外，爸爸还把自己知道的知识写下来，发到网上去，这样就是在教大家学知识了，不仅让大家学到了知识，自己也对知识有了很好的梳理和巩固。Sharon Anne 如果你们想让学习更高效，记住的东西更多，记得把它们讲出来，说给别人听哦，多多教别人怎么做怎么写怎么说，这样我们自己会有很大的进步哦。爸爸周四就回来看你们，爱你们哦！",
            "content_html": "<p>Hi Sharon and Anne, 爸爸周四回来了，爸爸有5天的假期来陪你们，爸爸想你们也很爱你们。</p><p>最近爸爸在学习上知道了一件事，想跟你们说一说。爸爸最近几年学了很多东西，在脑子里装满了知识，但有时学过了的知识总是忘记，特别是要用到的时候总是记不起来。有些知识爸爸在书里看到过的，或者从别人嘴里听到过的，甚至自己还背过，总是不能在该用到的时候记起来。</p><p>爸爸琢磨了很久，为什么自己学过的知识，总是忘记呢。后来爸爸发现了，原来自己从书里看过的，从别人嘴里听过的知识，是无法在脑袋里留下深刻的印象的，因为我们只是看过或者听过。于是爸爸琢磨着，怎么才能让这些学过的知识和听过的知识，有更深刻的印象。</p><p>爸爸找到了一个很好的方法，那就是讲给别人听。当爸爸把自己知道的知识和事情讲给别人听的时候，这些知识和事情就深深的留在了爸爸的脑袋里，爸爸讲的次数越多，知识在脑袋里留下的印象越深刻。这个方法让爸爸的学习的效率倍增。</p><p>于是爸爸每次遇到别人聊起某个知识时，爸爸就会滔滔不绝的跟他讲爸爸所有知道的事情。有时候爸爸讲的并不好，于是爸爸就回去查资料，看书，把不知道的部分再补充一下，下次再遇到他或者其他人聊起这个知识时，爸爸就再跟他们讲一次。</p><p>可能跟别人讲自己知道的知识机会很难得，所以爸爸每次都要好好把握好好讲。</p><p>除了教别人知识外，爸爸还把自己知道的知识写下来，发到网上去，这样就是在教大家学知识了，不仅让大家学到了知识，自己也对知识有了很好的梳理和巩固。</p><p>Sharon Anne 如果你们想让学习更高效，记住的东西更多，记得把它们讲出来，说给别人听哦，多多教别人怎么做怎么写怎么说，这样我们自己会有很大的进步哦。</p><p>爸爸周四就回来看你们，爱你们哦！</p>",
            "url": "http://www.luzexi.com/2020/08/24/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A14",
            
            
            
            
            
            "date_published": "2020-08-24T00:00:00+08:00",
            "date_modified": "2020-08-24T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/08/17/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A849",
            "title": "思路探讨(四十九) 对思维笼子的反思",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "前面有篇文章我们说到我们都生活在笼子里，只是每个人属于自己的笼子大小不同，有些人觉得笼子里挺舒服的，就会在里面呆很久，另一些人则认为自己应该去更大更好的笼子，于是更多的折腾自己寻找出路，当然出路也并不一定通向更大更好的笼子，我们也有走歧路的时候。笼子没有极限，永远有更大更好的笼子在等着你去寻找打开它的钥匙，我们也应该量力而为。打开它的钥匙也有很多种，其中一种就是自律，自律不仅体现在对时间和精力的管理上，还体现在健康和心态的管理上。另一种是思维方式，不同高度的思维方式所带来的效果会截然不同。我拿德州扑克来做个比喻，德州扑克的规则很简单，就是个比大小的赌博游戏，每个人都有两张只有自己看见的牌，再与桌上的明牌合起来看谁比较大，它有5轮下注的机会，每轮每个人都有机会下更大的注或跟注。当你是个初级玩家的时候，你脑袋里想的都是我有什么牌，牌越大下注也会越大，敢跟敢拼。然后你进阶了，到了第二阶，你脑袋里想的都是对方有什么牌，因为只要知道对方有什么牌，你在押注和弃牌时会更加准确且有信心，胜算自然就会更大。接着你又进阶了，到了第三阶，你脑袋里想的是对方认为你有什么牌，因为牌在还没翻开来前都是相对的，对方的恐惧与骄傲是你取胜的重要因素。继续进阶，到了第四阶，你脑袋里想的是“对方认为你的眼中他是什么牌”，这时更高级的斗智斗勇开始了，对方想要利用你的恐惧和骄傲来反制你，而你则要利用他的小聪明来反制他，究竟谁能最终反制，谁就是那个能站在更高层级下看问题的人。最后一个阶段，不猜测也猜测，明与暗并存，虚虚实实混淆不清，想要战胜对方的欲望小了，被别人看穿的可能性也少了许多。高层级的思维方式有着截然不同的境界。不过这种竞争思维还是有些狭隘的，不是非常恰当，我们可以看些更高大上的思维方式转换，比如我们工作上的工作能力。什么是工作能力，大部分时候我们还是给自己设了一个限，说，我的技术就是我工作的能力。这是第一阶段的能力，我关心的是我自己，我脑袋里想的都是自己，包括，我有什么，我知道什么，我能做什么，我能得到什么。个人的创造力和创新是非常有限的，很多时候我们无法突破自己时，通常是因为没有更多的互动和分享，教和讲是最高的学习效率，第二阶段，我们与周围的人有更多的互动，创意与点子则源源不断的从我们的脑子和嘴巴里蹦出来。这时你知道讲出来分享出来才会有更多的思考和思路。前两个阶段毕竟还是‘我’的一个人能力，第三阶段，我们该打破‘我’的观念，这时你充分认识到了个人能力是有限的，无论我多牛逼一天还是24小时，放弃自己对想要全部自己做的念头，让更多人帮助你来完成任务是这个阶段我们的主心骨。第四阶段，你充分意识到合作的潜力，你主动放弃了自己的研究欲望和成果，转而主动把这个机会让给别人，同时也要求自己主动打破‘我与他人的沟通壁垒’，说服更多人来帮助你完成任务。这时你的工作基本上都是项目管理和HR上的事，你不但要寻找和把控方向以让所有人都知道方向在哪里，以免做无用功，还要寻找和说服人们来一起帮你完成任务。第五阶段，你已经打破了你与他人，甚至是陌生人之间的沟通壁垒，你能聊会侃，有着开放的心态，有渊博的知识和丰富的经验，能集思广益，对人对事有包容力，但毕竟依然是你自己的事，他人与他人之间的关系与协作效率我们依然无法改变。怎么让人与人之间的协作更融洽更高效，是我们这个阶段要做的事。这时我们要更多的放弃自己所谓的能力，你的能力反而激化了矛盾，我们要从台前走向幕后，用潜移默化的方式影响他人，让人与人之间的合作更加​融洽。​没有人能够给我们设限，给我们设限的只有我们自己，每个阶段都要主动放弃些什么，才能得到更多。大部分人都由于自身的原因，无法放弃这种掌握在手的‘安全感’，这种安全感可以是某种技术，也可以是金钱，或者是某种引以为傲的东西，或者是某种认知。对我来说也是，我正竭力消除自己愚昧和肤浅的偏见，直面自己的懦弱拥抱脆弱，放手一些所谓的安全感，做一些比自身安全感更重要的事情，帮助他人进步，团结人们一起来更好的完成任务。",
            "content_html": "<p>前面有篇文章我们说到我们都生活在笼子里，只是每个人属于自己的笼子大小不同，有些人觉得笼子里挺舒服的，就会在里面呆很久，另一些人则认为自己应该去更大更好的笼子，于是更多的折腾自己寻找出路，当然出路也并不一定通向更大更好的笼子，我们也有走歧路的时候。</p><p>笼子没有极限，永远有更大更好的笼子在等着你去寻找打开它的钥匙，我们也应该量力而为。打开它的钥匙也有很多种，其中一种就是自律，自律不仅体现在对时间和精力的管理上，还体现在健康和心态的管理上。</p><p>另一种是思维方式，不同高度的思维方式所带来的效果会截然不同。我拿德州扑克来做个比喻，德州扑克的规则很简单，就是个比大小的赌博游戏，每个人都有两张只有自己看见的牌，再与桌上的明牌合起来看谁比较大，它有5轮下注的机会，每轮每个人都有机会下更大的注或跟注。</p><p>当你是个初级玩家的时候，你脑袋里想的都是我有什么牌，牌越大下注也会越大，敢跟敢拼。</p><p>然后你进阶了，到了第二阶，你脑袋里想的都是对方有什么牌，因为只要知道对方有什么牌，你在押注和弃牌时会更加准确且有信心，胜算自然就会更大。</p><p>接着你又进阶了，到了第三阶，你脑袋里想的是对方认为你有什么牌，因为牌在还没翻开来前都是相对的，对方的恐惧与骄傲是你取胜的重要因素。</p><p>继续进阶，到了第四阶，你脑袋里想的是“对方认为你的眼中他是什么牌”，这时更高级的斗智斗勇开始了，对方想要利用你的恐惧和骄傲来反制你，而你则要利用他的小聪明来反制他，究竟谁能最终反制，谁就是那个能站在更高层级下看问题的人。</p><p>最后一个阶段，不猜测也猜测，明与暗并存，虚虚实实混淆不清，想要战胜对方的欲望小了，被别人看穿的可能性也少了许多。</p><p>高层级的思维方式有着截然不同的境界。不过这种竞争思维还是有些狭隘的，不是非常恰当，我们可以看些更高大上的思维方式转换，比如我们工作上的工作能力。</p><p>什么是工作能力，大部分时候我们还是给自己设了一个限，说，我的技术就是我工作的能力。这是第一阶段的能力，我关心的是我自己，我脑袋里想的都是自己，包括，我有什么，我知道什么，我能做什么，我能得到什么。</p><p>个人的创造力和创新是非常有限的，很多时候我们无法突破自己时，通常是因为没有更多的互动和分享，教和讲是最高的学习效率，第二阶段，我们与周围的人有更多的互动，创意与点子则源源不断的从我们的脑子和嘴巴里蹦出来。这时你知道讲出来分享出来才会有更多的思考和思路。</p><p>前两个阶段毕竟还是‘我’的一个人能力，第三阶段，我们该打破‘我’的观念，这时你充分认识到了个人能力是有限的，无论我多牛逼一天还是24小时，放弃自己对想要全部自己做的念头，让更多人帮助你来完成任务是这个阶段我们的主心骨。</p><p>第四阶段，你充分意识到合作的潜力，你主动放弃了自己的研究欲望和成果，转而主动把这个机会让给别人，同时也要求自己主动打破‘我与他人的沟通壁垒’，说服更多人来帮助你完成任务。这时你的工作基本上都是项目管理和HR上的事，你不但要寻找和把控方向以让所有人都知道方向在哪里，以免做无用功，还要寻找和说服人们来一起帮你完成任务。</p><p>第五阶段，你已经打破了你与他人，甚至是陌生人之间的沟通壁垒，你能聊会侃，有着开放的心态，有渊博的知识和丰富的经验，能集思广益，对人对事有包容力，但毕竟依然是你自己的事，他人与他人之间的关系与协作效率我们依然无法改变。怎么让人与人之间的协作更融洽更高效，是我们这个阶段要做的事。这时我们要更多的放弃自己所谓的能力，你的能力反而激化了矛盾，我们要从台前走向幕后，用潜移默化的方式影响他人，让人与人之间的合作更加​融洽。​</p><h4 id=\"没有人能够给我们设限给我们设限的只有我们自己每个阶段都要主动放弃些什么才能得到更多大部分人都由于自身的原因无法放弃这种掌握在手的安全感这种安全感可以是某种技术也可以是金钱或者是某种引以为傲的东西或者是某种认知\">没有人能够给我们设限，给我们设限的只有我们自己，每个阶段都要主动放弃些什么，才能得到更多。大部分人都由于自身的原因，无法放弃这种掌握在手的‘安全感’，这种安全感可以是某种技术，也可以是金钱，或者是某种引以为傲的东西，或者是某种认知。</h4><h4 id=\"对我来说也是我正竭力消除自己愚昧和肤浅的偏见直面自己的懦弱拥抱脆弱放手一些所谓的安全感做一些比自身安全感更重要的事情帮助他人进步团结人们一起来更好的完成任务\">对我来说也是，我正竭力消除自己愚昧和肤浅的偏见，直面自己的懦弱拥抱脆弱，放手一些所谓的安全感，做一些比自身安全感更重要的事情，帮助他人进步，团结人们一起来更好的完成任务。</h4>",
            "url": "http://www.luzexi.com/2020/08/17/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A849",
            
            
            
            
            
            "date_published": "2020-08-17T00:00:00+08:00",
            "date_modified": "2020-08-17T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/08/12/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B020",
            "title": "每日读书笔记20 《人性的弱点》",
            "summary": "读书 书 看书 读后感 笔记 摘要",
            "content_text": "如何使你变得更加成熟54，困难并不意味着不幸对喜欢规避责任的人来说，困难通常能成为最好的挡箭牌。你也许听过许多人把失败原因归咎于没有受过大学教育，对于这些人来说假如他们真的上了大学，他们仍能为自己找出许多理由。而一个真正成熟的人则不会如此，他们会想办法去克服困难，而不是找借口去规避困难。作者举了例子，一位叫纳达尼.包德齐的人，他是一位对航海术相当精通的人。他10岁前都是以自学的方式学习，一直自学到老，从来没有受过任何正规的家教育。到21时，他已经是一位相当优秀的数学家了，由于他喜欢航海就开始学习航海术，后来写了一本关于航海的书成为经典之作。难道就没有人告诉他过，想当一名科学家，大学教育是不可或缺的吗？对纳达尼.包德奇来说，没有受过正规教育并不是承认失败的理由，他从来没有把自己没有受过教育当做一种障碍，这种困难对他来说只不过是一句无聊的话。那么贫穷会不会是失败最有力的理由呢？美国总统胡佛是爱荷华一名铁匠的儿子，后来成为孤儿；IBM的董事长托马斯.沃森年轻时曾担任过簿记员，每周只有2美元薪水。他们的注意力从来不在贫穷上，贫穷也没有被他们认为是种障碍，他们把所有精力用在学习和工作上，根本没有时间去自怜。那么身体有缺陷会成为失败最好的理由吗？拜伦爵士有畸形足，朱利亚斯.凯撒患有癫痫症，贝多芬后来因病成了聋子，拿破仑则是个矮子，莫扎特患有肝病，富兰克林.罗斯福则有小儿麻痹症，海伦.凯勒更是从小就又聋又哑。这些人都是具有成熟心灵的人。他们不会陷于自己的困难中，而是勇敢地去面对它、接受它，然后想办法加以克服、解决。他们不会去乞求怜悯，不会绝望，也不会去找借口逃避。《一个完整的生命-在死神的门口》写了一个有关艾莫.赫姆的故事，赫姆在婴儿时医生就认为他活下来的几率不大，但他还是活下来了，他活了90年，90年的时间里一直因右半身严重受伤而时常痛楚不已，但他还是没有屈服。他不能从事劳力工作，于是他便转而努力阅读。28岁那年他成了传道师。后来他经历了2次致命的事故，也都没有让他失去信念。后来赫姆开始集资传道基金兴建教堂，并时常协助当地学校和医院。到了69岁他又举办了上千次的讲道、写了两本书、为教会和其他慈善机构募集了50万美元，并担任20余所学校的董事，个人曾捐助5万美元兴建加州大学附近的一所教会。赫姆从不知缺陷两字，他只知道自己有生命，而且对他来说这个生命是有目的的。一位74岁的女学员坦然承认自己不知该如何度过自己的余生，受到作者的鼓舞后，她明白了年纪并不是一种障碍，相反的由于多年的教学经验，她现在更有能力把故事讲得更好更动人。她把自己的热忱和信心带到美国各地，并把欢乐带给成千上万个孩童。她不愿让自己的年纪成为障碍或偷懒的借口。萧伯纳说，人们时常抱怨自己的环境不顺利，使他们没有什么成就，如果你得不到所要的环境，可以制造出一个来。作者年轻时曾常常因为自己比别人矮而气馁，经过好多年才逐渐明白，身高跟其他许多与生俱来的条件一样，可以有好处也可以有坏处，完全看自己的态度而定。不成熟的人随时可以把自己与众不同的地方看成是缺陷和障碍。成熟的人则不然，他先认清自己的不同处，然后看是要接受它们，或是加以改进。让自己变得成熟些，不要太在乎困难，没有什么是真正的障碍。",
            "content_html": "<p>如何使你变得更加成熟</p><p>54，困难并不意味着不幸</p><p>对喜欢规避责任的人来说，困难通常能成为最好的挡箭牌。你也许听过许多人把失败原因归咎于没有受过大学教育，对于这些人来说假如他们真的上了大学，他们仍能为自己找出许多理由。而一个真正成熟的人则不会如此，他们会想办法去克服困难，而不是找借口去规避困难。</p><p>作者举了例子，一位叫纳达尼.包德齐的人，他是一位对航海术相当精通的人。他10岁前都是以自学的方式学习，一直自学到老，从来没有受过任何正规的家教育。到21时，他已经是一位相当优秀的数学家了，由于他喜欢航海就开始学习航海术，后来写了一本关于航海的书成为经典之作。难道就没有人告诉他过，想当一名科学家，大学教育是不可或缺的吗？对纳达尼.包德奇来说，没有受过正规教育并不是承认失败的理由，他从来没有把自己没有受过教育当做一种障碍，这种困难对他来说只不过是一句无聊的话。</p><p>那么贫穷会不会是失败最有力的理由呢？美国总统胡佛是爱荷华一名铁匠的儿子，后来成为孤儿；IBM的董事长托马斯.沃森年轻时曾担任过簿记员，每周只有2美元薪水。他们的注意力从来不在贫穷上，贫穷也没有被他们认为是种障碍，他们把所有精力用在学习和工作上，根本没有时间去自怜。</p><p>那么身体有缺陷会成为失败最好的理由吗？拜伦爵士有畸形足，朱利亚斯.凯撒患有癫痫症，贝多芬后来因病成了聋子，拿破仑则是个矮子，莫扎特患有肝病，富兰克林.罗斯福则有小儿麻痹症，海伦.凯勒更是从小就又聋又哑。</p><p>这些人都是具有成熟心灵的人。他们不会陷于自己的困难中，而是勇敢地去面对它、接受它，然后想办法加以克服、解决。他们不会去乞求怜悯，不会绝望，也不会去找借口逃避。</p><p>《一个完整的生命-在死神的门口》写了一个有关艾莫.赫姆的故事，赫姆在婴儿时医生就认为他活下来的几率不大，但他还是活下来了，他活了90年，90年的时间里一直因右半身严重受伤而时常痛楚不已，但他还是没有屈服。他不能从事劳力工作，于是他便转而努力阅读。28岁那年他成了传道师。后来他经历了2次致命的事故，也都没有让他失去信念。后来赫姆开始集资传道基金兴建教堂，并时常协助当地学校和医院。到了69岁他又举办了上千次的讲道、写了两本书、为教会和其他慈善机构募集了50万美元，并担任20余所学校的董事，个人曾捐助5万美元兴建加州大学附近的一所教会。赫姆从不知缺陷两字，他只知道自己有生命，而且对他来说这个生命是有目的的。</p><p>一位74岁的女学员坦然承认自己不知该如何度过自己的余生，受到作者的鼓舞后，她明白了年纪并不是一种障碍，相反的由于多年的教学经验，她现在更有能力把故事讲得更好更动人。她把自己的热忱和信心带到美国各地，并把欢乐带给成千上万个孩童。她不愿让自己的年纪成为障碍或偷懒的借口。</p><p>萧伯纳说，人们时常抱怨自己的环境不顺利，使他们没有什么成就，如果你得不到所要的环境，可以制造出一个来。</p><p>作者年轻时曾常常因为自己比别人矮而气馁，经过好多年才逐渐明白，身高跟其他许多与生俱来的条件一样，可以有好处也可以有坏处，完全看自己的态度而定。</p><p>不成熟的人随时可以把自己与众不同的地方看成是缺陷和障碍。成熟的人则不然，他先认清自己的不同处，然后看是要接受它们，或是加以改进。</p><p>让自己变得成熟些，不要太在乎困难，没有什么是真正的障碍。</p>",
            "url": "http://www.luzexi.com/2020/08/12/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B020",
            
            
            
            
            
            "date_published": "2020-08-12T00:00:00+08:00",
            "date_modified": "2020-08-12T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/08/02/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B010",
            "title": "读书笔记(十) 《林徽因》",
            "summary": "读书 书 看书 读后感",
            "content_text": "3周前读完的这本书，一直忙于工作没能抽出时间来做一下记录，今天来回忆下林徽因的一生。林徽因出生在浙江杭州，母亲没什么文化且素质不高，在那个年代女人没有资格上学接受正规的教育，这在整个世界其他文明地区也有这样一段经历，女人没有权利接受正规的教育，无知的认为‘女子无才便是德’，其根本原因是主导社会的那些愚蠢的男人们认为女人是比她们低一级别的动物，不应该站在同一起跑线上，所以通常在那个愚蠢的时代男人们并没有给予女人足够的尊重。林徽因就出生在那个即将变迁的时代，幸好她的父亲是一个非常开明、视野开阔且有文化的人，但纵使有这样的父亲，林徽因在当时的生存也受到社会巨大的束缚。她不得不让自己更加努力刻苦、’懂事‘，以优秀的表现来维持包括父亲、爷爷以及其他家人对她的支持。林徽因的祖上世代为官，到爷爷林孝恂这代家道中落，林孝恂虽然是晚清官吏，头顶乌纱帽，但骨子里却是一身书卷气。他见多识广，知识渊博，再加上敞开怀抱接受西方政法思想，他的境界早已超越士官同僚。林孝恂的妻子游氏也并非小脚女人，她喜好书法，平素阅读典籍为乐，文化素养极高。林徽因的父亲林长民被父亲林孝恂寄予厚望，林长民两度远赴东洋留学，得中外文化双重滋养，再加上热衷于广交政界名流，年纪轻轻已经有了改良中国社会的宏伟抱负。无论父亲有多开明，在当时的时代受到时代的制约，父亲的思想仍然是受到侵蚀的。她的父亲林长民，一共娶了3个妻子，第一个因病去世，第二个就是林徽因的母亲，由于没有文化素养脾气不好与林长民不合，所以林长民又娶了一个二房并且生下了3个儿女。林徽因就是那个与父亲不合的母亲的女儿。我想就是这个原因，林徽因很小就知道了该如何获得父亲和爷爷的欢心，她知道获得周围人的喜欢才能在这个大家庭中立足。小孩子不会想太多，有好的反馈她就会去争取，她跟着爷爷学读书写字，获得了爷爷奶奶的疼爱，也就获得了大家庭的喜欢。母亲不会教她这些，母亲也没有好好教育过女人，因为爷爷和奶奶不放心把林徽因交给没有文化的母亲去教育，所以爷爷奶奶一直把林徽因带在身边教她读书写字，林徽因从小十分要强，也是因为母亲在家庭中没有地位，她只能靠自己去争取。林徽因深得爷爷奶奶和父亲的宠爱，八岁进了上海爱国小学读书，这所学校由蔡元培创办师资力量雄厚是当时百所名校之一。10岁时爷爷和奶奶相继离世，家里剩下自己的母亲和二房两个大人，父亲又常年在外，母亲从来不干活也不参与家庭事务，像是生活在另外一个世界。11岁那年政局动荡，一家人去了天津英租界住下，父亲在北平任职，父亲常年不在家，二房生孩子后身体不好，母亲又指靠不上，11岁的林徽因不得不用瘦小的身体扛起了家庭里的事务打点。那段时间的特殊境遇，让她很快成熟起来。从家里的吃喝用度，到照顾二房和弟妹，以及抚慰脾气不好的母亲，11岁的林徽因安排的井然有序，处理得妥贴稳当，并常写信告知父亲家里的事情。林徽因如此尽心尽力，一方面因为懂事，心系大局，对家庭有责任感；另一方面则是想证明自己的能力，希望得到父亲的肯定。如此乖巧懂事，聪明伶俐，美丽大方的女孩谁不喜欢，14岁那年，梁启超的带着17岁的儿子梁思成去了老朋友林长民家，梁思成一见林徽因清纯可爱，楚楚动人，如天女下凡，从此以后梁思成的目光再也没有离开过林徽因。之后中国政治时局更加动荡，林长民政坛失落，借着赴欧洲考察之机，带着16岁林徽因去了欧洲看看外面的世界。欧洲之行是林徽因一生的转折点，不仅影响了她的人生观、世界观、最重要的是奠定了她对学习建筑艺术坚定的信心。林徽因非常好学，她非常珍惜这次机会在欧洲期间每天都看书学习，并且在游历期间记录下自己的心得体验。在一个机缘巧合，她与伦敦房东的闲聊时，听到了很多关于建筑艺术的故事与知识，因为这位房东正是一位伦敦有名的建筑师。也是在那年林徽因遇上了才华横溢、知识丰富、语言幽默的才子徐志摩。徐志摩从此也变成了林徽因的忠实粉丝。林徽因16岁是情窦初开的年纪，遇上如此有才又帅气的男人当然心花怒放，他们在伦敦度过了一段美好的回忆，但那时徐志摩已经是有妇之夫，虽然妻子是家里安排的徐志摩并不喜欢，借出国留学知名回避妻子，但毕竟是有妇之夫。当林徽因知道此事后，理智告诉她，她正破坏另外一个女人的家庭，深思熟虑之下婉拒了徐志摩的爱意。徐志摩当然不甘心放弃，在林徽因回国后做出了离婚的决定，但这也并没有让林徽因回心转意，她知道徐志摩情感丰富，他爱上了幻想中完美的自己，而且无论怎样她仍然无意中破坏了别人的家庭，回国后她始终对徐志摩避而不见，直到她与梁思成订婚并打算去美国留学。梁思成是林徽因遇到的最爱她的男人，他有渊博的知识、沉稳的心智，他不仅包容她、爱护她，并且时常鼓励她、给予她信心。梁思成与林徽因，他们互相依赖相互成就，性格也正好互补，梁思成内向沉稳，林徽因则外向开朗。林徽因因为急躁的性格时常向梁思成发脾气，而梁思成则默默包容她并鼓励她支持她从困境中走出来。梁思成与林徽因1924年去了美国康奈尔大学留学，一呆就是4年，他们在美国刻苦学习，彼此照顾，获得优异的成绩，备受教授们和同学们的喜欢。期间林徽因的父亲，在战乱中丧生，林徽因痛哭流涕想要立马回国，梁思成的父亲梁启超为了不影响她的学业写信尽力安抚她，并为林徽因安排妥当了父亲的后事。1928年回国后他们在东北大学建筑系任教，林徽因负责讲授美术与建筑设计，梁思成负责讲授建筑学概论和建筑设计原理以及具有独特风格的西洋建筑史。回国后1年1929年梁启超病逝，林徽因和梁思成悲痛万分。1929年林徽因生了个宝贝女儿取名为梁再冰，为了纪念敬爱的父亲梁启超“饮冰室的辉煌”。林徽因生完孩子后由于过度劳累，病倒了，从此身体一直不见好转，疼痛和病魔一直缠绕着她。不久林徽因由于身体原因辞去了学校的职务回到故乡静养了一段时间。1931年林徽因和梁思成回到了北平，他们参加了朱启钤创办的中国营造学社，致力于中国传统建筑的研究与保护。他们在北总布胡同三号定居下来，从此这里就成了当时有名的“太太的客厅”，每逢周末这里都传出朗朗的笑声，许多才子才女，博学多才的文人雅士都在这里聚集彼此交流包括徐志摩。1931年11月徐志摩飞机失事，林徽因痛心万分潸然泪下。1932年林徽因生下二胎取名“从诫”，意在希望他步宋代李诫后尘，在建筑方面有所成就，最后儿子读了北大的历史系，热衷于关注环保问题，被国家总局授予“环境使者”称号，毕生致力于文物和环境保护。“太太的客厅”是由作家冰心在《大公报》上发表的一篇小说，很多人认为这篇小说是在讽刺林徽因，可见当时林徽因的太太的客厅有多有名，许多著名学者都以能在太太的客厅聊天交流为荣。就因为这个太太的客厅，出现一个一直没有离开林徽因的人，中国哲学的开山鼻祖金岳霖，是他在清华大学创办了国内第一个哲学系。金岳霖一直好奇徐志摩爱的死去活来的女神是什么样的女人，于是有天被徐志摩邀请去参加太太的客厅，从此以后金岳霖就成了太太客厅的座上宾，不但如此，比林徽因大10岁的金岳霖还不可救药的爱上了林徽因，终生未娶，一直跟随着梁思成与林徽因，做他们的邻居。这段情很耐人寻味，金岳霖痴情，梁思成包容，林徽因理智。就促成了后面的故事，金岳霖一直跟随他们到各地做他们的邻居，梁思成则依然跟金岳霖是好朋友，林徽因则理智应对金岳霖的爱意。最后金岳霖痴到什么程度呢？林徽因去世那年，他当着学生的面痛哭失声。在林徽因去世后，金岳霖还设宴叫来老朋友给林徽因过生日。1937年开始，国内战乱爆发，日本借卢沟桥事变发动战争。7月北平沦陷，梁思成与林徽因开始了一段长达8年的流亡生活，出发前他们把在营造学社考察和拍摄的建筑物底片和写的资料整理并放在了天津英租界的外国银行地下保险库中，想着等战乱平息后再来取，可谁也没想到外国银行的地下保险库也没能保住他们7年的汗水。流亡中，他们去了长沙，长沙又被攻陷，他们又去了昆明，昆明被轰炸，他们又去了十五公里外的龙头村，他们在那里造了自己的房子。房子造好后也只持续了半年，日军不断攻陷城市，昆明也不再安全。1940年他们又再次投入到流亡大军中，最终抵达了长江边上的一个偏远小镇，李庄。在这里他们生活了5年，这里没有水没有电，几乎没有医疗设备，林徽因在这里病的很严重，即使这样她也没有放弃看书和查阅资料。直到1945年12月，在林徽因外国好友的安排下离开李庄赴重庆治病。1944年梁思成和林徽因历尽辛苦完成了《图像中国建筑史》，这本书是用英文写的，梁思成把他带到美国等待时机再出版，可没想到的是，这本书一直到1984年才出版，其中的故事也是非常曲折。1945年日本宣布无条件投降后，林徽因在昆明修养了几个月，身体稍微好转后于1946年7月与梁思成返回北平。梁思成在清华大学担任建筑系主任，成立了建筑研究所，担任研究所所长。林徽因不计报酬为梁思成分担工作，在梁思成考察美国时，林徽因来处理建筑系各种杂事，年轻的教师会经常向她请教。1949年北平解放，林徽因被正式聘为清华大学建筑系一级教授，主讲《中国建筑史》。7月林徽因开始主导设计新中国国徽。10月梁思成和林徽因开始对人民英雄纪念碑进行设计，经过反复推敲，她抱病完成了图案设计。1950年6月23日，全国政协一届二次大会上，以林徽因为主设计的中华人民共和国国徽，得到了全体代表的一致通过。1951年林徽因拖着病体挽救了濒临停业的景泰蓝传统工艺。1953年林徽因挽救了四朝五都仅存的完整牌楼不被拆除。10月被选为建筑学会理事，并担任《建筑学报》编委，同时受邀参加第二届全国文代会。1954年林徽因当选为北京市人民代表大会代表。1955年，林徽因病情再次恶化，4月1日，中国第一代著名女建筑师、国民第一才女林徽因永远闭上了眼睛。临别时没有留下遗言，面对这个美丽而又遗憾的世界，她已经倾尽全力。",
            "content_html": "<p>3周前读完的这本书，一直忙于工作没能抽出时间来做一下记录，今天来回忆下林徽因的一生。</p><p>林徽因出生在浙江杭州，母亲没什么文化且素质不高，在那个年代女人没有资格上学接受正规的教育，这在整个世界其他文明地区也有这样一段经历，女人没有权利接受正规的教育，无知的认为‘女子无才便是德’，其根本原因是主导社会的那些愚蠢的男人们认为女人是比她们低一级别的动物，不应该站在同一起跑线上，所以通常在那个愚蠢的时代男人们并没有给予女人足够的尊重。</p><p>林徽因就出生在那个即将变迁的时代，幸好她的父亲是一个非常开明、视野开阔且有文化的人，但纵使有这样的父亲，林徽因在当时的生存也受到社会巨大的束缚。她不得不让自己更加努力刻苦、’懂事‘，以优秀的表现来维持包括父亲、爷爷以及其他家人对她的支持。</p><p>林徽因的祖上世代为官，到爷爷林孝恂这代家道中落，林孝恂虽然是晚清官吏，头顶乌纱帽，但骨子里却是一身书卷气。他见多识广，知识渊博，再加上敞开怀抱接受西方政法思想，他的境界早已超越士官同僚。林孝恂的妻子游氏也并非小脚女人，她喜好书法，平素阅读典籍为乐，文化素养极高。</p><p>林徽因的父亲林长民被父亲林孝恂寄予厚望，林长民两度远赴东洋留学，得中外文化双重滋养，再加上热衷于广交政界名流，年纪轻轻已经有了改良中国社会的宏伟抱负。</p><p>无论父亲有多开明，在当时的时代受到时代的制约，父亲的思想仍然是受到侵蚀的。她的父亲林长民，一共娶了3个妻子，第一个因病去世，第二个就是林徽因的母亲，由于没有文化素养脾气不好与林长民不合，所以林长民又娶了一个二房并且生下了3个儿女。</p><p>林徽因就是那个与父亲不合的母亲的女儿。我想就是这个原因，林徽因很小就知道了该如何获得父亲和爷爷的欢心，她知道获得周围人的喜欢才能在这个大家庭中立足。小孩子不会想太多，有好的反馈她就会去争取，她跟着爷爷学读书写字，获得了爷爷奶奶的疼爱，也就获得了大家庭的喜欢。母亲不会教她这些，母亲也没有好好教育过女人，因为爷爷和奶奶不放心把林徽因交给没有文化的母亲去教育，所以爷爷奶奶一直把林徽因带在身边教她读书写字，林徽因从小十分要强，也是因为母亲在家庭中没有地位，她只能靠自己去争取。</p><p>林徽因深得爷爷奶奶和父亲的宠爱，八岁进了上海爱国小学读书，这所学校由蔡元培创办师资力量雄厚是当时百所名校之一。10岁时爷爷和奶奶相继离世，家里剩下自己的母亲和二房两个大人，父亲又常年在外，母亲从来不干活也不参与家庭事务，像是生活在另外一个世界。11岁那年政局动荡，一家人去了天津英租界住下，父亲在北平任职，父亲常年不在家，二房生孩子后身体不好，母亲又指靠不上，11岁的林徽因不得不用瘦小的身体扛起了家庭里的事务打点。</p><p>那段时间的特殊境遇，让她很快成熟起来。从家里的吃喝用度，到照顾二房和弟妹，以及抚慰脾气不好的母亲，11岁的林徽因安排的井然有序，处理得妥贴稳当，并常写信告知父亲家里的事情。林徽因如此尽心尽力，一方面因为懂事，心系大局，对家庭有责任感；另一方面则是想证明自己的能力，希望得到父亲的肯定。</p><p>如此乖巧懂事，聪明伶俐，美丽大方的女孩谁不喜欢，14岁那年，梁启超的带着17岁的儿子梁思成去了老朋友林长民家，梁思成一见林徽因清纯可爱，楚楚动人，如天女下凡，从此以后梁思成的目光再也没有离开过林徽因。</p><p>之后中国政治时局更加动荡，林长民政坛失落，借着赴欧洲考察之机，带着16岁林徽因去了欧洲看看外面的世界。欧洲之行是林徽因一生的转折点，不仅影响了她的人生观、世界观、最重要的是奠定了她对学习建筑艺术坚定的信心。林徽因非常好学，她非常珍惜这次机会在欧洲期间每天都看书学习，并且在游历期间记录下自己的心得体验。在一个机缘巧合，她与伦敦房东的闲聊时，听到了很多关于建筑艺术的故事与知识，因为这位房东正是一位伦敦有名的建筑师。</p><p>也是在那年林徽因遇上了才华横溢、知识丰富、语言幽默的才子徐志摩。徐志摩从此也变成了林徽因的忠实粉丝。林徽因16岁是情窦初开的年纪，遇上如此有才又帅气的男人当然心花怒放，他们在伦敦度过了一段美好的回忆，但那时徐志摩已经是有妇之夫，虽然妻子是家里安排的徐志摩并不喜欢，借出国留学知名回避妻子，但毕竟是有妇之夫。当林徽因知道此事后，理智告诉她，她正破坏另外一个女人的家庭，深思熟虑之下婉拒了徐志摩的爱意。徐志摩当然不甘心放弃，在林徽因回国后做出了离婚的决定，但这也并没有让林徽因回心转意，她知道徐志摩情感丰富，他爱上了幻想中完美的自己，而且无论怎样她仍然无意中破坏了别人的家庭，回国后她始终对徐志摩避而不见，直到她与梁思成订婚并打算去美国留学。</p><p>梁思成是林徽因遇到的最爱她的男人，他有渊博的知识、沉稳的心智，他不仅包容她、爱护她，并且时常鼓励她、给予她信心。梁思成与林徽因，他们互相依赖相互成就，性格也正好互补，梁思成内向沉稳，林徽因则外向开朗。林徽因因为急躁的性格时常向梁思成发脾气，而梁思成则默默包容她并鼓励她支持她从困境中走出来。</p><p>梁思成与林徽因1924年去了美国康奈尔大学留学，一呆就是4年，他们在美国刻苦学习，彼此照顾，获得优异的成绩，备受教授们和同学们的喜欢。期间林徽因的父亲，在战乱中丧生，林徽因痛哭流涕想要立马回国，梁思成的父亲梁启超为了不影响她的学业写信尽力安抚她，并为林徽因安排妥当了父亲的后事。1928年回国后他们在东北大学建筑系任教，林徽因负责讲授美术与建筑设计，梁思成负责讲授建筑学概论和建筑设计原理以及具有独特风格的西洋建筑史。回国后1年1929年梁启超病逝，林徽因和梁思成悲痛万分。</p><p>1929年林徽因生了个宝贝女儿取名为梁再冰，为了纪念敬爱的父亲梁启超“饮冰室的辉煌”。林徽因生完孩子后由于过度劳累，病倒了，从此身体一直不见好转，疼痛和病魔一直缠绕着她。不久林徽因由于身体原因辞去了学校的职务回到故乡静养了一段时间。</p><p>1931年林徽因和梁思成回到了北平，他们参加了朱启钤创办的中国营造学社，致力于中国传统建筑的研究与保护。他们在北总布胡同三号定居下来，从此这里就成了当时有名的“太太的客厅”，每逢周末这里都传出朗朗的笑声，许多才子才女，博学多才的文人雅士都在这里聚集彼此交流包括徐志摩。</p><p>1931年11月徐志摩飞机失事，林徽因痛心万分潸然泪下。</p><p>1932年林徽因生下二胎取名“从诫”，意在希望他步宋代李诫后尘，在建筑方面有所成就，最后儿子读了北大的历史系，热衷于关注环保问题，被国家总局授予“环境使者”称号，毕生致力于文物和环境保护。</p><p>“太太的客厅”是由作家冰心在《大公报》上发表的一篇小说，很多人认为这篇小说是在讽刺林徽因，可见当时林徽因的太太的客厅有多有名，许多著名学者都以能在太太的客厅聊天交流为荣。</p><p>就因为这个太太的客厅，出现一个一直没有离开林徽因的人，中国哲学的开山鼻祖金岳霖，是他在清华大学创办了国内第一个哲学系。</p><p>金岳霖一直好奇徐志摩爱的死去活来的女神是什么样的女人，于是有天被徐志摩邀请去参加太太的客厅，从此以后金岳霖就成了太太客厅的座上宾，不但如此，比林徽因大10岁的金岳霖还不可救药的爱上了林徽因，终生未娶，一直跟随着梁思成与林徽因，做他们的邻居。</p><p>这段情很耐人寻味，金岳霖痴情，梁思成包容，林徽因理智。就促成了后面的故事，金岳霖一直跟随他们到各地做他们的邻居，梁思成则依然跟金岳霖是好朋友，林徽因则理智应对金岳霖的爱意。最后金岳霖痴到什么程度呢？林徽因去世那年，他当着学生的面痛哭失声。在林徽因去世后，金岳霖还设宴叫来老朋友给林徽因过生日。</p><p>1937年开始，国内战乱爆发，日本借卢沟桥事变发动战争。7月北平沦陷，梁思成与林徽因开始了一段长达8年的流亡生活，出发前他们把在营造学社考察和拍摄的建筑物底片和写的资料整理并放在了天津英租界的外国银行地下保险库中，想着等战乱平息后再来取，可谁也没想到外国银行的地下保险库也没能保住他们7年的汗水。</p><p>流亡中，他们去了长沙，长沙又被攻陷，他们又去了昆明，昆明被轰炸，他们又去了十五公里外的龙头村，他们在那里造了自己的房子。房子造好后也只持续了半年，日军不断攻陷城市，昆明也不再安全。1940年他们又再次投入到流亡大军中，最终抵达了长江边上的一个偏远小镇，李庄。在这里他们生活了5年，这里没有水没有电，几乎没有医疗设备，林徽因在这里病的很严重，即使这样她也没有放弃看书和查阅资料。直到1945年12月，在林徽因外国好友的安排下离开李庄赴重庆治病。</p><p>1944年梁思成和林徽因历尽辛苦完成了《图像中国建筑史》，这本书是用英文写的，梁思成把他带到美国等待时机再出版，可没想到的是，这本书一直到1984年才出版，其中的故事也是非常曲折。</p><p>1945年日本宣布无条件投降后，林徽因在昆明修养了几个月，身体稍微好转后于1946年7月与梁思成返回北平。梁思成在清华大学担任建筑系主任，成立了建筑研究所，担任研究所所长。林徽因不计报酬为梁思成分担工作，在梁思成考察美国时，林徽因来处理建筑系各种杂事，年轻的教师会经常向她请教。</p><p>1949年北平解放，林徽因被正式聘为清华大学建筑系一级教授，主讲《中国建筑史》。7月林徽因开始主导设计新中国国徽。10月梁思成和林徽因开始对人民英雄纪念碑进行设计，经过反复推敲，她抱病完成了图案设计。</p><p>1950年6月23日，全国政协一届二次大会上，以林徽因为主设计的中华人民共和国国徽，得到了全体代表的一致通过。</p><p>1951年林徽因拖着病体挽救了濒临停业的景泰蓝传统工艺。</p><p>1953年林徽因挽救了四朝五都仅存的完整牌楼不被拆除。10月被选为建筑学会理事，并担任《建筑学报》编委，同时受邀参加第二届全国文代会。</p><p>1954年林徽因当选为北京市人民代表大会代表。</p><p>1955年，林徽因病情再次恶化，4月1日，中国第一代著名女建筑师、国民第一才女林徽因永远闭上了眼睛。临别时没有留下遗言，面对这个美丽而又遗憾的世界，她已经倾尽全力。</p>",
            "url": "http://www.luzexi.com/2020/08/02/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B010",
            
            
            
            
            
            "date_published": "2020-08-02T00:00:00+08:00",
            "date_modified": "2020-08-02T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/26/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A13",
            "title": "给女儿的信(三)",
            "summary": "女儿 教育 亲情",
            "content_text": "Hello Sharon and Anne，爸爸好想你们，爸爸也好想妈妈。爸爸已经3个月没有回家来看你们了，爸爸好想回来但爸爸还要工作和学习，可能要到十月一日的国庆节时才能回来，但到那时也不一定哦，你们可要做好心理准备哈，抱歉Sharon and Anne 爸爸有点忙。爸爸在忙什么呢？爸爸在忙工作，爸爸在一家公司里工作，每天公司都会交给爸爸一些任务去完成，为了奖励爸爸完成的工作，公司会每个月发钱爸爸，这样爸爸就能把钱给妈妈，妈妈把钱存起来慢慢的钱就变多了，我们买好吃的，买好看的衣服，去旅行，去郊游就能花钱啦。除了忙工作，爸爸还在忙着学习和看书。大家都在不断学习新的知识，爸爸也不能落下啊。爸爸每天都要些书补充下知识，每天也要写一些对学习到的知识的总结，让看过的书和学习到的知识，再在脑袋里再复习一遍，这样才能更好的掌握学过的东西。如果只是学习和看书，没有去整理和巩固的话，就白白的浪费了前面学习的时间，因为我们很快就忘记了学过的东西，特别是眼睛看过一遍，耳朵听过一遍的东西，很快就忘记了，所以爸爸时常要写一些对前面学过的知识的总结。最近爸爸接到一项比较重要的任务，爸爸忙的不可开交，有时会到凌晨2、3点，这样对身体不太好，所以爸爸一直在调整自己的，让自己恢复到正常的状态，平时多运动，早睡早起身体好，这样我们的学习效率也会增加。Sharon、Anne，爸爸很爱你们，爸爸也很爱妈妈！",
            "content_html": "<p>Hello Sharon and Anne，爸爸好想你们，爸爸也好想妈妈。爸爸已经3个月没有回家来看你们了，爸爸好想回来但爸爸还要工作和学习，可能要到十月一日的国庆节时才能回来，但到那时也不一定哦，你们可要做好心理准备哈，抱歉Sharon and Anne 爸爸有点忙。</p><p>爸爸在忙什么呢？爸爸在忙工作，爸爸在一家公司里工作，每天公司都会交给爸爸一些任务去完成，为了奖励爸爸完成的工作，公司会每个月发钱爸爸，这样爸爸就能把钱给妈妈，妈妈把钱存起来慢慢的钱就变多了，我们买好吃的，买好看的衣服，去旅行，去郊游就能花钱啦。</p><p>除了忙工作，爸爸还在忙着学习和看书。大家都在不断学习新的知识，爸爸也不能落下啊。爸爸每天都要些书补充下知识，每天也要写一些对学习到的知识的总结，让看过的书和学习到的知识，再在脑袋里再复习一遍，这样才能更好的掌握学过的东西。如果只是学习和看书，没有去整理和巩固的话，就白白的浪费了前面学习的时间，因为我们很快就忘记了学过的东西，特别是眼睛看过一遍，耳朵听过一遍的东西，很快就忘记了，所以爸爸时常要写一些对前面学过的知识的总结。</p><p>最近爸爸接到一项比较重要的任务，爸爸忙的不可开交，有时会到凌晨2、3点，这样对身体不太好，所以爸爸一直在调整自己的，让自己恢复到正常的状态，平时多运动，早睡早起身体好，这样我们的学习效率也会增加。</p><p>Sharon、Anne，爸爸很爱你们，爸爸也很爱妈妈！</p>",
            "url": "http://www.luzexi.com/2020/07/26/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A13",
            
            
            
            
            
            "date_published": "2020-07-26T00:00:00+08:00",
            "date_modified": "2020-07-26T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/26/Unity3D%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%9B%E9%98%B6%E4%B8%BB%E7%A8%8B-%E5%89%8D%E8%A8%80",
            "title": "《Unity3D高级编程之进阶主程》 前言",
            "summary": "unity3d 高级编程 主程 算法",
            "content_text": "前言为什么要写这本书本书该从很多年前说起，毕业前由于自视甚高错过了好几次绝佳的学习机会，那时是个名副其实的“幼稚男”，清醒过来时周围的人已经走了很远的路了，那夜猛然醒悟开始告诉自己不能再幼稚了。非常幸运的是我赶上了Unity3D引擎大潮，版本从2.6开始一直学习到现在，它提供给了我更低的门槛让我跨过前人需要数年甚至数十年才能跨过的技术难关，于是我一路拼命学习一直走到了现在，虽然对游戏业界来说仍然是个小菜但比起以前已经好了非常多了。从2013年开始我就开始担任Unity3D主程一职，虽然当时只是个菜鸡主程，但当时的我可并不这么认为，我认为自己的技术已经强大到可以驾驭整个客户端，并且能扎实完成整个游戏项目从开发到上线，年轻人敢闯敢拼的劲头在那时的我身上体现的淋漓尽致。那是我第一次当主程，却敢承诺老板说自己能在3个月内开发出对方想要的游戏，那时自己吹牛可以不打草稿，也从不想后果。最后游戏项目3个月又3个月，开发了半年终于出来了。不管怎样，事情从这里开始一发不可收拾，手机游戏从2013年开始火遍整个国家和全球，我也被浪潮推到了各公司里担任主程，去过日企被派到日本去交接畅销项目，也为动视暴雪Activision做过几个项目，还到过历史悠久的盛大游戏做过主程。就这样跌跌撞撞担任了7年的主程，2020年去了一家新公司，这里的技术让我大开眼界，也打开了我对技术更高层次的理解，我如饥似渴的学习着，事情远没有结束我仍然不断的拼搏和学习，学习的不只是技术还有生活。回头看自己，我比较幸运，幸运的搭上了Unity3D的便车，幸运的搭上了手机游戏的便车，幸运的搭上了公司发展的便车，但不可缺少的仍然是我如饥似渴的学习热情与拼命三郎般的努力，也只有热情与努力才能长久的让自己在浪潮中牢牢抓住机会以便在退潮时不被打回原形。说到努力，我的努力比起先贤实在微不足道，古今中外的先贤们远到，孔孟与管仲，唐太宗与成吉思汗，乔布斯与林肯等，近到游戏业界，UWA张鑫，第一代大佬云风(吴云洋)， IT投资大佬吴军等，都是长期努力拼搏的典范，前辈们付出的汗水可以汇成江河，我的汗水只是能浸湿自己而已，因此我希望能够学习先贤十年如一日的自律，并维持饱满的精力不断向前进。在2016年开始就想着能不能写一本关于自己是如何理解Unity3D和游戏开发的书，一直未能启动，直到2018年初才开始着手写些草稿。行动是最好的解决动力和自信的良药，在开始写后不久就一发不可收拾，一篇又一篇，一章又一章的写下去，由于文字功底不足，在开始阶段自己都不知道自己写的是什么，前后连句都读不通，却有许多网友看了给我赞赏和鼓励，实在感激不尽，感动不已。同时也发现了自己的知识面的诸多不足和错误理解，于是拼命看各类技术书籍，查阅资料以补充自己浅薄的知识。可是事情并没有这么顺利，自己看过的书和查阅的资料并没有马上理解和融会贯通，于是文章上依然很多错误和无知的言辞，前后连句依然并不通顺。但给我最大的安慰是，至少在我的坚持下，书有了比较明确的框架，对技术面的理解也到了一个新的高度。为了能让自己的知识能匹配我所写的书，在写书期间我不停的学习，不只是阅读各类技术书，还加入了更多人文类书籍，看完后实践并总结，同时会不时的在博客上写些想法和故事以补充自己在文字上的缺陷。渐渐我的博客上有了很多非技术类的文章，这些文章都是我给自己整理的对人和物的理解，以及一些对非技术性书本内容的回顾，我把它们归类总结成我的学习之路，包括对做人做事的思路探讨、改善自己缺陷的自省和看书后对书本加深记忆的总结。许多文类的书籍与文章让我对人和事物也有了更高层次的理解，让我惊喜的是这些非技术性知识反补了我对技术的理解，带我到达了更高的层次，我开始发现生活和工作是可以融会贯通的，于是经过逐日的自我完善走上了终生学习、自律生活的道路。随着在项目中不断实践自己的技术，自己对不足的知识面的补充以及勤奋的锻炼文字功底后，我对全书进行了3次重构，为的就是让书中内容能更好的表达技术原理，更全面和准确的技术讲解要点。全书分成：架构、C#技术要点、数据表与程序、UI用户界面、3D模型与动画、网络通信、AI人工智能、地图与寻路、渲染管线与图形学，覆盖了Unity3D游戏项目的技术要点，确保读者能看到整个Unity3D游戏项目的技术全貌，对各项技术与知识点有更深层次的理解。书中不仅关注项目中比较大的解决方案，还讲解了具体的技术细节，让读者不仅有更宏观的视野去审视自己的项目，还能在书中找到最接地气的技术细节以便大家能更深入理解技术原理。虽然才疏学浅，但凭着自己看过这么多书做过这么多项目写过这么多文章，本书实在可以成为大家在技术修行路上一本不可多得的参考书。​感谢各位能看完前言，本人最爱看序，序是最能体现作者心境的地方，它凝结了作者智慧的结晶，作者可以在这里畅所欲言讲自己的经历体会。读者对象这里我们根据行业用户团体划分出一些使用者：● Unity3D程序员和爱好者● 游戏开发者● 各公司的资深游戏开发者以及游戏前端主程● 虚拟现实项目开发者● 技术美术和技术美术爱好者● 致力于图形图像、引擎架构的程序员● 开设相关课程的院校如何阅读本书​本书将知识点分为十个章节，每个章节都有自己独立的知识领域，读者可以按照章节顺序阅读本书，也可以根据自己的喜好挑选自己感兴趣的章节学习知识领域。如果你是一名经验丰富的资深程序员，能够理解游戏编程的相关基础知识，那么你可以直接阅读你感兴趣的章节。如果你是一名初学者，尽量从第一章开始学习。​第一章，软件架构。讲了架构的意义、架构的原理以及如何架构。​第二章，C#技术要点。对基础基础做了详细的讲解。​第三章，数据表与程序。针对客户端中表格数据与程序的协作与应用做了详细的讲解。​第四章，UI用户界面。针对UI用户界面的工作原理与优化手段做了详细的讲解。​第五章，3D模型与动画。针对3D模型的原理，动画的原理以及两者的优化做了详细的讲解。​第六章，网络通信。针对网络层部分业务与底层原理做了详细的讲解。​第七章，AI。针对各类型AI做了详细的讲解。​第八章，地图与寻路。针对场景构建与优化、地图构建以及寻路算法优化做了详细的讲解。​第九章，渲染管线与图形学。针对图形数学、图形学常用算法、渲染管线做了详细的讲解。​第十章，渲染原理与知识。针对客户端各类渲染技术的渲染原理做了详细的讲解。附录A为参考文献。勘误和支持由于作者的水平有限，写书的时间也很紧张，书中难免会出现一些错误或者不准确的地方，不妥之处在所难免，恳请读者批评指正。由于资金和时间有限无法专门弄一个网站来反馈书本中的问题，于是在Github上开了个仓库做问题集记录，https://github.com/luzexi/Unity3dToBeLeader/issues ，如果发现书本中的错误，可以将书中的错误发布在这个网页地址的问题列表，我将会及时的提供反馈。书本的初稿内容发布在我的个人博客上http://www.luzexi.com，由于精力有限只能更新到初稿，后面再更新书本版本的时候会重新再发布一次新书稿，我希望能在这块内容上不断升级和精进。如果你有更多的宝贵意见，也欢迎你发送邮件至我的邮箱 jesse_luzexi@163.com ，很期待能够听到你们的真挚反馈。致谢最后要感谢同事同僚以及网友的支持和点赞，《Unity3D网络游戏实战》作者罗培羽给予的帮助，机械工业出版社杨绣国老师细致缜密的审阅。特别要感谢我的妻子余胜男，为了支持我能安心写书安心工作，负担了家里的所有工作，辛苦万分，还不忘开导我，当我的心理医生为我排忧，这本书实在应该作为礼物献给她，以及我的两个女儿陆秀恩(Sharon)与陆安妮(Anne)，她们实在是世界上最好的女儿，知道该如何说出自己的诉求，并懂得遵守规则的重要性，时常还能做出曲线‘救国’的行动和思维，她们每次都要鼓励我，对我说“爸爸加油！”，很感激孩子们能和我一起努力，走在这条学习之路上又多了两个知己，谢谢陆秀恩感谢陆安妮。",
            "content_html": "<h2 id=\"前言\">前言</h2><h3 id=\"为什么要写这本书\">为什么要写这本书</h3><p>本书该从很多年前说起，毕业前由于自视甚高错过了好几次绝佳的学习机会，那时是个名副其实的“幼稚男”，清醒过来时周围的人已经走了很远的路了，那夜猛然醒悟开始告诉自己不能再幼稚了。非常幸运的是我赶上了Unity3D引擎大潮，版本从2.6开始一直学习到现在，它提供给了我更低的门槛让我跨过前人需要数年甚至数十年才能跨过的技术难关，于是我一路拼命学习一直走到了现在，虽然对游戏业界来说仍然是个小菜但比起以前已经好了非常多了。</p><p>从2013年开始我就开始担任Unity3D主程一职，虽然当时只是个菜鸡主程，但当时的我可并不这么认为，我认为自己的技术已经强大到可以驾驭整个客户端，并且能扎实完成整个游戏项目从开发到上线，年轻人敢闯敢拼的劲头在那时的我身上体现的淋漓尽致。那是我第一次当主程，却敢承诺老板说自己能在3个月内开发出对方想要的游戏，那时自己吹牛可以不打草稿，也从不想后果。最后游戏项目3个月又3个月，开发了半年终于出来了。不管怎样，事情从这里开始一发不可收拾，手机游戏从2013年开始火遍整个国家和全球，我也被浪潮推到了各公司里担任主程，去过日企被派到日本去交接畅销项目，也为动视暴雪Activision做过几个项目，还到过历史悠久的盛大游戏做过主程。就这样跌跌撞撞担任了7年的主程，2020年去了一家新公司，这里的技术让我大开眼界，也打开了我对技术更高层次的理解，我如饥似渴的学习着，事情远没有结束我仍然不断的拼搏和学习，学习的不只是技术还有生活。</p><p>回头看自己，我比较幸运，幸运的搭上了Unity3D的便车，幸运的搭上了手机游戏的便车，幸运的搭上了公司发展的便车，但不可缺少的仍然是我如饥似渴的学习热情与拼命三郎般的努力，也只有热情与努力才能长久的让自己在浪潮中牢牢抓住机会以便在退潮时不被打回原形。说到努力，我的努力比起先贤实在微不足道，古今中外的先贤们远到，孔孟与管仲，唐太宗与成吉思汗，乔布斯与林肯等，近到游戏业界，UWA张鑫，第一代大佬云风(吴云洋)， IT投资大佬吴军等，都是长期努力拼搏的典范，前辈们付出的汗水可以汇成江河，我的汗水只是能浸湿自己而已，因此我希望能够学习先贤十年如一日的自律，并维持饱满的精力不断向前进。</p><p>在2016年开始就想着能不能写一本关于自己是如何理解Unity3D和游戏开发的书，一直未能启动，直到2018年初才开始着手写些草稿。行动是最好的解决动力和自信的良药，在开始写后不久就一发不可收拾，一篇又一篇，一章又一章的写下去，由于文字功底不足，在开始阶段自己都不知道自己写的是什么，前后连句都读不通，却有许多网友看了给我赞赏和鼓励，实在感激不尽，感动不已。同时也发现了自己的知识面的诸多不足和错误理解，于是拼命看各类技术书籍，查阅资料以补充自己浅薄的知识。</p><p>可是事情并没有这么顺利，自己看过的书和查阅的资料并没有马上理解和融会贯通，于是文章上依然很多错误和无知的言辞，前后连句依然并不通顺。但给我最大的安慰是，至少在我的坚持下，书有了比较明确的框架，对技术面的理解也到了一个新的高度。为了能让自己的知识能匹配我所写的书，在写书期间我不停的学习，不只是阅读各类技术书，还加入了更多人文类书籍，看完后实践并总结，同时会不时的在博客上写些想法和故事以补充自己在文字上的缺陷。渐渐我的博客上有了很多非技术类的文章，这些文章都是我给自己整理的对人和物的理解，以及一些对非技术性书本内容的回顾，我把它们归类总结成我的学习之路，包括对做人做事的思路探讨、改善自己缺陷的自省和看书后对书本加深记忆的总结。许多文类的书籍与文章让我对人和事物也有了更高层次的理解，让我惊喜的是这些非技术性知识反补了我对技术的理解，带我到达了更高的层次，我开始发现生活和工作是可以融会贯通的，于是经过逐日的自我完善走上了终生学习、自律生活的道路。</p><p>随着在项目中不断实践自己的技术，自己对不足的知识面的补充以及勤奋的锻炼文字功底后，我对全书进行了3次重构，为的就是让书中内容能更好的表达技术原理，更全面和准确的技术讲解要点。全书分成：架构、C#技术要点、数据表与程序、UI用户界面、3D模型与动画、网络通信、AI人工智能、地图与寻路、渲染管线与图形学，覆盖了Unity3D游戏项目的技术要点，确保读者能看到整个Unity3D游戏项目的技术全貌，对各项技术与知识点有更深层次的理解。书中不仅关注项目中比较大的解决方案，还讲解了具体的技术细节，让读者不仅有更宏观的视野去审视自己的项目，还能在书中找到最接地气的技术细节以便大家能更深入理解技术原理。虽然才疏学浅，但凭着自己看过这么多书做过这么多项目写过这么多文章，本书实在可以成为大家在技术修行路上一本不可多得的参考书。</p><p>​感谢各位能看完前言，本人最爱看序，序是最能体现作者心境的地方，它凝结了作者智慧的结晶，作者可以在这里畅所欲言讲自己的经历体会。</p><h3 id=\"读者对象\">读者对象</h3><p>这里我们根据行业用户团体划分出一些使用者：</p><p>● Unity3D程序员和爱好者</p><p>● 游戏开发者</p><p>● 各公司的资深游戏开发者以及游戏前端主程</p><p>● 虚拟现实项目开发者</p><p>● 技术美术和技术美术爱好者</p><p>● 致力于图形图像、引擎架构的程序员</p><p>● 开设相关课程的院校</p><h3 id=\"如何阅读本书\">如何阅读本书</h3><p>​本书将知识点分为十个章节，每个章节都有自己独立的知识领域，读者可以按照章节顺序阅读本书，也可以根据自己的喜好挑选自己感兴趣的章节学习知识领域。如果你是一名经验丰富的资深程序员，能够理解游戏编程的相关基础知识，那么你可以直接阅读你感兴趣的章节。如果你是一名初学者，尽量从第一章开始学习。​第一章，软件架构。讲了架构的意义、架构的原理以及如何架构。​第二章，C#技术要点。对基础基础做了详细的讲解。​第三章，数据表与程序。针对客户端中表格数据与程序的协作与应用做了详细的讲解。​第四章，UI用户界面。针对UI用户界面的工作原理与优化手段做了详细的讲解。​第五章，3D模型与动画。针对3D模型的原理，动画的原理以及两者的优化做了详细的讲解。​第六章，网络通信。针对网络层部分业务与底层原理做了详细的讲解。​第七章，AI。针对各类型AI做了详细的讲解。​第八章，地图与寻路。针对场景构建与优化、地图构建以及寻路算法优化做了详细的讲解。​第九章，渲染管线与图形学。针对图形数学、图形学常用算法、渲染管线做了详细的讲解。​第十章，渲染原理与知识。针对客户端各类渲染技术的渲染原理做了详细的讲解。</p><p>附录A为参考文献。</p><h3 id=\"勘误和支持\">勘误和支持</h3><p>由于作者的水平有限，写书的时间也很紧张，书中难免会出现一些错误或者不准确的地方，不妥之处在所难免，恳请读者批评指正。由于资金和时间有限无法专门弄一个网站来反馈书本中的问题，于是在Github上开了个仓库做问题集记录，<a href=\"https://github.com/luzexi/Unity3dToBeLeader/issues\">https://github.com/luzexi/Unity3dToBeLeader/issues</a> ，如果发现书本中的错误，可以将书中的错误发布在这个网页地址的问题列表，我将会及时的提供反馈。书本的初稿内容发布在我的个人博客上<a href=\"http://www.luzexi.com\">http://www.luzexi.com</a>，由于精力有限只能更新到初稿，后面再更新书本版本的时候会重新再发布一次新书稿，我希望能在这块内容上不断升级和精进。如果你有更多的宝贵意见，也欢迎你发送邮件至我的邮箱 jesse_luzexi@163.com ，很期待能够听到你们的真挚反馈。</p><h3 id=\"致谢\">致谢</h3><p>最后要感谢同事同僚以及网友的支持和点赞，《Unity3D网络游戏实战》作者罗培羽给予的帮助，机械工业出版社杨绣国老师细致缜密的审阅。特别要感谢我的妻子余胜男，为了支持我能安心写书安心工作，负担了家里的所有工作，辛苦万分，还不忘开导我，当我的心理医生为我排忧，这本书实在应该作为礼物献给她，以及我的两个女儿陆秀恩(Sharon)与陆安妮(Anne)，她们实在是世界上最好的女儿，知道该如何说出自己的诉求，并懂得遵守规则的重要性，时常还能做出曲线‘救国’的行动和思维，她们每次都要鼓励我，对我说“爸爸加油！”，很感激孩子们能和我一起努力，走在这条学习之路上又多了两个知己，谢谢陆秀恩感谢陆安妮。</p>",
            "url": "http://www.luzexi.com/2020/07/26/Unity3D%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E4%B9%8B%E8%BF%9B%E9%98%B6%E4%B8%BB%E7%A8%8B-%E5%89%8D%E8%A8%80",
            
            
            
            "tags": ["书籍著作","Unity3D","前端技术"],
            
            "date_published": "2020-07-26T00:00:00+08:00",
            "date_modified": "2020-07-26T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/25/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B019",
            "title": "每日读书笔记19 《人性的弱点》",
            "summary": "读书 书 看书 读后感 笔记 摘要",
            "content_text": "《人性的弱点》如何使你变得更加成熟53，不要总是找借口为什么很多人喜欢推卸责任呢，因为责怪别人比自己担负责任要容易得多。一个人迈向成熟的第一步应该是敢于承担责任。我们生活于世，就要面对生命中的许多责任，绝不可在受难或跌到的时候像孩子一样去椅子拿椅子出气。那些不成熟的人永远都可以找到一些理由以解脱他们自身的某些缺点或不幸。比如，他们童年极为贫困、父母过于贫苦或者过于富有、教导方式过于严厉或过于松散、没有受过教育或者健康状况恶劣等等。对于这些人来说，他们从没想到要去克服困难，而是先去找一只替罪羊。作者曾训练一些学员记忆别人的名字，一位女学员跑过来说，自己不可能做到，这是她家族的遗传，她说她的家族记忆力一向不好，因此自己也不期望在这方面有所改善。作者诚恳的说道，你的问题不是遗传，而是一种惰性。于是帮助她做了几个简单的记忆训练，由于她十分专注，因此效果非常良好，最后她克服困难，记忆力大大改善。我们常常责怪父母给我们成长环境糟糕，但奇怪的是，乔治华盛顿他没有高贵出身或功绩显赫的父母，他也一样能推动历史。亚伯拉罕.林肯更是年幼物质条件极其贫乏，这也没有对他产生什么不良影响。林肯并没有想着去责怪任何人，他克服了重重困难当上了总统并创造了历史。现代人简单又流行的一种逃避责任的方法便是去找一个心理医生，然后趟在他的诊疗椅子上，花一整天时间谈论我们的种种问题，以及为什么我们会变成目前这个模样的理由。最后大多数人都会得到一个理由，年幼的某些遭遇，过度占有欲的母亲，或过度专治的父亲，让你心里能好受些。葛福曼医生说，许多向心里医生求助的人通常喜欢为自己的弱点及与世俗格格不入的行为找出一个心理学上的借口，更有许多人继续把他们的诸多困难，怪罪于外在的各种因素。生成八字、星座守护、手相、脸相都能成为许多人推卸责任的理由。《圣经》中的耶稣在治疗病人时就不会浪费时间去探究原因。他会说“拿起你的褥子回家去吧，不要再犯罪了，你的罪被赦免了…”。显然耶稣的态度是把人的生活改造得更好才重要，而不是整天沉溺于自怜的深渊。为自己的行为承担责任，而不总是找借口",
            "content_html": "<p>《人性的弱点》</p><p>如何使你变得更加成熟</p><p>53，不要总是找借口</p><p>为什么很多人喜欢推卸责任呢，因为责怪别人比自己担负责任要容易得多。</p><p>一个人迈向成熟的第一步应该是敢于承担责任。我们生活于世，就要面对生命中的许多责任，绝不可在受难或跌到的时候像孩子一样去椅子拿椅子出气。</p><p>那些不成熟的人永远都可以找到一些理由以解脱他们自身的某些缺点或不幸。比如，他们童年极为贫困、父母过于贫苦或者过于富有、教导方式过于严厉或过于松散、没有受过教育或者健康状况恶劣等等。</p><p>对于这些人来说，他们从没想到要去克服困难，而是先去找一只替罪羊。</p><p>作者曾训练一些学员记忆别人的名字，一位女学员跑过来说，自己不可能做到，这是她家族的遗传，她说她的家族记忆力一向不好，因此自己也不期望在这方面有所改善。作者诚恳的说道，你的问题不是遗传，而是一种惰性。于是帮助她做了几个简单的记忆训练，由于她十分专注，因此效果非常良好，最后她克服困难，记忆力大大改善。</p><p>我们常常责怪父母给我们成长环境糟糕，但奇怪的是，乔治华盛顿他没有高贵出身或功绩显赫的父母，他也一样能推动历史。亚伯拉罕.林肯更是年幼物质条件极其贫乏，这也没有对他产生什么不良影响。林肯并没有想着去责怪任何人，他克服了重重困难当上了总统并创造了历史。</p><p>现代人简单又流行的一种逃避责任的方法便是去找一个心理医生，然后趟在他的诊疗椅子上，花一整天时间谈论我们的种种问题，以及为什么我们会变成目前这个模样的理由。最后大多数人都会得到一个理由，年幼的某些遭遇，过度占有欲的母亲，或过度专治的父亲，让你心里能好受些。</p><p>葛福曼医生说，许多向心里医生求助的人通常喜欢为自己的弱点及与世俗格格不入的行为找出一个心理学上的借口，更有许多人继续把他们的诸多困难，怪罪于外在的各种因素。生成八字、星座守护、手相、脸相都能成为许多人推卸责任的理由。</p><p>《圣经》中的耶稣在治疗病人时就不会浪费时间去探究原因。他会说“拿起你的褥子回家去吧，不要再犯罪了，你的罪被赦免了…”。显然耶稣的态度是把人的生活改造得更好才重要，而不是整天沉溺于自怜的深渊。</p><p>为自己的行为承担责任，而不总是找借口</p>",
            "url": "http://www.luzexi.com/2020/07/25/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B019",
            
            
            
            
            
            "date_published": "2020-07-25T00:00:00+08:00",
            "date_modified": "2020-07-25T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/23/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B018",
            "title": "每日读书笔记18 《人性的弱点》",
            "summary": "读书 书 看书 读后感 笔记 摘要",
            "content_text": "《人性的弱点》让你的家庭生活幸福快乐52，不要做婚姻的文盲这章全程都在讲婚姻的首要问题是性生活不和谐。哈密尔顿博士用了4年功夫，研究了100男子和100女子的婚姻，最后得出的结论是，性生活是婚姻和谐的首要因素，即使由于别的困难会引起两者间的冲突，如果性生活本身是满意的，那么许多问题就可以化解。百德菲尔特牧师放弃了传教事业，去担任纽约家庭辅导服务处主任，经过多年的经验，他发现，性不过是婚姻生活中的多种满意中的一种，但除非这种关系适当，否则其他都会出现问题。作者碍于情面不好意思说，只能引用百德菲尔特牧师的话，要得到这种能力，应该从一本合理的、情趣良好的书籍中开始，得到一些这方面的知识对将来的生活更好一些。了解一些必备的性知识",
            "content_html": "<p>《人性的弱点》</p><p>让你的家庭生活幸福快乐</p><p>52，不要做婚姻的文盲</p><p>这章全程都在讲婚姻的首要问题是性生活不和谐。</p><p>哈密尔顿博士用了4年功夫，研究了100男子和100女子的婚姻，最后得出的结论是，性生活是婚姻和谐的首要因素，即使由于别的困难会引起两者间的冲突，如果性生活本身是满意的，那么许多问题就可以化解。</p><p>百德菲尔特牧师放弃了传教事业，去担任纽约家庭辅导服务处主任，经过多年的经验，他发现，性不过是婚姻生活中的多种满意中的一种，但除非这种关系适当，否则其他都会出现问题。</p><p>作者碍于情面不好意思说，只能引用百德菲尔特牧师的话，要得到这种能力，应该从一本合理的、情趣良好的书籍中开始，得到一些这方面的知识对将来的生活更好一些。</p><p>了解一些必备的性知识</p>",
            "url": "http://www.luzexi.com/2020/07/23/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B018",
            
            
            
            
            
            "date_published": "2020-07-23T00:00:00+08:00",
            "date_modified": "2020-07-23T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/19/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B17",
            "title": "向内看自己(七) 自信是如何被建立起来的",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "我在自我探索的过程中一直未完全明白人的的自信是如何建立起来的，我不明白为何有些人学识不高却自信满满，而另一些人知识渊博却处处自卑，还有很多类似不明白的问题，比如有钱和没钱是否支撑了人自我的信心，漂不漂亮，强壮不强壮，是否真的决定了我们的自信程度。带着这些疑问我读了《自信的力量》，这本书让我豁然开朗，原来以前我认为的自信是比较局限的，原来是我给自己画了一个圈，从此再也没能走出这个圈。全书每章内容都让人有种豁然开朗的感觉，其中有一章讲的是“行动在建立自信过程中起到的作用”非常精华。开篇讲一个年轻男子正在经历的一场春宵的场景，这是他的第一次，面前的女子让他心醉神迷，这一刻他期待了很久，想象过不知多少次，现在这一刻终于来临了。然而他并没有任何性爱经验。他该如何建立自信来完成这一出人生的首场表演呢？作者说自信来自具体的行动，以及与他人的互动，而不是自我内心的独角戏。这个年轻人的自信来自真实的爱抚和亲吻，从小心翼翼地温柔抚摸，到享受鱼水之欢的整个过程，信心被我们在一点点的实际行动中积累起来。不止如此，他的自信也源自与对方的亲密互动，不只是享受欢鱼时的互动，更是生活中彼此之间建立起来的亲密联结。倘若他刻意扮演经验丰富的情场老手，反而会束手束脚，无法在亲密接触中找到支点。倘若他坦诚是自己的第一次，就有可能被她引导，自信便会来自对方，从对她的信任转化为对自己的信心。很多人过分在意自我的表现让事情变得更糟，人们通常会沉浸于内心的独角戏，认为我们单方面努力就够了，以为自己才是成功的关键。这种无知制约了我们的发挥，也是这种无知让我们的自信局限于简单的“自我”，就像是我们给自己画了一个圈，很长时间都没能走出这个圈。其实自信是自我与世界相互作用的产物，我们与世界互动的越多，越能更好更快的建立自信。通过与人互动，我们能感受到来自他人的支持，会发现事情其实比想象中简单得多，甚至会发现自己其实非常幸运。信心所覆盖的不仅仅是自我，还是他人与我、世界与我之间的互动。那么怎样才能让我与他人、与世界有更多的互动，从而建立自信呢？作者说，行动，就是最好的催化剂。很多时候我们因为缺乏自信而感到手足无措，明知自己必须去做，却迈不开步子，连自信都没有，又怎样能够勇敢地投身于行动呢？这似乎是一把无情的双向锁。然而事实是，只要我们动手去做，就能卸下心头的重担，从此便可以一往无前。作者举了个例子，在课堂上，老师时常会提出一些高难度的论题，有些孩子敢于尝试，即使答得不好，也会慢慢自信起来，在其他同学眼里，他们是敢于尝试的人，是能够放得开的人，仅此一点就足以让他们引以为荣。通过这样的尝试，这些善于行动的孩子们会发现，原来自己可以提出如此新颖的想法，原来自己还有从未发觉的潜能，即使没有达到要求，也收获了满满的成就感，在此基础上不断完善精益求精。其实我们都有一种误区，认为只有彻底清除了不确定性，我们才能自信的去行动，只有知道答案才能发言回答，其实不确定性是永远无法彻底清除的，如果我们执着于铲除所有不确定性，那么行动将永远会被搁置和拖延，我们也永远无法建立牢固的自信。不知你是否有这样的体会，在鼓起勇气强迫自己去做某事时，在战胜胆怯心理同倾慕的人说活时，在放手一搏上台公开演讲时，我们能感受到：仅仅放手去做这个事实就能唤醒身体里的本能，唤醒内心深处那股对建立自信至关重要的原始战斗力。其实我们的现状并非与生俱来，而是后天逐步积累造成的，信心也是一样。如果对一件事没有信心？没关系。我们可以在日常的行动中逐步熟悉事物，在与世界互动，与他人互动的过程中，建立对事物的信心。除了行动本身，我们通常比较关注行动的结果。​对于行动的结果，作者认为，人不可能主宰一切。我们可以决定某些事，但很多事情都不以人的意志为转移。我们应该对有些因素不在掌控范围内，随时可能出现意外的情况做好心理准备。即使我们精心谋划好每一个环节，制定事无巨细的规划，都会因为具体行动而产生新的情况和新的变量。我们来看看优秀的企业家是如何面对这些不确定性的。他们在出手之前深思熟虑，一旦付诸行动，便对自己的行为造成的直接和间接的结果给予充分信心。即使如此，他们也明白，事情的结果并不完全取决于自己，而是由许许多多的不确定因素影响造成的。面对这种不确定的必然性，他们毫不退缩，反而张开双臂坦然面对。他们深知，机会是在不确定中，由人的行为创造出来的。因此他们特别喜欢和擅长利用事物的不确定性主动开启一段可能拥有的美好前景。现在我们知道自信的来源与建立的过程了。不要只顾自己对自己有信心，你的行动所创造的一切都可能成为成为你在世界上立足的支点。不要太在意自己，行动能让你遇到很多人，改变很多事，他们可能给你灵感，让你看到希望。当我们因为缺乏自信而饱受煎熬，或者给自己过大的压力时，一定是因为我们对事务的认识出现了偏差。你可能误以为一切都取决于我自身，可能缺少与他人以及世界互动，这些都会导致你的思想被束缚，被局限在一个小范围内挣扎。张开双臂，抛开我们的偏见，拥抱这个世界，与世界互动，与他人互动，行动起来，在平日中逐步建立自信。",
            "content_html": "<p>我在自我探索的过程中一直未完全明白人的的自信是如何建立起来的，我不明白为何有些人学识不高却自信满满，而另一些人知识渊博却处处自卑，还有很多类似不明白的问题，比如有钱和没钱是否支撑了人自我的信心，漂不漂亮，强壮不强壮，是否真的决定了我们的自信程度。</p><h4 id=\"带着这些疑问我读了自信的力量这本书让我豁然开朗原来以前我认为的自信是比较局限的原来是我给自己画了一个圈从此再也没能走出这个圈\">带着这些疑问我读了《自信的力量》，这本书让我豁然开朗，原来以前我认为的自信是比较局限的，原来是我给自己画了一个圈，从此再也没能走出这个圈。</h4><p>全书每章内容都让人有种豁然开朗的感觉，其中有一章讲的是“行动在建立自信过程中起到的作用”非常精华。</p><p>开篇讲一个年轻男子正在经历的一场春宵的场景，这是他的第一次，面前的女子让他心醉神迷，这一刻他期待了很久，想象过不知多少次，现在这一刻终于来临了。然而他并没有任何性爱经验。他该如何建立自信来完成这一出人生的首场表演呢？</p><p>作者说自信来自具体的行动，以及与他人的互动，而不是自我内心的独角戏。这个年轻人的自信来自真实的爱抚和亲吻，从小心翼翼地温柔抚摸，到享受鱼水之欢的整个过程，信心被我们在一点点的实际行动中积累起来。不止如此，他的自信也源自与对方的亲密互动，不只是享受欢鱼时的互动，更是生活中彼此之间建立起来的亲密联结。</p><p>倘若他刻意扮演经验丰富的情场老手，反而会束手束脚，无法在亲密接触中找到支点。倘若他坦诚是自己的第一次，就有可能被她引导，自信便会来自对方，从对她的信任转化为对自己的信心。</p><h4 id=\"很多人过分在意自我的表现让事情变得更糟人们通常会沉浸于内心的独角戏认为我们单方面努力就够了以为自己才是成功的关键\">很多人过分在意自我的表现让事情变得更糟，人们通常会沉浸于内心的独角戏，认为我们单方面努力就够了，以为自己才是成功的关键。</h4><h4 id=\"这种无知制约了我们的发挥也是这种无知让我们的自信局限于简单的自我就像是我们给自己画了一个圈很长时间都没能走出这个圈\">这种无知制约了我们的发挥，也是这种无知让我们的自信局限于简单的“自我”，就像是我们给自己画了一个圈，很长时间都没能走出这个圈。</h4><h4 id=\"其实自信是自我与世界相互作用的产物我们与世界互动的越多越能更好更快的建立自信通过与人互动我们能感受到来自他人的支持会发现事情其实比想象中简单得多甚至会发现自己其实非常幸运信心所覆盖的不仅仅是自我还是他人与我世界与我之间的互动\">其实自信是自我与世界相互作用的产物，我们与世界互动的越多，越能更好更快的建立自信。通过与人互动，我们能感受到来自他人的支持，会发现事情其实比想象中简单得多，甚至会发现自己其实非常幸运。信心所覆盖的不仅仅是自我，还是他人与我、世界与我之间的互动。</h4><p>那么怎样才能让我与他人、与世界有更多的互动，从而建立自信呢？</p><h4 id=\"作者说行动就是最好的催化剂\">作者说，行动，就是最好的催化剂。</h4><p>很多时候我们因为缺乏自信而感到手足无措，明知自己必须去做，却迈不开步子，连自信都没有，又怎样能够勇敢地投身于行动呢？这似乎是一把无情的双向锁。</p><p>然而事实是，只要我们动手去做，就能卸下心头的重担，从此便可以一往无前。</p><h4 id=\"作者举了个例子在课堂上老师时常会提出一些高难度的论题有些孩子敢于尝试即使答得不好也会慢慢自信起来在其他同学眼里他们是敢于尝试的人是能够放得开的人仅此一点就足以让他们引以为荣通过这样的尝试这些善于行动的孩子们会发现原来自己可以提出如此新颖的想法原来自己还有从未发觉的潜能即使没有达到要求也收获了满满的成就感在此基础上不断完善精益求精\">作者举了个例子，在课堂上，老师时常会提出一些高难度的论题，有些孩子敢于尝试，即使答得不好，也会慢慢自信起来，在其他同学眼里，他们是敢于尝试的人，是能够放得开的人，仅此一点就足以让他们引以为荣。通过这样的尝试，这些善于行动的孩子们会发现，原来自己可以提出如此新颖的想法，原来自己还有从未发觉的潜能，即使没有达到要求，也收获了满满的成就感，在此基础上不断完善精益求精。</h4><p>其实我们都有一种误区，认为只有彻底清除了不确定性，我们才能自信的去行动，只有知道答案才能发言回答，其实不确定性是永远无法彻底清除的，如果我们执着于铲除所有不确定性，那么行动将永远会被搁置和拖延，我们也永远无法建立牢固的自信。</p><h4 id=\"不知你是否有这样的体会在鼓起勇气强迫自己去做某事时在战胜胆怯心理同倾慕的人说活时在放手一搏上台公开演讲时我们能感受到仅仅放手去做这个事实就能唤醒身体里的本能唤醒内心深处那股对建立自信至关重要的原始战斗力\">不知你是否有这样的体会，在鼓起勇气强迫自己去做某事时，在战胜胆怯心理同倾慕的人说活时，在放手一搏上台公开演讲时，我们能感受到：仅仅放手去做这个事实就能唤醒身体里的本能，唤醒内心深处那股对建立自信至关重要的原始战斗力。</h4><p>其实我们的现状并非与生俱来，而是后天逐步积累造成的，信心也是一样。如果对一件事没有信心？没关系。我们可以在日常的行动中逐步熟悉事物，在与世界互动，与他人互动的过程中，建立对事物的信心。</p><p>除了行动本身，我们通常比较关注行动的结果。</p><h4 id=\"对于行动的结果作者认为人不可能主宰一切我们可以决定某些事但很多事情都不以人的意志为转移\">​对于行动的结果，作者认为，人不可能主宰一切。我们可以决定某些事，但很多事情都不以人的意志为转移。</h4><h4 id=\"我们应该对有些因素不在掌控范围内随时可能出现意外的情况做好心理准备即使我们精心谋划好每一个环节制定事无巨细的规划都会因为具体行动而产生新的情况和新的变量\">我们应该对有些因素不在掌控范围内，随时可能出现意外的情况做好心理准备。即使我们精心谋划好每一个环节，制定事无巨细的规划，都会因为具体行动而产生新的情况和新的变量。</h4><p>我们来看看优秀的企业家是如何面对这些不确定性的。</p><h4 id=\"他们在出手之前深思熟虑一旦付诸行动便对自己的行为造成的直接和间接的结果给予充分信心即使如此他们也明白事情的结果并不完全取决于自己而是由许许多多的不确定因素影响造成的面对这种不确定的必然性他们毫不退缩反而张开双臂坦然面对他们深知机会是在不确定中由人的行为创造出来的因此他们特别喜欢和擅长利用事物的不确定性主动开启一段可能拥有的美好前景\">他们在出手之前深思熟虑，一旦付诸行动，便对自己的行为造成的直接和间接的结果给予充分信心。即使如此，他们也明白，事情的结果并不完全取决于自己，而是由许许多多的不确定因素影响造成的。面对这种不确定的必然性，他们毫不退缩，反而张开双臂坦然面对。他们深知，机会是在不确定中，由人的行为创造出来的。因此他们特别喜欢和擅长利用事物的不确定性主动开启一段可能拥有的美好前景。</h4><p>现在我们知道自信的来源与建立的过程了。不要只顾自己对自己有信心，你的行动所创造的一切都可能成为成为你在世界上立足的支点。不要太在意自己，行动能让你遇到很多人，改变很多事，他们可能给你灵感，让你看到希望。</p><h4 id=\"当我们因为缺乏自信而饱受煎熬或者给自己过大的压力时一定是因为我们对事务的认识出现了偏差你可能误以为一切都取决于我自身可能缺少与他人以及世界互动这些都会导致你的思想被束缚被局限在一个小范围内挣扎\">当我们因为缺乏自信而饱受煎熬，或者给自己过大的压力时，一定是因为我们对事务的认识出现了偏差。你可能误以为一切都取决于我自身，可能缺少与他人以及世界互动，这些都会导致你的思想被束缚，被局限在一个小范围内挣扎。</h4><h4 id=\"张开双臂抛开我们的偏见拥抱这个世界与世界互动与他人互动行动起来在平日中逐步建立自信\">张开双臂，抛开我们的偏见，拥抱这个世界，与世界互动，与他人互动，行动起来，在平日中逐步建立自信。</h4>",
            "url": "http://www.luzexi.com/2020/07/19/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B17",
            
            
            
            
            
            "date_published": "2020-07-19T00:00:00+08:00",
            "date_modified": "2020-07-19T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/18/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B017",
            "title": "每日读书笔记17 《人性的弱点》",
            "summary": "读书 书 看书 读后感 笔记 摘要",
            "content_text": "《人性的弱点》让你的家庭生活幸福快乐51，如何与男性相处二次世界大战后有人对军人做了一个调查，“你希望从婚姻中获得什么”，这些穿制服、肌肉发达的小伙子们不假思索的列出了答案，“舒适”。这与许多化妆品或香水广告中的暗示大不相同。男人心中的“舒适”到底指的是什么，是母亲般的温柔，还是玛丽莲梦露般的性感。作者归结出几个重点。1.要脾气好、善解人意男人通常最注意对方是否具有好脾气，他们宁愿在欢愉的气氛中吃泡面，也不愿意和一个唠叨、烦躁、牢骚满腹的女性一起吃牛排。一位单身汉坦言，如果一位活泼、好脾气、明朗却不忠实的女人和一位贞洁的悍妇，他毫不迟疑的选择前者。几年前，作者雇佣了一位女打字员，但她的能力太差，常常拼错字，速度慢，记录又不准确，但是她具有一种欢愉的气质，能忍受各种怒气、抱怨和批评，她如同阳光般照亮整个房间，她的丈夫每次望着她时脸上都发出霓虹灯般的光彩。2.当个好伴侣什么是好伴侣。作者解释到，琳和杰克就是好伴侣，琳不曾实际参加杰克的各种活动，但她总是在一旁为他加油，并且帮助他做些他无法分心去做的事。结婚16年的梅娜太太发现自己的婚姻缺少了点什么，她终于发现缺少了与丈夫一份如朋友般的情谊，于是她试着去了解丈夫的兴趣。现在她对曲棍球赛很敢兴趣，与丈夫常一起看曲棍球，除了曲棍球，他继续了解丈夫的其他兴趣，并与丈夫一起分享乐趣。3.当名好听众许多女性在这方面做得不好，是因为不了解听的艺术。很多女性唠叨不休，男人根本找不到机会可让自己也发表一些长篇大论。聆听的品质十分重要，可以鼓舞讲话的人表达出完整的意思。聆听并不是指必须保持沉默，你大可以从旁加进几句鼓舞的话。想要当好听众，首先要注意听讲，眼睛不要四处张望，或显出烦躁不安的样子。一个好的听众除了要专心之外，还要懂得合作。聪明的男人分得出什么人真的在听他讲话，或什么样的女性只是敷衍了事讨他欢心。在他讲话的时候偶尔插几句文化，或提供些不同的看法，可以刺激或鼓励他继续讲下去，最好在他讲得告一段落时再插进去，并简明扼要以便尽快把发言权还给他。只要勤加练习，我们完全可以熟悉听讲的规则。懂得技巧的观众通常也会变成优秀的谈话者，因为听与讲不可分，一方的技巧通常会加强另一方面的表现。它还可以帮助我们迈向成熟，因为这正是我们能不断学习的最佳途径。",
            "content_html": "<h4 id=\"人性的弱点\">《人性的弱点》</h4><h4 id=\"让你的家庭生活幸福快乐\">让你的家庭生活幸福快乐</h4><h3 id=\"51如何与男性相处\">51，如何与男性相处</h3><p>二次世界大战后有人对军人做了一个调查，“你希望从婚姻中获得什么”，这些穿制服、肌肉发达的小伙子们不假思索的列出了答案，“舒适”。这与许多化妆品或香水广告中的暗示大不相同。男人心中的“舒适”到底指的是什么，是母亲般的温柔，还是玛丽莲梦露般的性感。</p><p>作者归结出几个重点。</p><h4 id=\"1要脾气好善解人意\">1.要脾气好、善解人意</h4><p>男人通常最注意对方是否具有好脾气，他们宁愿在欢愉的气氛中吃泡面，也不愿意和一个唠叨、烦躁、牢骚满腹的女性一起吃牛排。一位单身汉坦言，如果一位活泼、好脾气、明朗却不忠实的女人和一位贞洁的悍妇，他毫不迟疑的选择前者。</p><p>几年前，作者雇佣了一位女打字员，但她的能力太差，常常拼错字，速度慢，记录又不准确，但是她具有一种欢愉的气质，能忍受各种怒气、抱怨和批评，她如同阳光般照亮整个房间，她的丈夫每次望着她时脸上都发出霓虹灯般的光彩。</p><h4 id=\"2当个好伴侣\">2.当个好伴侣</h4><p>什么是好伴侣。作者解释到，琳和杰克就是好伴侣，琳不曾实际参加杰克的各种活动，但她总是在一旁为他加油，并且帮助他做些他无法分心去做的事。结婚16年的梅娜太太发现自己的婚姻缺少了点什么，她终于发现缺少了与丈夫一份如朋友般的情谊，于是她试着去了解丈夫的兴趣。现在她对曲棍球赛很敢兴趣，与丈夫常一起看曲棍球，除了曲棍球，他继续了解丈夫的其他兴趣，并与丈夫一起分享乐趣。</p><h4 id=\"3当名好听众\">3.当名好听众</h4><p>许多女性在这方面做得不好，是因为不了解听的艺术。很多女性唠叨不休，男人根本找不到机会可让自己也发表一些长篇大论。</p><p>聆听的品质十分重要，可以鼓舞讲话的人表达出完整的意思。聆听并不是指必须保持沉默，你大可以从旁加进几句鼓舞的话。想要当好听众，首先要注意听讲，眼睛不要四处张望，或显出烦躁不安的样子。</p><p>一个好的听众除了要专心之外，还要懂得合作。聪明的男人分得出什么人真的在听他讲话，或什么样的女性只是敷衍了事讨他欢心。在他讲话的时候偶尔插几句文化，或提供些不同的看法，可以刺激或鼓励他继续讲下去，最好在他讲得告一段落时再插进去，并简明扼要以便尽快把发言权还给他。</p><p>只要勤加练习，我们完全可以熟悉听讲的规则。懂得技巧的观众通常也会变成优秀的谈话者，因为听与讲不可分，一方的技巧通常会加强另一方面的表现。它还可以帮助我们迈向成熟，因为这正是我们能不断学习的最佳途径。</p>",
            "url": "http://www.luzexi.com/2020/07/18/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B017",
            
            
            
            
            
            "date_published": "2020-07-18T00:00:00+08:00",
            "date_modified": "2020-07-18T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/16/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B016",
            "title": "每日读书笔记16 《人性的弱点》",
            "summary": "读书 书 看书 读后感 笔记 摘要",
            "content_text": "《人性的弱点》让你的家庭生活幸福快乐50，如何与女性相处4.了解她的工作现今许多妇女都有自力更生的观念，很多女性结婚前后多少都了解什么是工作要求和环境压力，因此她们很容易理解丈夫的处境。但丈夫则不同，他们没有经历过留在家中维护后方的经验，体会不到女性的承重负担。女性在结婚后回归家庭，负担起家庭主妇的工作，包括洗衣、打扫、煮饭、教育、还要照顾年迈的老任，她们的工作分量和忙碌程度，绝不亚于在外工作的丈夫。丈夫们应该要知道这些家务事的内容。每日的家务通常十分单调重复，家庭主妇的工作负荷沉重，而唯一的代价和酬劳便是家人的肯定和感谢。家庭主妇必须要常常与外界接触，以免单调的工作变得乏味吞噬生活，她们也应该更多得了解丈夫的工作性质和环境，以免两人的生活产生脱节。这些都需要靠丈夫支持，丈夫在一天忙碌后回家通常喜欢安静的休息下不愿再陪妻子参加活跃的社交活动，这对家庭主妇太不公平了，丈夫们应该稍作妥协，使得妻子能更好的融入社交活动。5.要做她的后盾有个朋友告诉作者，最近家里出了点事，有位极好的姑妈来家里，但孩子却烦了气管炎，原本的出游计划都泡汤了，幸好有丈夫帮忙，带姑妈到处观光，使得姑妈玩的尽兴，解除了自己心理上的负担。当麻烦事来临时，丈夫应该让太太知道，他这个先锋人员比起所有小说上的英雄都要真实可靠。不只碰到大事才偶尔为之，就连日常生活中的小事也该如此。妻子需要知道丈夫永远与她站在一起，无论是碰到小危机还是大变故。6.分享她的嗜好美满的婚姻生活，主要靠双方所具的“分享”和“合作”的能力而定。在处理任何家庭事件的时候，“你”和“我”的心态必须改成“我们”。如果夫妻双方能彼此了解对方在生活中所扮演的角色，那么，在决定这些事项的时候，态度便能更加合理、更加友善。很多男性认为对女人家的事务表示兴趣，会损及大男人的尊严。其实这种想法非常糟糕，这会阻止家庭走向更加欢愉、更加充满爱的氛围。作家安德烈很很能洞悉人情世故，他说，要在女性认为重要的事情上表示出兴趣，比如装扮、料理家务等，要试着去了解她的嗜好和日常工作，相信不久，你也会发现，原来自己对这些东西其实也很有兴趣。7.爱你的妻子被爱的女性，永远不会失败，被爱是女性成功的重要因素，因此丈夫在此扮演的角色十分重要。如果说男性更喜欢感受被爱，那么女性则更喜欢你告诉她。我们不用像欧式的情人那样会说情话，只需要在人群中与她的眼光相触时，或看电影时轻握她的手，或出乎意料的拥抱她、温柔体贴等。杜门先生取了一个聪明美丽的妻子，但结婚之后杜门先生便开始把精神贯注在事业上，而把维持婚姻的责任完全丢给太太。前5年的婚姻生活过得很不愉快。直到有一天，他又和太太发生争执，之后，只有4岁大的儿子问爸爸，爸爸你不喜欢妈妈吗？我觉得她很好啊。那一瞬间杜门觉得自己好像是儿子眼中的大坏蛋。他说，自己忽然体会到了妈妈的分量，而我也一直是爱她的，只是自己一直没有尽到做父亲和丈夫的责任。于是他决定弥补过失，请求太太帮助自己做一个贤夫良父，并十分感谢妻子，妻子也按他的意思做了。后来他们的婚姻改善很多，不但彼此的感情更加成熟了，彼此也更加互相敬重。爱上一名女子并不只是感情横溢的情绪问题，这同时包括一个人的所有品质，如：知性、感性、礼节及对人是否敬重等等。现代女性热衷于追求自我进步，因此造成了一个极大的咨询市场。有许多一见不断提供给她们，例如要如何吸引男人、如何找到丈夫、找到之后又要如何对待他们、要如何抚养小孩、要如何料理家事、要如何安排自己的休闲时间等等。虽然丈夫也热衷于追求自我进步，但他们通常局限于如何赚钱，或如何在就也市场上更具竞争力，却没有哪些是教导男性如何成为一个好丈夫，或如何吸引妻子及如何引起她们的注意等等。婚姻生活的改善，似乎完全是小女人的事情了。男性也会急忙这么解释：他们必须负起大部分家庭经济负担，因此他们必须把大部分精力用来改进自己的工作能力，而不是如何做丈夫这类问题。但是妇女并非靠面包生活，婚姻也不能只靠面包来维持。经济能力知识男性责任的开端，而不是终点，更不是全部。如果只是单方面教育女性如何做一个好妻子、好母亲，而男性却仍然只业余性地当个丈夫或父亲，这对婚姻生活又会增加多少好处呢。自人类伊始，家庭便是最基本的团体制度。它不但维系人类目前的实际需要，也是将来的期待。它负起保护、养育及教导的功能，是人类最神圣的要塞。像这么重要的事情，岂可由女性单方面来负责。家庭并不仅是一个提供吃喝、睡觉或喂养小孩的地方。家庭提供很多重要的东西，包括：温情、彼此关爱、喜怒哀乐的分享等等，这些使得家庭具有更重要的价值。一个女性很难单独提供所有这些东西，这必须由男女双方来共同负责。作者提出一个卑微的建议：希望男性能减轻女性的负担，也同时多注意自己所扮演的父亲和丈夫的角色。德鲁大学人际关系教授大卫，提出，“婚姻是我们是否成熟的最好试金石，你若不想关心别人，最好是自己独处。但你若想与另一个人亲密的生活在一起，便必须具有关爱别人的能力。”婚姻能有两种结果：一是使我们变得成熟，一是使我们尝到不成熟的苦果。学会与妻子相处",
            "content_html": "<h4 id=\"人性的弱点\">《人性的弱点》</h4><h4 id=\"让你的家庭生活幸福快乐\">让你的家庭生活幸福快乐</h4><h3 id=\"50如何与女性相处\">50，如何与女性相处</h3><h4 id=\"4了解她的工作\">4.了解她的工作</h4><p>现今许多妇女都有自力更生的观念，很多女性结婚前后多少都了解什么是工作要求和环境压力，因此她们很容易理解丈夫的处境。</p><p>但丈夫则不同，他们没有经历过留在家中维护后方的经验，体会不到女性的承重负担。女性在结婚后回归家庭，负担起家庭主妇的工作，包括洗衣、打扫、煮饭、教育、还要照顾年迈的老任，她们的工作分量和忙碌程度，绝不亚于在外工作的丈夫。</p><p>丈夫们应该要知道这些家务事的内容。每日的家务通常十分单调重复，家庭主妇的工作负荷沉重，而唯一的代价和酬劳便是家人的肯定和感谢。</p><p>家庭主妇必须要常常与外界接触，以免单调的工作变得乏味吞噬生活，她们也应该更多得了解丈夫的工作性质和环境，以免两人的生活产生脱节。这些都需要靠丈夫支持，丈夫在一天忙碌后回家通常喜欢安静的休息下不愿再陪妻子参加活跃的社交活动，这对家庭主妇太不公平了，丈夫们应该稍作妥协，使得妻子能更好的融入社交活动。</p><h4 id=\"5要做她的后盾\">5.要做她的后盾</h4><p>有个朋友告诉作者，最近家里出了点事，有位极好的姑妈来家里，但孩子却烦了气管炎，原本的出游计划都泡汤了，幸好有丈夫帮忙，带姑妈到处观光，使得姑妈玩的尽兴，解除了自己心理上的负担。</p><p>当麻烦事来临时，丈夫应该让太太知道，他这个先锋人员比起所有小说上的英雄都要真实可靠。不只碰到大事才偶尔为之，就连日常生活中的小事也该如此。妻子需要知道丈夫永远与她站在一起，无论是碰到小危机还是大变故。</p><h4 id=\"6分享她的嗜好\">6.分享她的嗜好</h4><p>美满的婚姻生活，主要靠双方所具的“分享”和“合作”的能力而定。在处理任何家庭事件的时候，“你”和“我”的心态必须改成“我们”。如果夫妻双方能彼此了解对方在生活中所扮演的角色，那么，在决定这些事项的时候，态度便能更加合理、更加友善。</p><p>很多男性认为对女人家的事务表示兴趣，会损及大男人的尊严。其实这种想法非常糟糕，这会阻止家庭走向更加欢愉、更加充满爱的氛围。</p><p>作家安德烈很很能洞悉人情世故，他说，要在女性认为重要的事情上表示出兴趣，比如装扮、料理家务等，要试着去了解她的嗜好和日常工作，相信不久，你也会发现，原来自己对这些东西其实也很有兴趣。</p><h4 id=\"7爱你的妻子\">7.爱你的妻子</h4><p>被爱的女性，永远不会失败，被爱是女性成功的重要因素，因此丈夫在此扮演的角色十分重要。如果说男性更喜欢感受被爱，那么女性则更喜欢你告诉她。</p><p>我们不用像欧式的情人那样会说情话，只需要在人群中与她的眼光相触时，或看电影时轻握她的手，或出乎意料的拥抱她、温柔体贴等。</p><p>杜门先生取了一个聪明美丽的妻子，但结婚之后杜门先生便开始把精神贯注在事业上，而把维持婚姻的责任完全丢给太太。前5年的婚姻生活过得很不愉快。直到有一天，他又和太太发生争执，之后，只有4岁大的儿子问爸爸，爸爸你不喜欢妈妈吗？我觉得她很好啊。那一瞬间杜门觉得自己好像是儿子眼中的大坏蛋。他说，自己忽然体会到了妈妈的分量，而我也一直是爱她的，只是自己一直没有尽到做父亲和丈夫的责任。于是他决定弥补过失，请求太太帮助自己做一个贤夫良父，并十分感谢妻子，妻子也按他的意思做了。后来他们的婚姻改善很多，不但彼此的感情更加成熟了，彼此也更加互相敬重。</p><p>爱上一名女子并不只是感情横溢的情绪问题，这同时包括一个人的所有品质，如：知性、感性、礼节及对人是否敬重等等。</p><p>现代女性热衷于追求自我进步，因此造成了一个极大的咨询市场。有许多一见不断提供给她们，例如要如何吸引男人、如何找到丈夫、找到之后又要如何对待他们、要如何抚养小孩、要如何料理家事、要如何安排自己的休闲时间等等。虽然丈夫也热衷于追求自我进步，但他们通常局限于如何赚钱，或如何在就也市场上更具竞争力，却没有哪些是教导男性如何成为一个好丈夫，或如何吸引妻子及如何引起她们的注意等等。婚姻生活的改善，似乎完全是小女人的事情了。</p><h4 id=\"男性也会急忙这么解释他们必须负起大部分家庭经济负担因此他们必须把大部分精力用来改进自己的工作能力而不是如何做丈夫这类问题\">男性也会急忙这么解释：他们必须负起大部分家庭经济负担，因此他们必须把大部分精力用来改进自己的工作能力，而不是如何做丈夫这类问题。</h4><h4 id=\"但是妇女并非靠面包生活婚姻也不能只靠面包来维持经济能力知识男性责任的开端而不是终点更不是全部\">但是妇女并非靠面包生活，婚姻也不能只靠面包来维持。经济能力知识男性责任的开端，而不是终点，更不是全部。</h4><p>如果只是单方面教育女性如何做一个好妻子、好母亲，而男性却仍然只业余性地当个丈夫或父亲，这对婚姻生活又会增加多少好处呢。</p><h4 id=\"自人类伊始家庭便是最基本的团体制度它不但维系人类目前的实际需要也是将来的期待它负起保护养育及教导的功能是人类最神圣的要塞\">自人类伊始，家庭便是最基本的团体制度。它不但维系人类目前的实际需要，也是将来的期待。它负起保护、养育及教导的功能，是人类最神圣的要塞。</h4><p>像这么重要的事情，岂可由女性单方面来负责。</p><h4 id=\"家庭并不仅是一个提供吃喝睡觉或喂养小孩的地方家庭提供很多重要的东西包括温情彼此关爱喜怒哀乐的分享等等这些使得家庭具有更重要的价值\">家庭并不仅是一个提供吃喝、睡觉或喂养小孩的地方。家庭提供很多重要的东西，包括：温情、彼此关爱、喜怒哀乐的分享等等，这些使得家庭具有更重要的价值。</h4><p>一个女性很难单独提供所有这些东西，这必须由男女双方来共同负责。</p><p>作者提出一个卑微的建议：希望男性能减轻女性的负担，也同时多注意自己所扮演的父亲和丈夫的角色。德鲁大学人际关系教授大卫，提出，“婚姻是我们是否成熟的最好试金石，你若不想关心别人，最好是自己独处。但你若想与另一个人亲密的生活在一起，便必须具有关爱别人的能力。”婚姻能有两种结果：一是使我们变得成熟，一是使我们尝到不成熟的苦果。</p><p>学会与妻子相处</p>",
            "url": "http://www.luzexi.com/2020/07/16/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B016",
            
            
            
            
            
            "date_published": "2020-07-16T00:00:00+08:00",
            "date_modified": "2020-07-16T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/13/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B015",
            "title": "每日读书笔记15 《人性的弱点》",
            "summary": "读书 书 看书 读后感 笔记 摘要",
            "content_text": "《人性的弱点》让你的家庭生活幸福快乐50，如何与女性相处一般人看来单身汉似乎都是横冲直撞、无所顾虑的，而结了婚的男子则十分谨慎、庸俗。其实单身汉比结了婚的男子更严肃、认真，在金钱上斤斤计较，也更懂得为自己打算，因此他们通常不会冒险去结婚登记处，相信许多未婚女子也是如此。我们应该向结了婚的男人致敬，他们既然有勇气结婚，相信也一定会愿意用各种技巧来增进自己的婚姻幸福。康奈尔大学文理学学院院长解释说，婚姻是否美满，要看双方的心理是否成熟。也就是说，他们是否了解自己、了解与对方的关系，并且愿意彼此分担责任，以增进对方的快乐。维持家庭关系是凭借内在价值的满足，例如感情、友谊、价值观等，而且不能用强求的方式取得。以下是与妻子相处的7个建议1.感谢她、称赞她千万别短缺了太太的配粮，这样她就会心甘情愿为你卖命。在你失去工作、头发或腰围的时候，她会很乐意与你同甘共苦，甚至不会怨天尤人地天天穿着那件仅有的外套，只要你能时时不忘赞美她。通常男士比较容易知道自己的定位，因为他们的工作表现很快就能从上级反馈，或者他们做成了一笔生意，很快就能晋升、加薪或得到表扬。但女士们则不同，她们待在家里穷忙，却一点也不知道自己的成绩如何，除非她生命中的另一半告诉她、肯定她。因此男士们的感谢和赞美是她唯一的奖励。要想赢得女人的心，并让她愿意永远不辞辛劳地取悦自己，最好、最有用、最不会失败的方法，便是时时全心全意地感谢她、赞美她。一位纽约专栏作家罗伯特娶了一位美丽聪慧的妻子珍妮，但珍妮却认为罗伯特是世界上最好的丈夫。因为罗伯特总是不断得赞美妻子，每当他有什么新的书出版时，总不会忘记在首页上写上“献给珍妮”，这些题字比起支票上的数字有用的多。2.要慷慨、关心她许多男士认为慷慨就是指大方的付清所有账单，其实女士真正需要的慷慨并不是这些，她们需要的是男士的关注与关心，例如可以对她说，要不请你妈妈来我们家住一段时间，或者在宴会上时时表达你对她的关心，这才是真正的慷慨。作者记得有一次参加宴会，男主人是个相当出名的杰出人物，对每个人都极为殷勤有礼，唯独对自己太太例外。他的太太在陌生人群当中显得很不自在，而她的丈夫则如鱼得水，在人群当中显得十分得意。分一点关注给自己的太太并不会影响他的公共关系，反而有助他的形象，更可增进夫妻之间的关系。后来听说他们的婚姻果然恶化。3.不要过于不修边幅一般人认为注重打扮或保持吸引力是女人家的事，但男士也同样需要注意自己的形象，特别是在妻子面前。男士们上班的时候是西装笔挺，但在家里的德性却像尚未整理过的床铺一样，不忍直视。这种邋遢的男子大概从没想过，太太们也是希望自己的另一半清洁整齐，她更喜欢你能洗脸刮胡子，至少在她面前晃来晃去的时候，能对得起她的眼睛。一名真正的男子当然不靠外貌，但外表却是他人见到你时对你的第一印象。我们应该在家里也同样时时保持整齐，至少干净整洁。",
            "content_html": "<h4 id=\"人性的弱点\">《人性的弱点》</h4><h4 id=\"让你的家庭生活幸福快乐\">让你的家庭生活幸福快乐</h4><h3 id=\"50如何与女性相处\">50，如何与女性相处</h3><p>一般人看来单身汉似乎都是横冲直撞、无所顾虑的，而结了婚的男子则十分谨慎、庸俗。其实单身汉比结了婚的男子更严肃、认真，在金钱上斤斤计较，也更懂得为自己打算，因此他们通常不会冒险去结婚登记处，相信许多未婚女子也是如此。</p><p>我们应该向结了婚的男人致敬，他们既然有勇气结婚，相信也一定会愿意用各种技巧来增进自己的婚姻幸福。</p><p>康奈尔大学文理学学院院长解释说，婚姻是否美满，要看双方的心理是否成熟。也就是说，他们是否了解自己、了解与对方的关系，并且愿意彼此分担责任，以增进对方的快乐。维持家庭关系是凭借内在价值的满足，例如感情、友谊、价值观等，而且不能用强求的方式取得。</p><p>以下是与妻子相处的7个建议</p><h4 id=\"1感谢她称赞她\">1.感谢她、称赞她</h4><p>千万别短缺了太太的配粮，这样她就会心甘情愿为你卖命。在你失去工作、头发或腰围的时候，她会很乐意与你同甘共苦，甚至不会怨天尤人地天天穿着那件仅有的外套，只要你能时时不忘赞美她。</p><p>通常男士比较容易知道自己的定位，因为他们的工作表现很快就能从上级反馈，或者他们做成了一笔生意，很快就能晋升、加薪或得到表扬。但女士们则不同，她们待在家里穷忙，却一点也不知道自己的成绩如何，除非她生命中的另一半告诉她、肯定她。因此男士们的感谢和赞美是她唯一的奖励。要想赢得女人的心，并让她愿意永远不辞辛劳地取悦自己，最好、最有用、最不会失败的方法，便是时时全心全意地感谢她、赞美她。</p><p>一位纽约专栏作家罗伯特娶了一位美丽聪慧的妻子珍妮，但珍妮却认为罗伯特是世界上最好的丈夫。因为罗伯特总是不断得赞美妻子，每当他有什么新的书出版时，总不会忘记在首页上写上“献给珍妮”，这些题字比起支票上的数字有用的多。</p><h4 id=\"2要慷慨关心她\">2.要慷慨、关心她</h4><p>许多男士认为慷慨就是指大方的付清所有账单，其实女士真正需要的慷慨并不是这些，她们需要的是男士的关注与关心，例如可以对她说，要不请你妈妈来我们家住一段时间，或者在宴会上时时表达你对她的关心，这才是真正的慷慨。</p><p>作者记得有一次参加宴会，男主人是个相当出名的杰出人物，对每个人都极为殷勤有礼，唯独对自己太太例外。他的太太在陌生人群当中显得很不自在，而她的丈夫则如鱼得水，在人群当中显得十分得意。分一点关注给自己的太太并不会影响他的公共关系，反而有助他的形象，更可增进夫妻之间的关系。后来听说他们的婚姻果然恶化。</p><h4 id=\"3不要过于不修边幅\">3.不要过于不修边幅</h4><p>一般人认为注重打扮或保持吸引力是女人家的事，但男士也同样需要注意自己的形象，特别是在妻子面前。男士们上班的时候是西装笔挺，但在家里的德性却像尚未整理过的床铺一样，不忍直视。这种邋遢的男子大概从没想过，太太们也是希望自己的另一半清洁整齐，她更喜欢你能洗脸刮胡子，至少在她面前晃来晃去的时候，能对得起她的眼睛。一名真正的男子当然不靠外貌，但外表却是他人见到你时对你的第一印象。我们应该在家里也同样时时保持整齐，至少干净整洁。</p>",
            "url": "http://www.luzexi.com/2020/07/13/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B015",
            
            
            
            
            
            "date_published": "2020-07-13T00:00:00+08:00",
            "date_modified": "2020-07-13T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/12/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A848",
            "title": "思路探讨(四十八) 从价格到人性",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "在投机的这条路上我有过很多误解，我很长一段时间并不认为自己在投机，我并不认为自己是在投机取巧，我认为自己是正义的化身，做的都是正能量的投资。其实我并不知道我的想法是种偏见，因为我完全不认为自己是错的，甚至没想过这种想法是不是有错的可能性。连错的可能性能都没曾想过，可想而知我有多么相信我所做的是对的。随着时间的冲刷，我很自然的被按在地上摩擦摩擦，也有曾激烈的反抗过，反抗也不是反转开始而是继续认死理，直到自己没有脾气，任由自己被社会摩擦摩擦。当彻底没有脾气时才慢慢回想自己是否真的错了，反思自己的想法是否是一种偏见，片面且幼稚的见解，这也需要一个过程，并不是一下明白或领悟的事情。让一个人相信一件事很难，让一个人不相信一件事更难。^^ ^^啊，太阳。这就是人啊。脑回路永远都是难以快速转出来的，永远都是撞了南墙才回头的。于是我开始寻找一个答案，在投机中什么才不是偏见。我为这事做了很多努力，并且持续了很长时间，我看了很多经济相关的书，并规定自己每天做一些K线的模拟练习。我发现最难的就是没有偏见，人很容易就陷入到一个自己或别人圈出来的逻辑或信念，一旦相信就会像是被黑布蒙上了眼睛，无视其他方向的视角和周围环境的变化，但又不能不信，因为你必须有一套理论体系来支撑你的行为方向。要自己没有偏见，经验、经历、知识、心智一样不能少，最好每样都强大，即使这样也不能保证没有偏见，还得不断反思，不但反思错误的，也要反思正确的。(我又给自己画了一个圈)股票的价格没有规律可循，很多人都有自己的一套价格理论，比如我曾有平台的概念，认为价格会以平台的形式梯度上涨或梯度下跌，但价格经常打破平台稍微一点点又回来，于是我又认为这种平台概念是对的，只是没有绝对的边界。当一个理论被证明错误时，我又给自己设立了一个理论。随着时间的推移，我的理论越来越高级，我不再关心价格平台、K线指标，而是用情绪理论代替之。比如我用情绪理论去解释价格的原因，我认为情绪是主导价格的重要因素，我们应该感受到股价的情绪，在上升那一刻即时的跟上，不管股价在哪里，前期是否涨的比较多，只要情绪对了就有机会。我还认为情绪只是短线理论，长线的就应该不在意股价的波动，而是关注行业趋势、经济趋势、管理层的人员的能力。我还特意去寻找情绪的答案，比如我怎样才能正确感受到价格的情绪。我认为价格是情绪的延续，需要找到情绪的同理心，用心去感受情绪的发展方向，这样就不会因为试图去反抗情绪而遭到暴击。类似的理论有过很多种，每次都被反证。我的理论开始从表象深入到内在，我发现表象只是结果，内在才是逻辑的驱动力。人性永不变，这个社会是由几十亿人构成，由人性建立起来的一个社会，自然的运作规律也跟人性有关。我看了些关于人性的书包括《人性的弱点》、《态度》、《人格心理学》以及《富兰克林自传》、《乔布斯传》、《林徽因传》、《陆小曼传》等等些许人物传记，从人身上体会人性是最好的途径。最近我又有了一套新的理论，不妨来看看我的所思所想，比起以前的理论这次更宏观些许。我发现，中国的体制完全独立与美国，是一个自主探索的体制。我认为这是对的，不要去刻意的模仿别人是正确的。这就像是我们自身和我们的家庭，我们应该积极经营自己和家庭，让自己和家庭茁长成长，而不是看到别人有什么，就想着自己也该这样做。我很清晰的记得一句英文是这样写的：As long as you follow other people and as long as you’re being a copy cat you will never ever be the best copy cat in the world. But you will be the best you can be. 一直模仿他人就等于永远跟在别人的屁股后面，这样就永远突破不了自己。美国也是一样，它从建国开始就是独立探索出来的体制，其他国家都是模仿，而且基本都模仿的很不到位，只有美国自己玩的最溜。情况同中国一样，只有自己探索经营出来的路才是最好最适合自己的，也是最符合这个国家的，模仿者都只会偏离轨道。最后我发现人性是不变的，大家都为赚钱而赚钱，逻辑很多时候只是个借口，至少对价格来说是个借口，当我们不相信这个借口时，它什么用都没有，但当越来越多的人相信这个借口时，这个底层逻辑就开始有用了。这就像我们自身不断得去拼搏努力，这些拼搏和努力本身就是为了拼出一个底层逻辑，这个底层逻辑支撑着越来越多人汇聚过来形成更大的底层逻辑，慢慢的相信的人越来越多，形成的趋势也越来越强，当大部分人都认可时就完全爆发了。我认为价格上涨的逻辑也是如此。上涨的逻辑是大众信不信这个逻辑，如果非常相信就会涨很快，如果不相信就会平着熬着等待新的拐角，不过即使相信也在不断随着价格的上涨而不断起伏不定，价格太高就会有人开始怀疑本身的逻辑，低下来又有人开始觉得逻辑是对的应该坚持。于是那些相信上涨的逻辑的人数成了关键。下跌也是同样，并不是一定说有下跌逻辑才下跌，要有足够多的人相信下跌逻辑才会下跌，否则大家都在犹豫中，熬着等待新的拐点出现，直到某一边的人数开始增多并且逐渐大过另一边形成了跟随相信的趋势。一旦相信某逻辑的人数超过不相信，那么就开始涨，随着时间的推移，这个逻辑人数不断变化，到一定数量时，某一边的忠实粉丝越来越多，就开始所谓的趋势上涨，无脑上涨，疯狂上涨，就是没有逻辑，就只是相信的人数足够多。我有种感觉，我们可能过分关注投资股票，这消耗了我们大部分关注力，进而导致重要的事情没有得到足够的关注，从而导致无法进阶，最终导致我们人生遇到瓶颈。有问那还有啥好的投资呢？我认为应该投资自己和家庭成员。把注意力转移到人身上，知识、能力、境界、健康、视野，这些上来，相对于这些，股票的涨跌实在不值得一提。家庭成员之间的关系值得我们投资更多的精力去融合、团结、去相爱。各位共勉",
            "content_html": "<p>在投机的这条路上我有过很多误解，我很长一段时间并不认为自己在投机，我并不认为自己是在投机取巧，我认为自己是正义的化身，做的都是正能量的投资。其实我并不知道我的想法是种偏见，因为我完全不认为自己是错的，甚至没想过这种想法是不是有错的可能性。连错的可能性能都没曾想过，可想而知我有多么相信我所做的是对的。</p><p>随着时间的冲刷，我很自然的被按在地上摩擦摩擦，也有曾激烈的反抗过，反抗也不是反转开始而是继续认死理，直到自己没有脾气，任由自己被社会摩擦摩擦。当彻底没有脾气时才慢慢回想自己是否真的错了，反思自己的想法是否是一种偏见，片面且幼稚的见解，这也需要一个过程，并不是一下明白或领悟的事情。</p><h6 id=\"让一个人相信一件事很难让一个人不相信一件事更难-\">让一个人相信一件事很难，让一个人不相信一件事更难。^<em>^ ^</em>^</h6><p>啊，太阳。这就是人啊。脑回路永远都是难以快速转出来的，永远都是撞了南墙才回头的。</p><p>于是我开始寻找一个答案，在投机中什么才不是偏见。我为这事做了很多努力，并且持续了很长时间，我看了很多经济相关的书，并规定自己每天做一些K线的模拟练习。</p><h6 id=\"我发现最难的就是没有偏见人很容易就陷入到一个自己或别人圈出来的逻辑或信念一旦相信就会像是被黑布蒙上了眼睛无视其他方向的视角和周围环境的变化但又不能不信因为你必须有一套理论体系来支撑你的行为方向要自己没有偏见经验经历知识心智一样不能少最好每样都强大即使这样也不能保证没有偏见还得不断反思不但反思错误的也要反思正确的我又给自己画了一个圈\">我发现最难的就是没有偏见，人很容易就陷入到一个自己或别人圈出来的逻辑或信念，一旦相信就会像是被黑布蒙上了眼睛，无视其他方向的视角和周围环境的变化，但又不能不信，因为你必须有一套理论体系来支撑你的行为方向。要自己没有偏见，经验、经历、知识、心智一样不能少，最好每样都强大，即使这样也不能保证没有偏见，还得不断反思，不但反思错误的，也要反思正确的。(我又给自己画了一个圈)</h6><p>股票的价格没有规律可循，很多人都有自己的一套价格理论，比如我曾有平台的概念，认为价格会以平台的形式梯度上涨或梯度下跌，但价格经常打破平台稍微一点点又回来，于是我又认为这种平台概念是对的，只是没有绝对的边界。当一个理论被证明错误时，我又给自己设立了一个理论。</p><p>随着时间的推移，我的理论越来越高级，我不再关心价格平台、K线指标，而是用情绪理论代替之。比如我用情绪理论去解释价格的原因，我认为情绪是主导价格的重要因素，我们应该感受到股价的情绪，在上升那一刻即时的跟上，不管股价在哪里，前期是否涨的比较多，只要情绪对了就有机会。</p><p>我还认为情绪只是短线理论，长线的就应该不在意股价的波动，而是关注行业趋势、经济趋势、管理层的人员的能力。我还特意去寻找情绪的答案，比如我怎样才能正确感受到价格的情绪。我认为价格是情绪的延续，需要找到情绪的同理心，用心去感受情绪的发展方向，这样就不会因为试图去反抗情绪而遭到暴击。</p><h6 id=\"类似的理论有过很多种每次都被反证我的理论开始从表象深入到内在我发现表象只是结果内在才是逻辑的驱动力人性永不变这个社会是由几十亿人构成由人性建立起来的一个社会自然的运作规律也跟人性有关我看了些关于人性的书包括人性的弱点态度人格心理学以及富兰克林自传乔布斯传林徽因传陆小曼传等等些许人物传记从人身上体会人性是最好的途径\">类似的理论有过很多种，每次都被反证。我的理论开始从表象深入到内在，我发现表象只是结果，内在才是逻辑的驱动力。人性永不变，这个社会是由几十亿人构成，由人性建立起来的一个社会，自然的运作规律也跟人性有关。我看了些关于人性的书包括《人性的弱点》、《态度》、《人格心理学》以及《富兰克林自传》、《乔布斯传》、《林徽因传》、《陆小曼传》等等些许人物传记，从人身上体会人性是最好的途径。</h6><p>最近我又有了一套新的理论，不妨来看看我的所思所想，比起以前的理论这次更宏观些许。</p><p>我发现，中国的体制完全独立与美国，是一个自主探索的体制。我认为这是对的，不要去刻意的模仿别人是正确的。这就像是我们自身和我们的家庭，我们应该积极经营自己和家庭，让自己和家庭茁长成长，而不是看到别人有什么，就想着自己也该这样做。我很清晰的记得一句英文是这样写的：As long as you follow other people and as long as you’re being a copy cat you will never ever be the best copy cat in the world. But you will be the best you can be. 一直模仿他人就等于永远跟在别人的屁股后面，这样就永远突破不了自己。美国也是一样，它从建国开始就是独立探索出来的体制，其他国家都是模仿，而且基本都模仿的很不到位，只有美国自己玩的最溜。情况同中国一样，只有自己探索经营出来的路才是最好最适合自己的，也是最符合这个国家的，模仿者都只会偏离轨道。</p><p>最后我发现人性是不变的，大家都为赚钱而赚钱，逻辑很多时候只是个借口，至少对价格来说是个借口，当我们不相信这个借口时，它什么用都没有，但当越来越多的人相信这个借口时，这个底层逻辑就开始有用了。这就像我们自身不断得去拼搏努力，这些拼搏和努力本身就是为了拼出一个底层逻辑，这个底层逻辑支撑着越来越多人汇聚过来形成更大的底层逻辑，慢慢的相信的人越来越多，形成的趋势也越来越强，当大部分人都认可时就完全爆发了。</p><h6 id=\"我认为价格上涨的逻辑也是如此上涨的逻辑是大众信不信这个逻辑如果非常相信就会涨很快如果不相信就会平着熬着等待新的拐角不过即使相信也在不断随着价格的上涨而不断起伏不定价格太高就会有人开始怀疑本身的逻辑低下来又有人开始觉得逻辑是对的应该坚持于是那些相信上涨的逻辑的人数成了关键下跌也是同样并不是一定说有下跌逻辑才下跌要有足够多的人相信下跌逻辑才会下跌否则大家都在犹豫中熬着等待新的拐点出现直到某一边的人数开始增多并且逐渐大过另一边形成了跟随相信的趋势一旦相信某逻辑的人数超过不相信那么就开始涨随着时间的推移这个逻辑人数不断变化到一定数量时某一边的忠实粉丝越来越多就开始所谓的趋势上涨无脑上涨疯狂上涨就是没有逻辑就只是相信的人数足够多\">我认为价格上涨的逻辑也是如此。上涨的逻辑是大众信不信这个逻辑，如果非常相信就会涨很快，如果不相信就会平着熬着等待新的拐角，不过即使相信也在不断随着价格的上涨而不断起伏不定，价格太高就会有人开始怀疑本身的逻辑，低下来又有人开始觉得逻辑是对的应该坚持。于是那些相信上涨的逻辑的人数成了关键。下跌也是同样，并不是一定说有下跌逻辑才下跌，要有足够多的人相信下跌逻辑才会下跌，否则大家都在犹豫中，熬着等待新的拐点出现，直到某一边的人数开始增多并且逐渐大过另一边形成了跟随相信的趋势。一旦相信某逻辑的人数超过不相信，那么就开始涨，随着时间的推移，这个逻辑人数不断变化，到一定数量时，某一边的忠实粉丝越来越多，就开始所谓的趋势上涨，无脑上涨，疯狂上涨，就是没有逻辑，就只是相信的人数足够多。</h6><p>我有种感觉，我们可能过分关注投资股票，这消耗了我们大部分关注力，进而导致重要的事情没有得到足够的关注，从而导致无法进阶，最终导致我们人生遇到瓶颈。有问那还有啥好的投资呢？我认为应该投资自己和家庭成员。把注意力转移到人身上，知识、能力、境界、健康、视野，这些上来，相对于这些，股票的涨跌实在不值得一提。家庭成员之间的关系值得我们投资更多的精力去融合、团结、去相爱。</p><p>各位共勉</p>",
            "url": "http://www.luzexi.com/2020/07/12/%E6%80%9D%E8%B7%AF%E6%8E%A2%E8%AE%A848",
            
            
            
            "tags": ["life","金融投资"],
            
            "date_published": "2020-07-12T00:00:00+08:00",
            "date_modified": "2020-07-12T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/08/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B014",
            "title": "每日读书笔记14 《人性的弱点》",
            "summary": "读书 书 看书 读后感 笔记 摘要",
            "content_text": "《人性的弱点》让你的家庭生活幸福快乐48，注重生活中的小事琐碎的事情是多数婚姻不幸的根源。其实只要做一些简单的事就能顺利的避免走向不幸。比如每天早上向妻子或丈夫说早安，出门上班时向对方说再会，就能避免许多离婚。人是很奇怪的动物，我们都非常注重生活中的小事，一朵花，一个小礼物，一句甜言蜜语，这比给妻子或丈夫买个车子或房子还重要。如果许多纪念日你记不住，切不可忘记，对方的生活和结婚纪念日。勃朗宁与夫人的生活就很可歌可叹，他从未忙得忘记对夫人用小小的恭维及注意来保护爱情的活力。终究婚姻是一串琐事，忽略这个事实，将造成家庭生活的灾难。注重那些看似小的事情，那才是人类感受的关键。49，家庭生活也应该有礼丹姆罗希是位有名演说家，他与夫人的生活很快乐，问她夫人的秘诀是什么时，她说，“她认为结婚后的礼貌是最重要的。我们对丈夫或妻子应该像对刚见面的人一样有礼。”无礼是侵浊爱情的活水。大部分时候我们对陌生人和朋友比对自家人要更加客气有礼。我们不会阻止陌生人讲自己听过的故事，也不会未经朋友的允许而拆朋友的信，在请求向陌生人和朋友帮助时都会先彬彬有礼的请求一番。但我们对家人则是另一番态度，总是因为他们的小错而侮辱他们，对我们说出刻薄、侮辱、伤感情的话的人，都是我们自家的人。我们应该尽早的发现这个问题，并改进它。我们应该像经营自己事业或职业那样去经营家庭，使家庭成为一个发达的机构，动力十足并团结一致。对待妻子和丈夫时，更多的使用礼仪外交手段来对待他们，更多用些温柔的手段，而不是高压或强硬手段。其实很多男人都知道应该先让妻子快乐然后就可以使她快乐的做事并不需要任何报酬。他知道如果给她几句简单真诚的恭维和赞美，说她管家是如何的好，她就会很乐意去帮助男人们做事，她也会为他节省每一分钱，因为男人们赞美了她对她彬彬有礼。相反有部分男人却完全不知道如何对待妻子，他们情愿与她争吵，情愿浪费他的钱为她买新衣服、新车子、新珠宝，也不愿意为一点小事去赞美去恭维，最后浪费了钱还是没能得到家庭的快乐。给予你的妻子或丈夫更多礼貌",
            "content_html": "<h4 id=\"人性的弱点\">《人性的弱点》</h4><h4 id=\"让你的家庭生活幸福快乐\">让你的家庭生活幸福快乐</h4><h4 id=\"48注重生活中的小事\">48，注重生活中的小事</h4><p>琐碎的事情是多数婚姻不幸的根源。其实只要做一些简单的事就能顺利的避免走向不幸。比如每天早上向妻子或丈夫说早安，出门上班时向对方说再会，就能避免许多离婚。</p><p>人是很奇怪的动物，我们都非常注重生活中的小事，一朵花，一个小礼物，一句甜言蜜语，这比给妻子或丈夫买个车子或房子还重要。如果许多纪念日你记不住，切不可忘记，对方的生活和结婚纪念日。</p><p>勃朗宁与夫人的生活就很可歌可叹，他从未忙得忘记对夫人用小小的恭维及注意来保护爱情的活力。终究婚姻是一串琐事，忽略这个事实，将造成家庭生活的灾难。</p><p>注重那些看似小的事情，那才是人类感受的关键。</p><h4 id=\"49家庭生活也应该有礼\">49，家庭生活也应该有礼</h4><p>丹姆罗希是位有名演说家，他与夫人的生活很快乐，问她夫人的秘诀是什么时，她说，“她认为结婚后的礼貌是最重要的。我们对丈夫或妻子应该像对刚见面的人一样有礼。”</p><p>无礼是侵浊爱情的活水。大部分时候我们对陌生人和朋友比对自家人要更加客气有礼。我们不会阻止陌生人讲自己听过的故事，也不会未经朋友的允许而拆朋友的信，在请求向陌生人和朋友帮助时都会先彬彬有礼的请求一番。但我们对家人则是另一番态度，总是因为他们的小错而侮辱他们，对我们说出刻薄、侮辱、伤感情的话的人，都是我们自家的人。</p><p>我们应该尽早的发现这个问题，并改进它。我们应该像经营自己事业或职业那样去经营家庭，使家庭成为一个发达的机构，动力十足并团结一致。对待妻子和丈夫时，更多的使用礼仪外交手段来对待他们，更多用些温柔的手段，而不是高压或强硬手段。</p><p>其实很多男人都知道应该先让妻子快乐然后就可以使她快乐的做事并不需要任何报酬。他知道如果给她几句简单真诚的恭维和赞美，说她管家是如何的好，她就会很乐意去帮助男人们做事，她也会为他节省每一分钱，因为男人们赞美了她对她彬彬有礼。</p><p>相反有部分男人却完全不知道如何对待妻子，他们情愿与她争吵，情愿浪费他的钱为她买新衣服、新车子、新珠宝，也不愿意为一点小事去赞美去恭维，最后浪费了钱还是没能得到家庭的快乐。</p><p>给予你的妻子或丈夫更多礼貌</p>",
            "url": "http://www.luzexi.com/2020/07/08/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B014",
            
            
            
            
            
            "date_published": "2020-07-08T00:00:00+08:00",
            "date_modified": "2020-07-08T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/05/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B16",
            "title": "向内看自己(六)",
            "summary": "思路 随想 理念 逻辑 人生哲学",
            "content_text": "按事情的重要程度去分配精力所有人都知道，但做比知道容易，最近就被这个问题伤到。为什么我们知道了什么事情最重要，要先做，却总是反着来呢？我总结下。1.逃避心态最重要的事情往往都是最艰难的，谁都不愿意主动去受这个苦，这导致随着时间的推移困难越来越大。解决这个问题得靠自己，这通常是习惯造成的，如果你习惯直面痛苦而不是逃避，每次都能迅速下定决心去面对和解决困难，那么这个问题就会迎刃而解，在你的这种习惯驱动下问题总会被一次次及时的化解。面对重要而令人痛苦的事情时，你总是能迅速提起精神，迎难而上直到事情有了新的进展有了更多的乐观消息，反之事情总是会被拖入越来越糟糕的地步。有困难最好立刻去解决，有没有真正解决是另一回事，不要顾虑太多，行动起来是前提，能提起勇气去解决是很好的开始。2.环境一直在变化，会有新的当下更紧急更重要的事情加入。人很难适应变化，特别是年纪越大越难适应，当环境改变时，人的想法通常要在老地方呆很久，很多时候都是不撞南墙不回头。当有新的更重要更紧急的事情加入到我们的生活中来时，我们通常都是依然还坚持着我们自己脑海中原来的想法，比如我最近就一直以把书完成为最重要目标，但是工作中忽然插入了一个更紧急更重要的任务，可我仍然没能引起有效的重视，直到2周后发现事情有些不对劲，才换了想法做了紧急的补救工作。解决这个问题得打开我们的思路，要把‘不确定性’和‘环境时时在变化’更深刻的植入到自己的脑中。我们应该时刻记着，我们现在能有效执行自己的计划并按照自己的想法来安排时间和精力是得益于环境的稳定，而环境的这种稳定是非常脆弱的，我们应该时刻提高警觉，时刻观察和感受环境是否在变化，一旦有变化就该采取行动，即使是轻微的变化也要第一时间想想，自己是否做出了应对环境变化的行为，如果没有立刻着手开始应对。通常环境变化都会伴随着一些特殊事件的发生，比如公司的某个规则变了，政府的某个政策变了，某次会议发生了些奇怪的事，自己去了另一个陌生的地方，进入了一个新的环境(公司或学校或民族或国家)，领导忽然强调了些以前没有强调的事情，家庭里发生了些以前没有发生的事，国家或全球突发了什么事件等等，我们都应该引起警觉，最好能开始计划自己根据变化做出点什么改变，一开始改变不用很大，因为一开始改变太大会影响自己和周围的人和事反而会产生反应过大而陷入困境，应该一点点来逐步改变，这样就可以随时随地适应环境，因为环境改变也是一点点来的，通常一下子改变很大的环境通常都是个很深的坑。反之，警觉心不够，则很容易陷入被动，被动的去适应和主动的去改变是两种完全不同的状态。这些都是我的方法论，各位共勉。",
            "content_html": "<p>按事情的重要程度去分配精力所有人都知道，但做比知道容易，最近就被这个问题伤到。为什么我们知道了什么事情最重要，要先做，却总是反着来呢？我总结下。</p><h6 id=\"1逃避心态\">1.逃避心态</h6><p>最重要的事情往往都是最艰难的，谁都不愿意主动去受这个苦，这导致随着时间的推移困难越来越大。</p><p>解决这个问题得靠自己，这通常是习惯造成的，如果你习惯直面痛苦而不是逃避，每次都能迅速下定决心去面对和解决困难，那么这个问题就会迎刃而解，在你的这种习惯驱动下问题总会被一次次及时的化解。</p><p>面对重要而令人痛苦的事情时，你总是能迅速提起精神，迎难而上直到事情有了新的进展有了更多的乐观消息，反之事情总是会被拖入越来越糟糕的地步。</p><p>有困难最好立刻去解决，有没有真正解决是另一回事，不要顾虑太多，行动起来是前提，能提起勇气去解决是很好的开始。</p><h6 id=\"2环境一直在变化会有新的当下更紧急更重要的事情加入\">2.环境一直在变化，会有新的当下更紧急更重要的事情加入。</h6><p>人很难适应变化，特别是年纪越大越难适应，当环境改变时，人的想法通常要在老地方呆很久，很多时候都是不撞南墙不回头。</p><p>当有新的更重要更紧急的事情加入到我们的生活中来时，我们通常都是依然还坚持着我们自己脑海中原来的想法，比如我最近就一直以把书完成为最重要目标，但是工作中忽然插入了一个更紧急更重要的任务，可我仍然没能引起有效的重视，直到2周后发现事情有些不对劲，才换了想法做了紧急的补救工作。</p><p>解决这个问题得打开我们的思路，要把‘不确定性’和‘环境时时在变化’更深刻的植入到自己的脑中。我们应该时刻记着，我们现在能有效执行自己的计划并按照自己的想法来安排时间和精力是得益于环境的稳定，而环境的这种稳定是非常脆弱的，我们应该时刻提高警觉，时刻观察和感受环境是否在变化，一旦有变化就该采取行动，即使是轻微的变化也要第一时间想想，自己是否做出了应对环境变化的行为，如果没有立刻着手开始应对。</p><p>通常环境变化都会伴随着一些特殊事件的发生，比如公司的某个规则变了，政府的某个政策变了，某次会议发生了些奇怪的事，自己去了另一个陌生的地方，进入了一个新的环境(公司或学校或民族或国家)，领导忽然强调了些以前没有强调的事情，家庭里发生了些以前没有发生的事，国家或全球突发了什么事件等等，我们都应该引起警觉，最好能开始计划自己根据变化做出点什么改变，一开始改变不用很大，因为一开始改变太大会影响自己和周围的人和事反而会产生反应过大而陷入困境，应该一点点来逐步改变，这样就可以随时随地适应环境，因为环境改变也是一点点来的，通常一下子改变很大的环境通常都是个很深的坑。反之，警觉心不够，则很容易陷入被动，被动的去适应和主动的去改变是两种完全不同的状态。</p><p>这些都是我的方法论，各位共勉。</p>",
            "url": "http://www.luzexi.com/2020/07/05/%E5%90%91%E5%86%85%E7%9C%8B%E8%87%AA%E5%B7%B16",
            
            
            
            
            
            "date_published": "2020-07-05T00:00:00+08:00",
            "date_modified": "2020-07-05T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/01/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A12",
            "title": "给女儿的信(二)",
            "summary": "女儿 教育 亲情",
            "content_text": "Sharon、Anne爸爸好想你们，爸爸最近忙着学习。爸爸想，我这么老远的跑过来工作，看不到我最爱的Sharon和Anne，当然要努力一点了，否则还不如不过来呢。所以爸爸把生活计划的很满，每天都要学各种东西，运动也不能落下。夏天到了呢，你们那边天气热不热，该去游泳啦，每年都要去游泳一下哦，如果能学会游泳并经常坚持游泳的话，会更漂亮哦。你希望自己长高些长得漂亮些吗，那就多运动哦，特别是游泳，它是所有运动里对身体最好的一种。妈妈最近还有发脾气吗，要告诉妈妈不要发脾气哦，发脾气不好，要学会控制自己的情绪，控制自己不要发脾气。因为能控制的发脾气的人会非常厉害，他们会变得越来越聪明，处理事情的时候很冷静理智。当我们冷静理智的时候所做的决定才是相对比较好的。要记得学会控制自己的情绪哦，也要把这个告诉妈妈，让她学会控制情绪。",
            "content_html": "<p>Sharon、Anne爸爸好想你们，爸爸最近忙着学习。</p><p>爸爸想，我这么老远的跑过来工作，看不到我最爱的Sharon和Anne，当然要努力一点了，否则还不如不过来呢。</p><p>所以爸爸把生活计划的很满，每天都要学各种东西，运动也不能落下。</p><p>夏天到了呢，你们那边天气热不热，该去游泳啦，每年都要去游泳一下哦，如果能学会游泳并经常坚持游泳的话，会更漂亮哦。</p><p>你希望自己长高些长得漂亮些吗，那就多运动哦，特别是游泳，它是所有运动里对身体最好的一种。</p><p>妈妈最近还有发脾气吗，要告诉妈妈不要发脾气哦，发脾气不好，要学会控制自己的情绪，控制自己不要发脾气。因为能控制的发脾气的人会非常厉害，他们会变得越来越聪明，处理事情的时候很冷静理智。</p><p>当我们冷静理智的时候所做的决定才是相对比较好的。要记得学会控制自己的情绪哦，也要把这个告诉妈妈，让她学会控制情绪。</p>",
            "url": "http://www.luzexi.com/2020/07/01/%E7%BB%99%E5%A5%B3%E5%84%BF%E7%9A%84%E4%BF%A12",
            
            
            
            
            
            "date_published": "2020-07-01T00:00:00+08:00",
            "date_modified": "2020-07-01T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/01/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B013",
            "title": "每日读书笔记13 《人性的弱点》",
            "summary": "读书 书 看书 读后感 笔记 摘要",
            "content_text": "《人性的弱点》让你的家庭生活幸福快乐46，不要批评对方格莱斯是英国首相，他在公众面前是一个可畏的形象，而在家中从未批评过家人。当他早晨下来用餐时看见家人还在睡觉，他会用一种温柔的方式唤醒他们。凯瑟琳也是一样，他曾统治世界上最大的帝国，但如果厨师将肉烤焦，她什么也不会说，而是微笑的将肉吃下去。狄克斯研究婚姻不幸的专家，他发现击碎婚姻的大多数都是批评，无用的，令人心碎的批评。如果你想拥有家庭生活的快乐，不要批评你的丈夫或妻子。47.真诚的欣赏对方可能你不知道欣赏对方有多重要，男子在寻求伴侣时从不像在找高级职员那样寻找能力强过自己的人，而是在寻找一个对自己具有诱惑力的，愿意奉承自己的使自己感到舒服的人。如果一位女办公室主任应邀去吃饭，她总是提及自己的学识自己的成就，甚至坚持自付餐费，那最后的结果只能是再也没人邀请她吃饭了。相反，如果一位未进过大学的打字员应邀吃饭，她能温柔的注视着男伴，仰慕的说‘再给我讲讲有关你的事’，最后的结果可能是，男伴会告诉别人，她是我遇到过的最会说话的人。男性也应如此对待女性，特别是对女性的服饰和装饰，应当给予真诚的赞美。作者祖母95岁去世前不久给她看30多年前的照片，她唯一问的一句话是，那时我穿着什么衣服。对于男人来讲，他们也许想不起5年前穿什么衣服，但女人不同。法国上等社会的男子都要训练对女人的衣帽表示赞美，而且每晚都要训练很多次。迪斯瑞利英国伟大的政治家就不羞于让世界知道他对他的“小妇人沾光多少”。他说，我沾光于我夫人多于世上其他任何人。她帮助我勇敢前进，她为我很好的管理钱财，并为我生了5个孩子，为我建造了一个美丽的家庭，我所拥有的一切都是她的功劳。巴克斯得为丈夫放弃了舞台，专心在家带孩子，虽然她失去了舞台的快乐，但他从丈夫那里得到了更多的快乐。她丈夫说，妻子为自己和家庭放弃了很多，我应该尽量的称赞她鼓励她，这样她就能从失去的快乐中挽回一些快乐。丈夫的赞美和欣赏使得妻子重拾了生活的信心。如果你想保持家庭生活快乐，请给予对方真诚的赞美和欣赏。",
            "content_html": "<h4 id=\"人性的弱点\">《人性的弱点》</h4><h4 id=\"让你的家庭生活幸福快乐\">让你的家庭生活幸福快乐</h4><h4 id=\"46不要批评对方\">46，不要批评对方</h4><p>格莱斯是英国首相，他在公众面前是一个可畏的形象，而在家中从未批评过家人。当他早晨下来用餐时看见家人还在睡觉，他会用一种温柔的方式唤醒他们。</p><p>凯瑟琳也是一样，他曾统治世界上最大的帝国，但如果厨师将肉烤焦，她什么也不会说，而是微笑的将肉吃下去。</p><p>狄克斯研究婚姻不幸的专家，他发现击碎婚姻的大多数都是批评，无用的，令人心碎的批评。</p><p>如果你想拥有家庭生活的快乐，不要批评你的丈夫或妻子。</p><h4 id=\"47真诚的欣赏对方\">47.真诚的欣赏对方</h4><p>可能你不知道欣赏对方有多重要，男子在寻求伴侣时从不像在找高级职员那样寻找能力强过自己的人，而是在寻找一个对自己具有诱惑力的，愿意奉承自己的使自己感到舒服的人。</p><p>如果一位女办公室主任应邀去吃饭，她总是提及自己的学识自己的成就，甚至坚持自付餐费，那最后的结果只能是再也没人邀请她吃饭了。相反，如果一位未进过大学的打字员应邀吃饭，她能温柔的注视着男伴，仰慕的说‘再给我讲讲有关你的事’，最后的结果可能是，男伴会告诉别人，她是我遇到过的最会说话的人。</p><p>男性也应如此对待女性，特别是对女性的服饰和装饰，应当给予真诚的赞美。</p><p>作者祖母95岁去世前不久给她看30多年前的照片，她唯一问的一句话是，那时我穿着什么衣服。对于男人来讲，他们也许想不起5年前穿什么衣服，但女人不同。法国上等社会的男子都要训练对女人的衣帽表示赞美，而且每晚都要训练很多次。</p><p>迪斯瑞利英国伟大的政治家就不羞于让世界知道他对他的“小妇人沾光多少”。他说，我沾光于我夫人多于世上其他任何人。她帮助我勇敢前进，她为我很好的管理钱财，并为我生了5个孩子，为我建造了一个美丽的家庭，我所拥有的一切都是她的功劳。</p><p>巴克斯得为丈夫放弃了舞台，专心在家带孩子，虽然她失去了舞台的快乐，但他从丈夫那里得到了更多的快乐。她丈夫说，妻子为自己和家庭放弃了很多，我应该尽量的称赞她鼓励她，这样她就能从失去的快乐中挽回一些快乐。丈夫的赞美和欣赏使得妻子重拾了生活的信心。</p><p>如果你想保持家庭生活快乐，请给予对方真诚的赞美和欣赏。</p>",
            "url": "http://www.luzexi.com/2020/07/01/%E6%AF%8F%E6%97%A5%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B013",
            
            
            
            
            
            "date_published": "2020-07-01T00:00:00+08:00",
            "date_modified": "2020-07-01T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        },
    
        {
            "id": "http://www.luzexi.com/2020/07/01/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B09",
            "title": "读书笔记(九) 《精英们的清晨日课》",
            "summary": "读书 书 看书 读后感",
            "content_text": "《一日之计》精英们的清晨日课作者建议我们事先列出每日的清单，并将最重要的事情放在首位，每天早晨起来先按照清单中的内容完成任务。作者采访了许多名人，其中《财富》杂志的高级编辑杰夫.克尔，强调自己在每天早上完成任务清单上最重要的事情，不过他也承认尽管他十分努力，也没办法做到每天都做到。《困难即通途》的作者，瑞安.霍利迪说，她认为当你变得愈加忙碌时，例如有了更多新机遇，你的任务清单便要经受考验，还有当在旅行时是否依然能保持这种习惯，这是关键的点。她很自豪说自己因为养成了清单行事的习惯，所以能很好的做到。她喜欢在清晨中写作，她说她在清晨的写作，让她带着新鲜感和清醒的头脑走进新的一天。《财富》杂志高级主编，杰夫.克尔文说，自己通常会在6点到6点半起床，并会在起床后不到60秒里喝下3杯水，这样可以有效唤醒自己的身体和大脑。然后开始做清单上的任务。他说晚上睡觉前会阅读一些与工作无关的东西，这样有助于更轻松地入眠。最后他说自己是任务清单的忠实信徒，每天早上都会按照列出的任务清单，做最重要的任务，然后再在剩余的一天时间里，陆续做剩余的清单中的任务。《精英们的清晨日课》p66艺术家艾丽.卢娜说不论这一天是要写作、设计还是要画画，坚持晨间例程才是通向成功的大门。作者提出让一天变得高效的几个要点：每天列出待办事项。建议每天工作结束时将第二天的工作待办事项列在纸上，这样第二天坐下来工作时就可以立即看到这份清单。这能使你减少决策的疲劳，不用去想今天我工作要干什么，待办清单将你从对清晨重要事项的干扰中解脱出来。这份待办清单最好能反应你一天具有挑战性的工作，也不要超负荷让自己陷入做不完单位状态。优先去做最重要的工作早晨是最宝贵的时间，你应该做你认为最重要的事情。计算机科学副教授在《深度工作》中说：在无干扰的状态下专注地进行职业活动，使个人认知能力达到极限。这种努力能创造新价值、提升技能，而且难以复制。而肤浅工作是对认知要求不高的事务性任务，往往在受到干扰的情况下开展。此类工作通常不会为世界创造太多新价值而且容易复制。就因为无人打扰的时间宝贵，我们就更应该在早晨处理自己觉得最重要的事情，而下午则用来处理琐事。不要在清晨陷入琐碎的工作作者举例清晨看邮件，说一旦清晨去查看邮件回复邮件，我们就会陷入一种被动模式，我们会按照其他人而非自己的日程安排来行事。这样会很糟糕，在清晨我们应该掌握主动权，不要让自己变得被动。杜绝早上开会作者说会议通常会浪费我们很多时间，特别是早上的宝贵时间。因此尽量不要将会议放在早上，尽量将他们放到下午，让早上留出一大块自己的时间，这样才能让我们保持专注。将大目标分解成小目标没人能一下子完成一个大项目，一口吃不了大象，我们应该将大目标分解成小目标，这样我们才能控制好工作的进展节奏，目标被分解为更小的部分，小块的工作往往更容易上手和完成。找到适合自己的方式我们应该找到最适合自己的方式，而不是适合其他任何人的方式。不应该只是去一味的模仿，一定要放宽视野，全身心尝试新的方法，适合自己的方法。如果早晨不能成为你最有效的时间，也可以选择其他时间，或者为了应付工作不至于被开除，可以每隔1小时查看一下工作，如果没有特别紧急的事情就继续自己的专注。我们大多数人都能意识到一天中某个时间段的效率最高，我们应该找到那个时间段，把对自己来说最重要的事情放在那里。关键是明确那些高效的时间段在一天的哪里，并相应的调整自己的日程。请留意你最高效的那些时段。",
            "content_html": "<p>《一日之计》精英们的清晨日课</p><p>作者建议我们事先列出每日的清单，并将最重要的事情放在首位，每天早晨起来先按照清单中的内容完成任务。</p><p>作者采访了许多名人，其中《财富》杂志的高级编辑杰夫.克尔，强调自己在每天早上完成任务清单上最重要的事情，不过他也承认尽管他十分努力，也没办法做到每天都做到。</p><p>《困难即通途》的作者，瑞安.霍利迪说，她认为当你变得愈加忙碌时，例如有了更多新机遇，你的任务清单便要经受考验，还有当在旅行时是否依然能保持这种习惯，这是关键的点。她很自豪说自己因为养成了清单行事的习惯，所以能很好的做到。</p><p>她喜欢在清晨中写作，她说她在清晨的写作，让她带着新鲜感和清醒的头脑走进新的一天。</p><p>《财富》杂志高级主编，杰夫.克尔文说，自己通常会在6点到6点半起床，并会在起床后不到60秒里喝下3杯水，这样可以有效唤醒自己的身体和大脑。然后开始做清单上的任务。</p><p>他说晚上睡觉前会阅读一些与工作无关的东西，这样有助于更轻松地入眠。</p><p>最后他说自己是任务清单的忠实信徒，每天早上都会按照列出的任务清单，做最重要的任务，然后再在剩余的一天时间里，陆续做剩余的清单中的任务。</p><p>《精英们的清晨日课》</p><p>p66</p><p>艺术家艾丽.卢娜说不论这一天是要写作、设计还是要画画，坚持晨间例程才是通向成功的大门。</p><p>作者提出让一天变得高效的几个要点：</p><p>每天列出待办事项。建议每天工作结束时将第二天的工作待办事项列在纸上，这样第二天坐下来工作时就可以立即看到这份清单。</p><p>这能使你减少决策的疲劳，不用去想今天我工作要干什么，待办清单将你从对清晨重要事项的干扰中解脱出来。这份待办清单最好能反应你一天具有挑战性的工作，也不要超负荷让自己陷入做不完单位状态。</p><p>优先去做最重要的工作早晨是最宝贵的时间，你应该做你认为最重要的事情。计算机科学副教授在《深度工作》中说：在无干扰的状态下专注地进行职业活动，使个人认知能力达到极限。这种努力能创造新价值、提升技能，而且难以复制。而肤浅工作是对认知要求不高的事务性任务，往往在受到干扰的情况下开展。此类工作通常不会为世界创造太多新价值而且容易复制。</p><p>就因为无人打扰的时间宝贵，我们就更应该在早晨处理自己觉得最重要的事情，而下午则用来处理琐事。</p><p>不要在清晨陷入琐碎的工作作者举例清晨看邮件，说一旦清晨去查看邮件回复邮件，我们就会陷入一种被动模式，我们会按照其他人而非自己的日程安排来行事。这样会很糟糕，在清晨我们应该掌握主动权，不要让自己变得被动。</p><p>杜绝早上开会作者说会议通常会浪费我们很多时间，特别是早上的宝贵时间。因此尽量不要将会议放在早上，尽量将他们放到下午，让早上留出一大块自己的时间，这样才能让我们保持专注。</p><p>将大目标分解成小目标没人能一下子完成一个大项目，一口吃不了大象，我们应该将大目标分解成小目标，这样我们才能控制好工作的进展节奏，目标被分解为更小的部分，小块的工作往往更容易上手和完成。</p><p>找到适合自己的方式我们应该找到最适合自己的方式，而不是适合其他任何人的方式。不应该只是去一味的模仿，一定要放宽视野，全身心尝试新的方法，适合自己的方法。如果早晨不能成为你最有效的时间，也可以选择其他时间，或者为了应付工作不至于被开除，可以每隔1小时查看一下工作，如果没有特别紧急的事情就继续自己的专注。</p><p>我们大多数人都能意识到一天中某个时间段的效率最高，我们应该找到那个时间段，把对自己来说最重要的事情放在那里。关键是明确那些高效的时间段在一天的哪里，并相应的调整自己的日程。</p><p>请留意你最高效的那些时段。</p>",
            "url": "http://www.luzexi.com/2020/07/01/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B09",
            
            
            
            
            
            "date_published": "2020-07-01T00:00:00+08:00",
            "date_modified": "2020-07-01T00:00:00+08:00",
            
                "author":  {
                "name": "Jesse Lu",
                "url": "http://www.luzexi.com",
                "avatar": null
                }
                
            
        }
    
    ]
}